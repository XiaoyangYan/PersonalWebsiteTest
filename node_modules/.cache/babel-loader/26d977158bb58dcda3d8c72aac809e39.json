{"ast":null,"code":"var mdeps = require('module-deps');\n\nvar depsSort = require('deps-sort');\n\nvar bpack = require('browser-pack');\n\nvar insertGlobals = require('insert-module-globals');\n\nvar syntaxError = require('syntax-error');\n\nvar builtins = require('./lib/builtins.js');\n\nvar splicer = require('labeled-stream-splicer');\n\nvar through = require('through2');\n\nvar concat = require('concat-stream');\n\nvar inherits = require('inherits');\n\nvar EventEmitter = require('events').EventEmitter;\n\nvar xtend = require('xtend');\n\nvar isarray = require('isarray');\n\nvar defined = require('defined');\n\nvar has = require('has');\n\nvar sanitize = require('htmlescape').sanitize;\n\nvar shasum = require('shasum');\n\nvar bresolve = require('browser-resolve');\n\nvar resolve = require('resolve');\n\nvar readonly = require('read-only-stream');\n\nmodule.exports = Browserify;\ninherits(Browserify, EventEmitter);\n\nvar fs = require('fs');\n\nvar path = require('path');\n\nvar paths = {\n  empty: path.join(__dirname, 'lib/_empty.js')\n};\n\nfunction Browserify(files, opts) {\n  var self = this;\n  if (!(this instanceof Browserify)) return new Browserify(files, opts);\n  if (!opts) opts = {};\n\n  if (typeof files === 'string' || isarray(files) || isStream(files)) {\n    opts = xtend(opts, {\n      entries: [].concat(opts.entries || [], files)\n    });\n  } else opts = xtend(files, opts);\n\n  self._options = opts;\n  if (opts.noparse) opts.noParse = opts.noparse;\n\n  if (opts.basedir !== undefined && typeof opts.basedir !== 'string') {\n    throw new Error('opts.basedir must be either undefined or a string.');\n  }\n\n  self._external = [];\n  self._exclude = [];\n  self._ignore = [];\n  self._expose = {};\n  self._hashes = {};\n  self._pending = 0;\n  self._transformOrder = 0;\n  self._transformPending = 0;\n  self._transforms = [];\n  self._entryOrder = 0;\n  self._ticked = false;\n  self._bresolve = opts.browserField === false ? function (id, opts, cb) {\n    if (!opts.basedir) opts.basedir = path.dirname(opts.filename);\n    resolve(id, opts, cb);\n  } : bresolve;\n  self._syntaxCache = {};\n  var ignoreTransform = [].concat(opts.ignoreTransform).filter(Boolean);\n\n  self._filterTransform = function (tr) {\n    if (Array.isArray(tr)) {\n      return ignoreTransform.indexOf(tr[0]) === -1;\n    }\n\n    return ignoreTransform.indexOf(tr) === -1;\n  };\n\n  self.pipeline = self._createPipeline(opts);\n  [].concat(opts.transform).filter(Boolean).filter(self._filterTransform).forEach(function (tr) {\n    self.transform(tr);\n  });\n  [].concat(opts.entries).filter(Boolean).forEach(function (file) {\n    self.add(file, {\n      basedir: opts.basedir\n    });\n  });\n  [].concat(opts.require).filter(Boolean).forEach(function (file) {\n    self.require(file, {\n      basedir: opts.basedir\n    });\n  });\n  [].concat(opts.plugin).filter(Boolean).forEach(function (p) {\n    self.plugin(p, {\n      basedir: opts.basedir\n    });\n  });\n}\n\nBrowserify.prototype.require = function (file, opts) {\n  var self = this;\n\n  if (isarray(file)) {\n    file.forEach(function (x) {\n      if (typeof x === 'object') {\n        self.require(x.file, xtend(opts, x));\n      } else self.require(x, opts);\n    });\n    return this;\n  }\n\n  if (!opts) opts = {};\n  var basedir = defined(opts.basedir, self._options.basedir, process.cwd());\n  var expose = opts.expose;\n\n  if (file === expose && /^[\\.]/.test(expose)) {\n    expose = '/' + path.relative(basedir, expose);\n    expose = expose.replace(/\\\\/g, '/');\n  }\n\n  if (expose === undefined && this._options.exposeAll) {\n    expose = true;\n  }\n\n  if (expose === true) {\n    expose = '/' + path.relative(basedir, file);\n    expose = expose.replace(/\\\\/g, '/');\n  }\n\n  if (isStream(file)) {\n    self._pending++;\n    var order = self._entryOrder++;\n    file.pipe(concat(function (buf) {\n      var filename = opts.file || file.file || path.join(basedir, '_stream_' + order + '.js');\n      var id = file.id || expose || filename;\n\n      if (expose || opts.entry === false) {\n        self._expose[id] = filename;\n      }\n\n      if (!opts.entry && self._options.exports === undefined) {\n        self._bpack.hasExports = true;\n      }\n\n      var rec = {\n        source: buf.toString('utf8'),\n        entry: defined(opts.entry, false),\n        file: filename,\n        id: id\n      };\n      if (rec.entry) rec.order = order;\n      if (rec.transform === false) rec.transform = false;\n      self.pipeline.write(rec);\n      if (--self._pending === 0) self.emit('_ready');\n    }));\n    return this;\n  }\n\n  var row;\n\n  if (typeof file === 'object') {\n    row = xtend(file, opts);\n  } else if (!opts.entry && isExternalModule(file)) {\n    // external module or builtin\n    row = xtend(opts, {\n      id: expose || file,\n      file: file\n    });\n  } else {\n    row = xtend(opts, {\n      file: path.resolve(basedir, file)\n    });\n  }\n\n  if (!row.id) {\n    row.id = expose || row.file;\n  }\n\n  if (expose || !row.entry) {\n    // Make this available to mdeps so that it can assign the value when it\n    // resolves the pathname.\n    row.expose = row.id;\n  }\n\n  if (opts.external) return self.external(file, opts);\n  if (row.entry === undefined) row.entry = false;\n\n  if (!row.entry && self._options.exports === undefined) {\n    self._bpack.hasExports = true;\n  }\n\n  if (row.entry) row.order = self._entryOrder++;\n  if (opts.transform === false) row.transform = false;\n  self.pipeline.write(row);\n  return self;\n};\n\nBrowserify.prototype.add = function (file, opts) {\n  var self = this;\n  if (!opts) opts = {};\n\n  if (isarray(file)) {\n    file.forEach(function (x) {\n      self.add(x, opts);\n    });\n    return this;\n  }\n\n  return this.require(file, xtend({\n    entry: true,\n    expose: false\n  }, opts));\n};\n\nBrowserify.prototype.external = function (file, opts) {\n  var self = this;\n\n  if (isarray(file)) {\n    file.forEach(function (f) {\n      if (typeof f === 'object') {\n        self.external(f, xtend(opts, f));\n      } else self.external(f, opts);\n    });\n    return this;\n  }\n\n  if (file && typeof file === 'object' && typeof file.bundle === 'function') {\n    var b = file;\n    self._pending++;\n    var bdeps = {};\n    var blabels = {};\n    b.on('label', function (prev, id) {\n      self._external.push(id);\n\n      if (prev !== id) {\n        blabels[prev] = id;\n\n        self._external.push(prev);\n      }\n    });\n    b.pipeline.get('deps').push(through.obj(function (row, enc, next) {\n      bdeps = xtend(bdeps, row.deps);\n      this.push(row);\n      next();\n    }));\n    self.on('dep', function (row) {\n      Object.keys(row.deps).forEach(function (key) {\n        var prev = bdeps[key];\n\n        if (prev) {\n          var id = blabels[prev];\n\n          if (id) {\n            row.indexDeps[key] = id;\n          }\n        }\n      });\n    });\n    b.pipeline.get('label').once('end', function () {\n      if (--self._pending === 0) self.emit('_ready');\n    });\n    return this;\n  }\n\n  if (!opts) opts = {};\n  var basedir = defined(opts.basedir, process.cwd());\n\n  this._external.push(file);\n\n  this._external.push('/' + path.relative(basedir, file));\n\n  return this;\n};\n\nBrowserify.prototype.exclude = function (file, opts) {\n  if (!opts) opts = {};\n  var basedir = defined(opts.basedir, process.cwd());\n\n  this._exclude.push(file);\n\n  this._exclude.push('/' + path.relative(basedir, file));\n\n  return this;\n};\n\nBrowserify.prototype.ignore = function (file, opts) {\n  if (!opts) opts = {};\n  var basedir = defined(opts.basedir, process.cwd()); // Handle relative paths\n\n  if (file[0] === '.') {\n    this._ignore.push(path.resolve(basedir, file));\n  } else {\n    this._ignore.push(file);\n  }\n\n  return this;\n};\n\nBrowserify.prototype.transform = function (tr, opts) {\n  var self = this;\n\n  if (typeof opts === 'function' || typeof opts === 'string') {\n    tr = [opts, tr];\n  }\n\n  if (isarray(tr)) {\n    opts = tr[1];\n    tr = tr[0];\n  } //if the bundler is ignoring this transform\n\n\n  if (typeof tr === 'string' && !self._filterTransform(tr)) {\n    return this;\n  }\n\n  function resolved() {\n    self._transforms[order] = rec;\n    --self._pending;\n\n    if (--self._transformPending === 0) {\n      self._transforms.forEach(function (transform) {\n        self.pipeline.write(transform);\n      });\n\n      if (self._pending === 0) {\n        self.emit('_ready');\n      }\n    }\n  }\n\n  if (!opts) opts = {};\n  opts._flags = '_flags' in opts ? opts._flags : self._options;\n  var basedir = defined(opts.basedir, this._options.basedir, process.cwd());\n  var order = self._transformOrder++;\n  self._pending++;\n  self._transformPending++;\n  var rec = {\n    transform: tr,\n    options: opts,\n    global: opts.global\n  };\n\n  if (typeof tr === 'string') {\n    var topts = {\n      basedir: basedir,\n      paths: (self._options.paths || []).map(function (p) {\n        return path.resolve(basedir, p);\n      })\n    };\n    resolve(tr, topts, function (err, res) {\n      if (err) return self.emit('error', err);\n      rec.transform = res;\n      resolved();\n    });\n  } else process.nextTick(resolved);\n\n  return this;\n};\n\nBrowserify.prototype.plugin = function (p, opts) {\n  if (isarray(p)) {\n    opts = p[1];\n    p = p[0];\n  }\n\n  if (!opts) opts = {};\n  var basedir = defined(opts.basedir, this._options.basedir, process.cwd());\n\n  if (typeof p === 'function') {\n    p(this, opts);\n  } else {\n    var pfile = resolve.sync(String(p), {\n      basedir: basedir\n    });\n\n    var f = require(pfile);\n\n    if (typeof f !== 'function') {\n      throw new Error('plugin ' + p + ' should export a function');\n    }\n\n    f(this, opts);\n  }\n\n  return this;\n};\n\nBrowserify.prototype._createPipeline = function (opts) {\n  var self = this;\n  if (!opts) opts = {};\n  this._mdeps = this._createDeps(opts);\n\n  this._mdeps.on('file', function (file, id) {\n    pipeline.emit('file', file, id);\n    self.emit('file', file, id);\n  });\n\n  this._mdeps.on('package', function (pkg) {\n    pipeline.emit('package', pkg);\n    self.emit('package', pkg);\n  });\n\n  this._mdeps.on('transform', function (tr, file) {\n    pipeline.emit('transform', tr, file);\n    self.emit('transform', tr, file);\n  });\n\n  var dopts = {\n    index: !opts.fullPaths && !opts.exposeAll,\n    dedupe: true,\n    expose: this._expose\n  };\n  this._bpack = bpack(xtend(opts, {\n    raw: true\n  }));\n  var pipeline = splicer.obj(['record', [this._recorder()], 'deps', [this._mdeps], 'json', [this._json()], 'unbom', [this._unbom()], 'unshebang', [this._unshebang()], 'syntax', [this._syntax()], 'sort', [depsSort(dopts)], 'dedupe', [this._dedupe()], 'label', [this._label(opts)], 'emit-deps', [this._emitDeps()], 'debug', [this._debug(opts)], 'pack', [this._bpack], 'wrap', []]);\n\n  if (opts.exposeAll) {\n    var basedir = defined(opts.basedir, process.cwd());\n    pipeline.get('deps').push(through.obj(function (row, enc, next) {\n      if (self._external.indexOf(row.id) >= 0) return next();\n      if (self._external.indexOf(row.file) >= 0) return next();\n\n      if (isAbsolutePath(row.id)) {\n        row.id = '/' + path.relative(basedir, row.file);\n      }\n\n      Object.keys(row.deps || {}).forEach(function (key) {\n        row.deps[key] = '/' + path.relative(basedir, row.deps[key]);\n      });\n      this.push(row);\n      next();\n    }));\n  }\n\n  return pipeline;\n};\n\nBrowserify.prototype._createDeps = function (opts) {\n  var self = this;\n  var mopts = xtend(opts);\n  var basedir = defined(opts.basedir, process.cwd()); // Let mdeps populate these values since it will be resolving file paths\n  // anyway.\n\n  mopts.expose = this._expose;\n  mopts.extensions = ['.js', '.json'].concat(mopts.extensions || []);\n  self._extensions = mopts.extensions;\n  mopts.transform = [];\n  mopts.transformKey = ['browserify', 'transform'];\n\n  mopts.postFilter = function (id, file, pkg) {\n    if (opts.postFilter && !opts.postFilter(id, file, pkg)) return false;\n    if (self._external.indexOf(file) >= 0) return false;\n    if (self._exclude.indexOf(file) >= 0) return false; //filter transforms on module dependencies\n\n    if (pkg && pkg.browserify && pkg.browserify.transform) {\n      //In edge cases it may be a string\n      pkg.browserify.transform = [].concat(pkg.browserify.transform).filter(Boolean).filter(self._filterTransform);\n    }\n\n    return true;\n  };\n\n  mopts.filter = function (id) {\n    if (opts.filter && !opts.filter(id)) return false;\n    if (self._external.indexOf(id) >= 0) return false;\n    if (self._exclude.indexOf(id) >= 0) return false;\n\n    if (opts.bundleExternal === false && isExternalModule(id)) {\n      return false;\n    }\n\n    return true;\n  };\n\n  mopts.resolve = function (id, parent, cb) {\n    if (self._ignore.indexOf(id) >= 0) return cb(null, paths.empty, {});\n\n    self._bresolve(id, parent, function (err, file, pkg) {\n      if (file && self._ignore.indexOf(file) >= 0) {\n        return cb(null, paths.empty, {});\n      }\n\n      if (file && self._ignore.length) {\n        var nm = file.split('/node_modules/')[1];\n\n        if (nm) {\n          nm = nm.split('/')[0];\n\n          if (self._ignore.indexOf(nm) >= 0) {\n            return cb(null, paths.empty, {});\n          }\n        }\n      }\n\n      if (file) {\n        var ex = '/' + path.relative(basedir, file);\n\n        if (self._external.indexOf(ex) >= 0) {\n          return cb(null, ex);\n        }\n\n        if (self._exclude.indexOf(ex) >= 0) {\n          return cb(null, ex);\n        }\n\n        if (self._ignore.indexOf(ex) >= 0) {\n          return cb(null, paths.empty, {});\n        }\n      }\n\n      if (err) cb(err, file, pkg);else if (file) fs.realpath(file, function (err, res) {\n        cb(err, res, pkg, file);\n      });else cb(err, null, pkg);\n    });\n  };\n\n  if (opts.builtins === false) {\n    mopts.modules = {};\n\n    self._exclude.push.apply(self._exclude, Object.keys(builtins));\n  } else if (opts.builtins && isarray(opts.builtins)) {\n    mopts.modules = {};\n    opts.builtins.forEach(function (key) {\n      mopts.modules[key] = builtins[key];\n    });\n  } else if (opts.builtins && typeof opts.builtins === 'object') {\n    mopts.modules = opts.builtins;\n  } else mopts.modules = xtend(builtins);\n\n  Object.keys(builtins).forEach(function (key) {\n    if (!has(mopts.modules, key)) self._exclude.push(key);\n  });\n  mopts.globalTransform = [];\n\n  if (!this._bundled) {\n    this.once('bundle', function () {\n      self.pipeline.write({\n        transform: globalTr,\n        global: true,\n        options: {}\n      });\n    });\n  }\n\n  var no = [].concat(opts.noParse).filter(Boolean);\n  var absno = no.filter(function (x) {\n    return typeof x === 'string';\n  }).map(function (x) {\n    return path.resolve(basedir, x);\n  });\n\n  function globalTr(file) {\n    if (opts.detectGlobals === false) return through();\n    if (opts.noParse === true) return through();\n    if (no.indexOf(file) >= 0) return through();\n    if (absno.indexOf(file) >= 0) return through();\n    var parts = file.split('/node_modules/');\n\n    for (var i = 0; i < no.length; i++) {\n      if (typeof no[i] === 'function' && no[i](file)) {\n        return through();\n      } else if (no[i] === parts[parts.length - 1].split('/')[0]) {\n        return through();\n      } else if (no[i] === parts[parts.length - 1]) {\n        return through();\n      }\n    }\n\n    var vars = xtend({\n      process: function () {\n        return \"require('_process')\";\n      }\n    }, opts.insertGlobalVars);\n\n    if (opts.bundleExternal === false) {\n      vars.process = undefined;\n      vars.buffer = undefined;\n    }\n\n    return insertGlobals(file, xtend(opts, {\n      debug: opts.debug,\n      always: opts.insertGlobals,\n      basedir: opts.commondir === false ? '/' : opts.basedir || process.cwd(),\n      vars: vars\n    }));\n  }\n\n  return mdeps(mopts);\n};\n\nBrowserify.prototype._recorder = function (opts) {\n  var self = this;\n  var ended = false;\n  this._recorded = [];\n\n  if (!this._ticked) {\n    process.nextTick(function () {\n      self._ticked = true;\n\n      self._recorded.forEach(function (row) {\n        stream.push(row);\n      });\n\n      if (ended) stream.push(null);\n    });\n  }\n\n  var stream = through.obj(write, end);\n  return stream;\n\n  function write(row, enc, next) {\n    self._recorded.push(row);\n\n    if (self._ticked) this.push(row);\n    next();\n  }\n\n  function end() {\n    ended = true;\n    if (self._ticked) this.push(null);\n  }\n};\n\nBrowserify.prototype._json = function () {\n  return through.obj(function (row, enc, next) {\n    if (/\\.json$/.test(row.file)) {\n      row.source = 'module.exports=' + sanitize(row.source);\n    }\n\n    this.push(row);\n    next();\n  });\n};\n\nBrowserify.prototype._unbom = function () {\n  return through.obj(function (row, enc, next) {\n    if (/^\\ufeff/.test(row.source)) {\n      row.source = row.source.replace(/^\\ufeff/, '');\n    }\n\n    this.push(row);\n    next();\n  });\n};\n\nBrowserify.prototype._unshebang = function () {\n  return through.obj(function (row, enc, next) {\n    if (/^#!/.test(row.source)) {\n      row.source = row.source.replace(/^#![^\\n]*\\n/, '');\n    }\n\n    this.push(row);\n    next();\n  });\n};\n\nBrowserify.prototype._syntax = function () {\n  var self = this;\n  return through.obj(function (row, enc, next) {\n    var h = shasum(row.source);\n\n    if (typeof self._syntaxCache[h] === 'undefined') {\n      var err = syntaxError(row.source, row.file || row.id);\n      if (err) return this.emit('error', err);\n      self._syntaxCache[h] = true;\n    }\n\n    this.push(row);\n    next();\n  });\n};\n\nBrowserify.prototype._dedupe = function () {\n  return through.obj(function (row, enc, next) {\n    if (!row.dedupeIndex && row.dedupe) {\n      row.source = 'arguments[4][' + JSON.stringify(row.dedupe) + '][0].apply(exports,arguments)';\n      row.nomap = true;\n    } else if (row.dedupeIndex) {\n      row.source = 'arguments[4][' + JSON.stringify(row.dedupeIndex) + '][0].apply(exports,arguments)';\n      row.nomap = true;\n    }\n\n    if (row.dedupeIndex && row.indexDeps) {\n      row.indexDeps.dup = row.dedupeIndex;\n    }\n\n    this.push(row);\n    next();\n  });\n};\n\nBrowserify.prototype._label = function (opts) {\n  var self = this;\n  var basedir = defined(opts.basedir, process.cwd());\n  return through.obj(function (row, enc, next) {\n    var prev = row.id;\n    if (self._external.indexOf(row.id) >= 0) return next();\n\n    if (self._external.indexOf('/' + path.relative(basedir, row.id)) >= 0) {\n      return next();\n    }\n\n    if (self._external.indexOf(row.file) >= 0) return next();\n    if (row.index) row.id = row.index;\n    self.emit('label', prev, row.id);\n    if (row.indexDeps) row.deps = row.indexDeps || {};\n    Object.keys(row.deps).forEach(function (key) {\n      if (self._expose[key]) {\n        row.deps[key] = key;\n        return;\n      }\n\n      var afile = path.resolve(path.dirname(row.file), key);\n      var rfile = '/' + path.relative(basedir, afile);\n\n      if (self._external.indexOf(rfile) >= 0) {\n        row.deps[key] = rfile;\n      }\n\n      if (self._external.indexOf(afile) >= 0) {\n        row.deps[key] = rfile;\n      }\n\n      if (self._external.indexOf(key) >= 0) {\n        row.deps[key] = key;\n        return;\n      }\n\n      for (var i = 0; i < self._extensions.length; i++) {\n        var ex = self._extensions[i];\n\n        if (self._external.indexOf(rfile + ex) >= 0) {\n          row.deps[key] = rfile + ex;\n          break;\n        }\n      }\n    });\n\n    if (row.entry || row.expose) {\n      self._bpack.standaloneModule = row.id;\n    }\n\n    this.push(row);\n    next();\n  });\n};\n\nBrowserify.prototype._emitDeps = function () {\n  var self = this;\n  return through.obj(function (row, enc, next) {\n    self.emit('dep', row);\n    this.push(row);\n    next();\n  });\n};\n\nBrowserify.prototype._debug = function (opts) {\n  var basedir = defined(opts.basedir, process.cwd());\n  return through.obj(function (row, enc, next) {\n    if (opts.debug) {\n      row.sourceRoot = 'file://localhost';\n      row.sourceFile = path.relative(basedir, row.file).replace(/\\\\/g, '/');\n    }\n\n    this.push(row);\n    next();\n  });\n};\n\nBrowserify.prototype.reset = function (opts) {\n  if (!opts) opts = {};\n  var hadExports = this._bpack.hasExports;\n  this.pipeline = this._createPipeline(xtend(opts, this._options));\n  this._bpack.hasExports = hadExports;\n  this._entryOrder = 0;\n  this._bundled = false;\n  this.emit('reset');\n};\n\nBrowserify.prototype.bundle = function (cb) {\n  var self = this;\n\n  if (cb && typeof cb === 'object') {\n    throw new Error('bundle() no longer accepts option arguments.\\n' + 'Move all option arguments to the browserify() constructor.');\n  }\n\n  if (this._bundled) {\n    var recorded = this._recorded;\n    this.reset();\n    recorded.forEach(function (x) {\n      self.pipeline.write(x);\n    });\n  }\n\n  var output = readonly(this.pipeline);\n\n  if (cb) {\n    output.on('error', cb);\n    output.pipe(concat(function (body) {\n      cb(null, body);\n    }));\n  }\n\n  function ready() {\n    self.emit('bundle', output);\n    self.pipeline.end();\n  }\n\n  if (this._pending === 0) ready();else this.once('_ready', ready);\n  this._bundled = true;\n  return output;\n};\n\nfunction isStream(s) {\n  return s && typeof s.pipe === 'function';\n}\n\nfunction isAbsolutePath(file) {\n  var regexp = process.platform === 'win32' ? /^\\w:/ : /^\\//;\n  return regexp.test(file);\n}\n\nfunction isExternalModule(file) {\n  var regexp = process.platform === 'win32' ? /^(\\.|\\w:)/ : /^[\\/.]/;\n  return !regexp.test(file);\n}","map":{"version":3,"sources":["/home/yanxiaoyang/react-project/PersonalWebsiteTest/node_modules/browserify/index.js"],"names":["mdeps","require","depsSort","bpack","insertGlobals","syntaxError","builtins","splicer","through","concat","inherits","EventEmitter","xtend","isarray","defined","has","sanitize","shasum","bresolve","resolve","readonly","module","exports","Browserify","fs","path","paths","empty","join","__dirname","files","opts","self","isStream","entries","_options","noparse","noParse","basedir","undefined","Error","_external","_exclude","_ignore","_expose","_hashes","_pending","_transformOrder","_transformPending","_transforms","_entryOrder","_ticked","_bresolve","browserField","id","cb","dirname","filename","_syntaxCache","ignoreTransform","filter","Boolean","_filterTransform","tr","Array","isArray","indexOf","pipeline","_createPipeline","transform","forEach","file","add","plugin","p","prototype","x","process","cwd","expose","test","relative","replace","exposeAll","order","pipe","buf","entry","_bpack","hasExports","rec","source","toString","write","emit","row","isExternalModule","external","f","bundle","b","bdeps","blabels","on","prev","push","get","obj","enc","next","deps","Object","keys","key","indexDeps","once","exclude","ignore","resolved","_flags","options","global","topts","map","err","res","nextTick","pfile","sync","String","_mdeps","_createDeps","pkg","dopts","index","fullPaths","dedupe","raw","_recorder","_json","_unbom","_unshebang","_syntax","_dedupe","_label","_emitDeps","_debug","isAbsolutePath","mopts","extensions","_extensions","transformKey","postFilter","browserify","bundleExternal","parent","length","nm","split","ex","realpath","modules","apply","globalTransform","_bundled","globalTr","no","absno","detectGlobals","parts","i","vars","insertGlobalVars","buffer","debug","always","commondir","ended","_recorded","stream","end","h","dedupeIndex","JSON","stringify","nomap","dup","afile","rfile","standaloneModule","sourceRoot","sourceFile","reset","hadExports","recorded","output","body","ready","s","regexp","platform"],"mappings":"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","sourcesContent":["var mdeps = require('module-deps');\nvar depsSort = require('deps-sort');\nvar bpack = require('browser-pack');\nvar insertGlobals = require('insert-module-globals');\nvar syntaxError = require('syntax-error');\n\nvar builtins = require('./lib/builtins.js');\n\nvar splicer = require('labeled-stream-splicer');\nvar through = require('through2');\nvar concat = require('concat-stream');\n\nvar inherits = require('inherits');\nvar EventEmitter = require('events').EventEmitter;\nvar xtend = require('xtend');\nvar isarray = require('isarray');\nvar defined = require('defined');\nvar has = require('has');\nvar sanitize = require('htmlescape').sanitize;\nvar shasum = require('shasum');\n\nvar bresolve = require('browser-resolve');\nvar resolve = require('resolve');\n\nvar readonly = require('read-only-stream');\n\nmodule.exports = Browserify;\ninherits(Browserify, EventEmitter);\n\nvar fs = require('fs');\nvar path = require('path');\nvar paths = {\n    empty: path.join(__dirname, 'lib/_empty.js')\n};\n\nfunction Browserify (files, opts) {\n    var self = this;\n    if (!(this instanceof Browserify)) return new Browserify(files, opts);\n    if (!opts) opts = {};\n    \n    if (typeof files === 'string' || isarray(files) || isStream(files)) {\n        opts = xtend(opts, { entries: [].concat(opts.entries || [], files) });\n    }\n    else opts = xtend(files, opts);\n    \n    self._options = opts;\n    if (opts.noparse) opts.noParse = opts.noparse;\n    \n    if (opts.basedir !== undefined && typeof opts.basedir !== 'string') {\n        throw new Error('opts.basedir must be either undefined or a string.');\n    }\n    \n    self._external = [];\n    self._exclude = [];\n    self._ignore = [];\n    self._expose = {};\n    self._hashes = {};\n    self._pending = 0;\n    self._transformOrder = 0;\n    self._transformPending = 0;\n    self._transforms = [];\n    self._entryOrder = 0;\n    self._ticked = false;\n    self._bresolve = opts.browserField === false\n        ? function (id, opts, cb) {\n            if (!opts.basedir) opts.basedir = path.dirname(opts.filename)\n            resolve(id, opts, cb)\n        }\n        : bresolve\n    ;\n    self._syntaxCache = {};\n\n    var ignoreTransform = [].concat(opts.ignoreTransform).filter(Boolean);\n    self._filterTransform = function (tr) {\n        if (Array.isArray(tr)) {\n            return ignoreTransform.indexOf(tr[0]) === -1;\n        }\n        return ignoreTransform.indexOf(tr) === -1;\n    };\n\n    self.pipeline = self._createPipeline(opts);\n    \n    [].concat(opts.transform).filter(Boolean).filter(self._filterTransform)\n    .forEach(function (tr) {\n        self.transform(tr);\n    });\n    \n    [].concat(opts.entries).filter(Boolean).forEach(function (file) {\n        self.add(file, { basedir: opts.basedir });\n    });\n    \n    [].concat(opts.require).filter(Boolean).forEach(function (file) {\n        self.require(file, { basedir: opts.basedir });\n    });\n    \n    [].concat(opts.plugin).filter(Boolean).forEach(function (p) {\n        self.plugin(p, { basedir: opts.basedir });\n    });\n}\n\nBrowserify.prototype.require = function (file, opts) {\n    var self = this;\n    if (isarray(file)) {\n        file.forEach(function (x) {\n            if (typeof x === 'object') {\n                self.require(x.file, xtend(opts, x));\n            }\n            else self.require(x, opts);\n        });\n        return this;\n    }\n    \n    if (!opts) opts = {};\n    var basedir = defined(opts.basedir, self._options.basedir, process.cwd());\n    var expose = opts.expose;\n    if (file === expose && /^[\\.]/.test(expose)) {\n        expose = '/' + path.relative(basedir, expose);\n        expose = expose.replace(/\\\\/g, '/');\n    }\n    if (expose === undefined && this._options.exposeAll) {\n        expose = true;\n    }\n    if (expose === true) {\n        expose = '/' + path.relative(basedir, file);\n        expose = expose.replace(/\\\\/g, '/');\n    }\n    \n    if (isStream(file)) {\n        self._pending ++;\n        var order = self._entryOrder ++;\n        file.pipe(concat(function (buf) {\n            var filename = opts.file || file.file || path.join(\n                basedir,\n                '_stream_' + order + '.js'\n            );\n            var id = file.id || expose || filename;\n            if (expose || opts.entry === false) {\n                self._expose[id] = filename;\n            }\n            if (!opts.entry && self._options.exports === undefined) {\n                self._bpack.hasExports = true;\n            }\n            var rec = {\n                source: buf.toString('utf8'),\n                entry: defined(opts.entry, false),\n                file: filename,\n                id: id\n            };\n            if (rec.entry) rec.order = order;\n            if (rec.transform === false) rec.transform = false;\n            self.pipeline.write(rec);\n            \n            if (-- self._pending === 0) self.emit('_ready');\n        }));\n        return this;\n    }\n    \n    var row;\n    if (typeof file === 'object') {\n        row = xtend(file, opts);\n    }\n    else if (!opts.entry && isExternalModule(file)) {\n        // external module or builtin\n        row = xtend(opts, { id: expose || file, file: file });\n    }\n    else {\n        row = xtend(opts, { file: path.resolve(basedir, file) });\n    }\n    \n    if (!row.id) {\n        row.id = expose || row.file;\n    }\n    if (expose || !row.entry) {\n        // Make this available to mdeps so that it can assign the value when it\n        // resolves the pathname.\n        row.expose = row.id;\n    }\n    \n    if (opts.external) return self.external(file, opts);\n    if (row.entry === undefined) row.entry = false;\n    \n    if (!row.entry && self._options.exports === undefined) {\n        self._bpack.hasExports = true;\n    }\n    \n    if (row.entry) row.order = self._entryOrder ++;\n    \n    if (opts.transform === false) row.transform = false;\n    self.pipeline.write(row);\n    return self;\n};\n\nBrowserify.prototype.add = function (file, opts) {\n    var self = this;\n    if (!opts) opts = {};\n    if (isarray(file)) {\n        file.forEach(function (x) { self.add(x, opts) });\n        return this;\n    }\n    return this.require(file, xtend({ entry: true, expose: false }, opts));\n};\n\nBrowserify.prototype.external = function (file, opts) {\n    var self = this;\n    if (isarray(file)) {\n        file.forEach(function (f) {\n            if (typeof f === 'object') {\n                self.external(f, xtend(opts, f));\n            }\n            else self.external(f, opts)\n        });\n        return this;\n    }\n    if (file && typeof file === 'object' && typeof file.bundle === 'function') {\n        var b = file;\n        self._pending ++;\n\n        var bdeps = {};\n        var blabels = {};\n\n        b.on('label', function (prev, id) {\n            self._external.push(id);\n\n            if (prev !== id) {\n                blabels[prev] = id;\n                self._external.push(prev);\n            }\n        });\n\n        b.pipeline.get('deps').push(through.obj(function (row, enc, next) {\n            bdeps = xtend(bdeps, row.deps);\n            this.push(row);\n            next();\n        }));\n\n        self.on('dep', function (row) {\n            Object.keys(row.deps).forEach(function (key) {\n                var prev = bdeps[key];\n                if (prev) {\n                    var id = blabels[prev];\n                    if (id) {\n                        row.indexDeps[key] = id;\n                    }\n                }\n            });\n        });\n\n        b.pipeline.get('label').once('end', function () {\n            if (-- self._pending === 0) self.emit('_ready');\n        });\n        return this;\n    }\n    \n    if (!opts) opts = {};\n    var basedir = defined(opts.basedir, process.cwd());\n    this._external.push(file);\n    this._external.push('/' + path.relative(basedir, file));\n    return this;\n};\n\nBrowserify.prototype.exclude = function (file, opts) {\n    if (!opts) opts = {};\n    var basedir = defined(opts.basedir, process.cwd());\n    this._exclude.push(file);\n    this._exclude.push('/' + path.relative(basedir, file));\n    return this;\n};\n\nBrowserify.prototype.ignore = function (file, opts) {\n    if (!opts) opts = {};\n    var basedir = defined(opts.basedir, process.cwd());\n\n    // Handle relative paths\n    if (file[0] === '.') {\n        this._ignore.push(path.resolve(basedir, file));\n    }\n    else {\n        this._ignore.push(file);\n    }\n    return this;\n};\n\nBrowserify.prototype.transform = function (tr, opts) {\n    var self = this;\n    if (typeof opts === 'function' || typeof opts === 'string') {\n        tr = [ opts, tr ];\n    }\n    if (isarray(tr)) {\n        opts = tr[1];\n        tr = tr[0];\n    }\n    \n    //if the bundler is ignoring this transform\n    if (typeof tr === 'string' && !self._filterTransform(tr)) {\n        return this;\n    }\n\n    function resolved () {\n      self._transforms[order] = rec;\n      -- self._pending;\n      if (-- self._transformPending === 0) {\n          self._transforms.forEach(function (transform) {\n            self.pipeline.write(transform);\n          });\n\n          if (self._pending === 0) {\n            self.emit('_ready');\n          }\n      }\n    }\n    \n    if (!opts) opts = {};\n    opts._flags = '_flags' in opts ? opts._flags : self._options;\n    \n    var basedir = defined(opts.basedir, this._options.basedir, process.cwd());\n    var order = self._transformOrder ++;\n    self._pending ++;\n    self._transformPending ++;\n\n    var rec = {\n        transform: tr,\n        options: opts,\n        global: opts.global\n    };\n\n    if (typeof tr === 'string') {\n        var topts = {\n            basedir: basedir,\n            paths: (self._options.paths || []).map(function (p) {\n                return path.resolve(basedir, p);\n            })\n        };\n        resolve(tr, topts, function (err, res) {\n            if (err) return self.emit('error', err);\n            rec.transform = res;\n            resolved();\n        });\n    }\n    else process.nextTick(resolved);\n    return this;\n};\n\nBrowserify.prototype.plugin = function (p, opts) {\n    if (isarray(p)) {\n        opts = p[1];\n        p = p[0];\n    }\n    if (!opts) opts = {};\n    var basedir = defined(opts.basedir, this._options.basedir, process.cwd());\n    if (typeof p === 'function') {\n        p(this, opts);\n    }\n    else {\n        var pfile = resolve.sync(String(p), { basedir: basedir })\n        var f = require(pfile);\n        if (typeof f !== 'function') {\n            throw new Error('plugin ' + p + ' should export a function');\n        }\n        f(this, opts);\n    }\n    return this;\n};\n\nBrowserify.prototype._createPipeline = function (opts) {\n    var self = this;\n    if (!opts) opts = {};\n    this._mdeps = this._createDeps(opts);\n    this._mdeps.on('file', function (file, id) {\n        pipeline.emit('file', file, id);\n        self.emit('file', file, id);\n    });\n    this._mdeps.on('package', function (pkg) {\n        pipeline.emit('package', pkg);\n        self.emit('package', pkg);\n    });\n    this._mdeps.on('transform', function (tr, file) {\n        pipeline.emit('transform', tr, file);\n        self.emit('transform', tr, file);\n    });\n    \n    var dopts = {\n        index: !opts.fullPaths && !opts.exposeAll,\n        dedupe: true,\n        expose: this._expose\n    };\n    this._bpack = bpack(xtend(opts, { raw: true }));\n    \n    var pipeline = splicer.obj([\n        'record', [ this._recorder() ],\n        'deps', [ this._mdeps ],\n        'json', [ this._json() ],\n        'unbom', [ this._unbom() ],\n        'unshebang', [ this._unshebang() ],\n        'syntax', [ this._syntax() ],\n        'sort', [ depsSort(dopts) ],\n        'dedupe', [ this._dedupe() ],\n        'label', [ this._label(opts) ],\n        'emit-deps', [ this._emitDeps() ],\n        'debug', [ this._debug(opts) ],\n        'pack', [ this._bpack ],\n        'wrap', []\n    ]);\n    if (opts.exposeAll) {\n        var basedir = defined(opts.basedir, process.cwd());\n        pipeline.get('deps').push(through.obj(function (row, enc, next) {\n            if (self._external.indexOf(row.id) >= 0) return next();\n            if (self._external.indexOf(row.file) >= 0) return next();\n            \n            if (isAbsolutePath(row.id)) {\n                row.id = '/' + path.relative(basedir, row.file);\n            }\n            Object.keys(row.deps || {}).forEach(function (key) {\n                row.deps[key] = '/' + path.relative(basedir, row.deps[key]);\n            });\n            this.push(row);\n            next();\n        }));\n    }\n    return pipeline;\n};\n\nBrowserify.prototype._createDeps = function (opts) {\n    var self = this;\n    var mopts = xtend(opts);\n    var basedir = defined(opts.basedir, process.cwd());\n\n    // Let mdeps populate these values since it will be resolving file paths\n    // anyway.\n    mopts.expose = this._expose;\n    mopts.extensions = [ '.js', '.json' ].concat(mopts.extensions || []);\n    self._extensions = mopts.extensions;\n\n    mopts.transform = [];\n    mopts.transformKey = [ 'browserify', 'transform' ];\n    mopts.postFilter = function (id, file, pkg) {\n        if (opts.postFilter && !opts.postFilter(id, file, pkg)) return false;\n        if (self._external.indexOf(file) >= 0) return false;\n        if (self._exclude.indexOf(file) >= 0) return false;\n\n        //filter transforms on module dependencies\n        if (pkg && pkg.browserify && pkg.browserify.transform) {\n            //In edge cases it may be a string\n            pkg.browserify.transform = [].concat(pkg.browserify.transform)\n                    .filter(Boolean)\n                    .filter(self._filterTransform);\n        }\n        return true;\n    };\n    mopts.filter = function (id) {\n        if (opts.filter && !opts.filter(id)) return false;\n        if (self._external.indexOf(id) >= 0) return false;\n        if (self._exclude.indexOf(id) >= 0) return false;\n        if (opts.bundleExternal === false && isExternalModule(id)) {\n            return false;\n        }\n        return true;\n    };\n    mopts.resolve = function (id, parent, cb) {\n        if (self._ignore.indexOf(id) >= 0) return cb(null, paths.empty, {});\n        \n        self._bresolve(id, parent, function (err, file, pkg) {\n            if (file && self._ignore.indexOf(file) >= 0) {\n                return cb(null, paths.empty, {});\n            }\n            if (file && self._ignore.length) {\n                var nm = file.split('/node_modules/')[1];\n                if (nm) {\n                    nm = nm.split('/')[0];\n                    if (self._ignore.indexOf(nm) >= 0) {\n                        return cb(null, paths.empty, {});\n                    }\n                }\n            }\n            \n            if (file) {\n                var ex = '/' + path.relative(basedir, file);\n                if (self._external.indexOf(ex) >= 0) {\n                    return cb(null, ex);\n                }\n                if (self._exclude.indexOf(ex) >= 0) {\n                    return cb(null, ex);\n                }\n                if (self._ignore.indexOf(ex) >= 0) {\n                    return cb(null, paths.empty, {});\n                }\n            }\n            if (err) cb(err, file, pkg)\n            else if (file) fs.realpath(file, function (err, res) {\n                cb(err, res, pkg, file);\n            });\n            else cb(err, null, pkg)\n        });\n    };\n    \n    if (opts.builtins === false) {\n        mopts.modules = {};\n        self._exclude.push.apply(self._exclude, Object.keys(builtins));\n    }\n    else if (opts.builtins && isarray(opts.builtins)) {\n        mopts.modules = {};\n        opts.builtins.forEach(function (key) {\n            mopts.modules[key] = builtins[key];\n        });\n    }\n    else if (opts.builtins && typeof opts.builtins === 'object') {\n        mopts.modules = opts.builtins;\n    }\n    else mopts.modules = xtend(builtins);\n    \n    Object.keys(builtins).forEach(function (key) {\n        if (!has(mopts.modules, key)) self._exclude.push(key);\n    });\n    \n    mopts.globalTransform = [];\n    if (!this._bundled) {\n        this.once('bundle', function () {\n            self.pipeline.write({\n                transform: globalTr,\n                global: true,\n                options: {}\n            });\n        });\n    }\n    \n    var no = [].concat(opts.noParse).filter(Boolean);\n    var absno = no.filter(function(x) {\n        return typeof x === 'string';\n    }).map(function (x) {\n        return path.resolve(basedir, x);\n    });\n    \n    function globalTr (file) {\n        if (opts.detectGlobals === false) return through();\n        \n        if (opts.noParse === true) return through();\n        if (no.indexOf(file) >= 0) return through();\n        if (absno.indexOf(file) >= 0) return through();\n        \n        var parts = file.split('/node_modules/');\n        for (var i = 0; i < no.length; i++) {\n            if (typeof no[i] === 'function' && no[i](file)) {\n                return through();\n            }\n            else if (no[i] === parts[parts.length-1].split('/')[0]) {\n                return through();\n            }\n            else if (no[i] === parts[parts.length-1]) {\n                return through();\n            }\n        }\n        \n        var vars = xtend({\n            process: function () { return \"require('_process')\" },\n        }, opts.insertGlobalVars);\n        \n        if (opts.bundleExternal === false) {\n            vars.process = undefined;\n            vars.buffer = undefined;\n        }\n        \n        return insertGlobals(file, xtend(opts, {\n            debug: opts.debug,\n            always: opts.insertGlobals,\n            basedir: opts.commondir === false\n                ? '/'\n                : opts.basedir || process.cwd()\n            ,\n            vars: vars\n        }));\n    }\n    return mdeps(mopts);\n};\n\nBrowserify.prototype._recorder = function (opts) {\n    var self = this;\n    var ended = false;\n    this._recorded = [];\n    \n    if (!this._ticked) {\n        process.nextTick(function () {\n            self._ticked = true;\n            self._recorded.forEach(function (row) {\n                stream.push(row);\n            });\n            if (ended) stream.push(null);\n        });\n    }\n    \n    var stream = through.obj(write, end);\n    return stream;\n    \n    function write (row, enc, next) {\n        self._recorded.push(row);\n        if (self._ticked) this.push(row);\n        next();\n    }\n    function end () {\n        ended = true;\n        if (self._ticked) this.push(null);\n    }\n};\n\nBrowserify.prototype._json = function () {\n    return through.obj(function (row, enc, next) {\n        if (/\\.json$/.test(row.file)) {\n            row.source = 'module.exports=' + sanitize(row.source);\n        }\n        this.push(row);\n        next();\n    });\n};\n\nBrowserify.prototype._unbom = function () {\n    return through.obj(function (row, enc, next) {\n        if (/^\\ufeff/.test(row.source)) {\n            row.source = row.source.replace(/^\\ufeff/, '');\n        }\n        this.push(row);\n        next();\n    });\n};\n\nBrowserify.prototype._unshebang = function () {\n    return through.obj(function (row, enc, next) {\n        if (/^#!/.test(row.source)) {\n            row.source = row.source.replace(/^#![^\\n]*\\n/, '');\n        }\n        this.push(row);\n        next();\n    });\n};\n\nBrowserify.prototype._syntax = function () {\n    var self = this;\n    return through.obj(function (row, enc, next) {\n        var h = shasum(row.source);\n        if (typeof self._syntaxCache[h] === 'undefined') {\n            var err = syntaxError(row.source, row.file || row.id);\n            if (err) return this.emit('error', err);\n            self._syntaxCache[h] = true;\n        }\n        this.push(row);\n        next();\n    });\n};\n\nBrowserify.prototype._dedupe = function () {\n    return through.obj(function (row, enc, next) {\n        if (!row.dedupeIndex && row.dedupe) {\n            row.source = 'arguments[4]['\n                + JSON.stringify(row.dedupe)\n                + '][0].apply(exports,arguments)'\n            ;\n            row.nomap = true;\n        }\n        else if (row.dedupeIndex) {\n            row.source = 'arguments[4]['\n                + JSON.stringify(row.dedupeIndex)\n                + '][0].apply(exports,arguments)'\n            ;\n            row.nomap = true;\n        }\n        if (row.dedupeIndex && row.indexDeps) {\n            row.indexDeps.dup = row.dedupeIndex;\n        }\n        this.push(row);\n        next();\n    });\n};\n\nBrowserify.prototype._label = function (opts) {\n    var self = this;\n    var basedir = defined(opts.basedir, process.cwd());\n    \n    return through.obj(function (row, enc, next) {\n        var prev = row.id;\n\n        if (self._external.indexOf(row.id) >= 0) return next();\n        if (self._external.indexOf('/' + path.relative(basedir, row.id)) >= 0) {\n            return next();\n        }\n        if (self._external.indexOf(row.file) >= 0) return next();\n        \n        if (row.index) row.id = row.index;\n        \n        self.emit('label', prev, row.id);\n        if (row.indexDeps) row.deps = row.indexDeps || {};\n        \n        Object.keys(row.deps).forEach(function (key) {\n            if (self._expose[key]) {\n                row.deps[key] = key;\n                return;\n            }\n\n            var afile = path.resolve(path.dirname(row.file), key);\n            var rfile = '/' + path.relative(basedir, afile);\n            if (self._external.indexOf(rfile) >= 0) {\n                row.deps[key] = rfile;\n            }\n            if (self._external.indexOf(afile) >= 0) {\n                row.deps[key] = rfile;\n            }\n            if (self._external.indexOf(key) >= 0) {\n                row.deps[key] = key;\n                return;\n            }\n            \n            for (var i = 0; i < self._extensions.length; i++) {\n                var ex = self._extensions[i];\n                if (self._external.indexOf(rfile + ex) >= 0) {\n                    row.deps[key] = rfile + ex;\n                    break;\n                }\n            }\n        });\n        \n        if (row.entry || row.expose) {\n            self._bpack.standaloneModule = row.id;\n        }\n        this.push(row);\n        next();\n    });\n};\n\nBrowserify.prototype._emitDeps = function () {\n    var self = this;\n    return through.obj(function (row, enc, next) {\n        self.emit('dep', row);\n        this.push(row);\n        next();\n    })\n};\n\nBrowserify.prototype._debug = function (opts) {\n    var basedir = defined(opts.basedir, process.cwd());\n    return through.obj(function (row, enc, next) {\n        if (opts.debug) {\n            row.sourceRoot = 'file://localhost';\n            row.sourceFile = path.relative(basedir, row.file)\n                .replace(/\\\\/g, '/');\n        }\n        this.push(row);\n        next();\n    });\n};\n\nBrowserify.prototype.reset = function (opts) {\n    if (!opts) opts = {};\n    var hadExports = this._bpack.hasExports;\n    this.pipeline = this._createPipeline(xtend(opts, this._options));\n    this._bpack.hasExports = hadExports;\n    this._entryOrder = 0;\n    this._bundled = false;\n    this.emit('reset');\n};\n\nBrowserify.prototype.bundle = function (cb) {\n    var self = this;\n    if (cb && typeof cb === 'object') {\n        throw new Error(\n            'bundle() no longer accepts option arguments.\\n'\n            + 'Move all option arguments to the browserify() constructor.'\n        );\n    }\n    if (this._bundled) {\n        var recorded = this._recorded;\n        this.reset();\n        recorded.forEach(function (x) {\n            self.pipeline.write(x);\n        });\n    }\n    var output = readonly(this.pipeline);\n    if (cb) {\n        output.on('error', cb);\n        output.pipe(concat(function (body) {\n            cb(null, body);\n        }));\n    }\n\n    function ready () {\n        self.emit('bundle', output);\n        self.pipeline.end();\n    }\n\n    if (this._pending === 0) ready();\n    else this.once('_ready', ready);\n\n    this._bundled = true;\n    return output;\n};\n\nfunction isStream (s) { return s && typeof s.pipe === 'function' }\nfunction isAbsolutePath (file) {\n    var regexp = process.platform === 'win32' ?\n        /^\\w:/ :\n        /^\\//;\n    return regexp.test(file);\n}\nfunction isExternalModule (file) {\n    var regexp = process.platform === 'win32' ?\n        /^(\\.|\\w:)/ :\n        /^[\\/.]/;\n    return !regexp.test(file);\n}\n"]},"metadata":{},"sourceType":"script"}