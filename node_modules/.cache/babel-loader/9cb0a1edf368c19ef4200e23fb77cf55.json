{"ast":null,"code":"var fs = require(\"fs\"),\n    url = require('url'),\n    path = require('path'),\n    tmp = require('./tmp'),\n    _ = require(\"lodash\"),\n    async = require('async'),\n    __slice = Array.prototype.slice,\n    config = require('./config'),\n    callbacks = require(\"./callbacks\"),\n    callbackWithData = callbacks.callbackWithData,\n    simpleCallback = callbacks.simpleCallback,\n    elementCallback = callbacks.elementCallback,\n    elementsCallback = callbacks.elementsCallback,\n    elementOrElementsCallback = callbacks.elementOrElementsCallback,\n    utils = require(\"./utils\"),\n    findCallback = utils.findCallback,\n    codeToString = utils.codeToString,\n    deprecator = utils.deprecator,\n    asserters = require(\"./asserters\"),\n    Asserter = asserters.Asserter,\n    safeExecuteJsScript = require('../build/safe-execute'),\n    safeExecuteAsyncJsScript = require('../build/safe-execute-async'),\n    _waitForConditionInBrowserJsScript = require('../build/wait-for-cond-in-browser');\n\nvar commands = {};\n/**\n * init(desired, cb) -> cb(err, sessionID, capabilities)\n * Initialize the browser. capabilities return may be\n * absent, depending on driver.\n *\n * @jsonWire POST /session\n */\n\ncommands.init = function () {\n  var args = __slice.call(arguments, 0);\n\n  this._init.apply(this, args);\n};\n/**\n * status(cb) -> cb(err, status)\n *\n * @jsonWire GET /status\n */\n\n\ncommands.status = function () {\n  var cb = findCallback(arguments);\n\n  this._jsonWireCall({\n    method: 'GET',\n    absPath: 'status',\n    cb: callbackWithData(cb, this)\n  });\n};\n/**\n * sessions(cb) -> cb(err, sessions)\n *\n * @jsonWire GET /sessions\n */\n\n\ncommands.sessions = function () {\n  var cb = findCallback(arguments);\n\n  this._jsonWireCall({\n    method: 'GET',\n    absPath: 'sessions',\n    cb: callbackWithData(cb, this)\n  });\n};\n/**\n * Retrieves the current session id.\n * getSessionId(cb) -> cb(err, sessionId)\n * getSessionId()\n */\n\n\ncommands.getSessionId = function () {\n  var cb = findCallback(arguments);\n\n  if (cb) {\n    cb(null, this.sessionID);\n  }\n\n  return this.sessionID;\n};\n\ncommands.getSessionID = commands.getSessionId;\n/**\n * execute(code, args, cb) -> cb(err, result)\n * execute(code, cb) -> cb(err, result)\n * args: script argument array (optional)\n *\n * @jsonWire POST /session/:sessionId/execute\n * @docOrder 1\n */\n\ncommands.execute = function () {\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback,\n      code = fargs.all[0],\n      args = fargs.all[1] || [];\n  code = codeToString(code);\n\n  this._jsonWireCall({\n    method: 'POST',\n    relPath: '/execute',\n    cb: callbackWithData(cb, this),\n    data: {\n      script: code,\n      args: args\n    }\n  });\n};\n/**\n * Safely execute script within an eval block, always returning:\n * safeExecute(code, args, cb) -> cb(err, result)\n * safeExecute(code, cb) -> cb(err, result)\n * args: script argument array (optional)\n *\n * @jsonWire POST /session/:sessionId/execute\n * @docOrder 2\n */\n\n\ncommands.safeExecute = function () {\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback,\n      code = fargs.all[0],\n      args = fargs.all[1] || [];\n  code = codeToString(code);\n\n  this._jsonWireCall({\n    method: 'POST',\n    relPath: '/execute',\n    cb: callbackWithData(cb, this),\n    data: {\n      script: safeExecuteJsScript,\n      args: [code, args]\n    }\n  });\n};\n/**\n * Evaluate expression (using execute):\n * eval(code, cb) -> cb(err, value)\n *\n * @jsonWire POST /session/:sessionId/execute\n */\n\n\n(function () {\n  commands.eval = function (code) {\n    var cb = findCallback(arguments);\n    code = codeToString(code);\n    code = \"return \" + code + \";\";\n    commands.execute.apply(this, [code, function (err, res) {\n      if (err) {\n        return cb(err);\n      }\n\n      cb(null, res);\n    }]);\n  };\n})();\n/**\n * Safely evaluate expression, always returning  (using safeExecute):\n * safeEval(code, cb) -> cb(err, value)\n *\n * @jsonWire POST /session/:sessionId/execute\n */\n\n\ncommands.safeEval = function (code) {\n  var cb = findCallback(arguments);\n  code = codeToString(code);\n  commands.safeExecute.apply(this, [code, function (err, res) {\n    if (err) {\n      return cb(err);\n    }\n\n    cb(null, res);\n  }]);\n};\n/**\n * executeAsync(code, args, cb) -> cb(err, result)\n * executeAsync(code, cb) -> cb(err, result)\n * args: script argument array (optional)\n *\n * @jsonWire POST /session/:sessionId/execute_async\n */\n\n\ncommands.executeAsync = function () {\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback,\n      code = fargs.all[0],\n      args = fargs.all[1] || [];\n  code = codeToString(code);\n\n  this._jsonWireCall({\n    method: 'POST',\n    relPath: '/execute_async',\n    cb: callbackWithData(cb, this),\n    data: {\n      script: code,\n      args: args\n    }\n  });\n};\n/**\n * Safely execute async script within an eval block, always returning:\n * safeExecuteAsync(code, args, cb) -> cb(err, result)\n * safeExecuteAsync(code, cb) -> cb(err, result)\n * args: script argument array (optional)\n *\n * @jsonWire POST /session/:sessionId/execute_async\n */\n\n\ncommands.safeExecuteAsync = function () {\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback,\n      code = fargs.all[0],\n      args = fargs.all[1] || [];\n  code = codeToString(code);\n\n  this._jsonWireCall({\n    method: 'POST',\n    relPath: '/execute_async',\n    cb: callbackWithData(cb, this),\n    data: {\n      script: safeExecuteAsyncJsScript,\n      args: [code, args]\n    }\n  });\n};\n/**\n * Alternate strategy to get session capabilities from server session list:\n * altSessionCapabilities(cb) -> cb(err, capabilities)\n *\n * @jsonWire GET /sessions\n */\n\n\ncommands.altSessionCapabilities = function () {\n  var cb = findCallback(arguments);\n\n  var _this = this; // looking for the current session\n\n\n  commands.sessions.apply(this, [function (err, sessions) {\n    if (err) {\n      cb(err, sessions);\n    } else {\n      sessions = sessions.filter(function (session) {\n        return session.id === _this.sessionID;\n      });\n      cb(null, sessions[0] ? sessions[0].capabilities : 0);\n    }\n  }]);\n};\n/**\n * sessionCapabilities(cb) -> cb(err, capabilities)\n *\n * @jsonWire GET /session/:sessionId\n */\n\n\ncommands.sessionCapabilities = function () {\n  var cb = findCallback(arguments);\n\n  this._jsonWireCall({\n    method: 'GET' // default url\n    ,\n    cb: callbackWithData(cb, this)\n  });\n};\n/**\n * Opens a new window (using Javascript window.open):\n * newWindow(url, name, cb) -> cb(err)\n * newWindow(url, cb) -> cb(err)\n * name: optional window name\n * Window can later be accessed by name with the window method,\n * or by getting the last handle returned by the windowHandles method.\n */\n\n\ncommands.newWindow = function () {\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback,\n      url = fargs.all[0],\n      name = fargs.all[1];\n  commands.execute.apply(this, [\"var url=arguments[0], name=arguments[1]; window.open(url, name);\", [url, name], cb]);\n};\n/**\n * close(cb) -> cb(err)\n *\n * @jsonWire DELETE /session/:sessionId/window\n */\n\n\ncommands.close = function () {\n  var cb = findCallback(arguments);\n\n  this._jsonWireCall({\n    method: 'DELETE',\n    relPath: '/window',\n    cb: simpleCallback(cb)\n  });\n};\n/**\n * currentContext(cb) -> cb(err)\n *\n * @jsonWire GET /session/:sessionId/context\n */\n\n\ncommands.currentContext = function () {\n  var cb = findCallback(arguments);\n\n  this._jsonWireCall({\n    method: 'GET',\n    relPath: '/context',\n    cb: callbackWithData(cb, this)\n  });\n};\n/**\n * context(contextRef, cb) -> cb(err, context)\n *\n * @jsonWire POST /session/:sessionId/context\n */\n\n\ncommands.context = function (contextRef) {\n  var cb = findCallback(arguments);\n\n  this._jsonWireCall({\n    method: 'POST',\n    relPath: '/context',\n    cb: simpleCallback(cb),\n    data: {\n      name: contextRef\n    }\n  });\n};\n/**\n * contexts(cb) -> cb(err, handle)\n *\n * @jsonWire GET /session/:sessionId/contexts\n */\n\n\ncommands.contexts = function () {\n  var cb = findCallback(arguments);\n\n  this._jsonWireCall({\n    method: 'GET',\n    relPath: '/contexts',\n    cb: callbackWithData(cb, this)\n  });\n};\n/**\n * window(name, cb) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/window\n */\n\n\ncommands.window = function (windowRef) {\n  var cb = findCallback(arguments);\n\n  this._jsonWireCall({\n    method: 'POST',\n    relPath: '/window',\n    cb: simpleCallback(cb),\n    data: {\n      name: windowRef\n    }\n  });\n};\n/**\n * frame(frameRef, cb) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/frame\n */\n\n\ncommands.frame = function (frameRef) {\n  var cb = findCallback(arguments); // avoid using this, Webdriver seems very buggy\n  // doesn't work at all with chromedriver\n\n  if (typeof frameRef === 'function') {\n    frameRef = null;\n  }\n\n  if (frameRef !== null && typeof frameRef.value !== \"undefined\") {\n    // we have an element object\n    frameRef = {\n      ELEMENT: frameRef.value\n    };\n    frameRef[utils.w3cElementKeyId] = frameRef.value;\n  }\n\n  this._jsonWireCall({\n    method: 'POST',\n    relPath: '/frame',\n    cb: simpleCallback(cb),\n    data: {\n      id: frameRef\n    }\n  });\n};\n/**\n * windowName(cb) -> cb(err, name)\n */\n\n\ncommands.windowName = function () {\n  var cb = findCallback(arguments);\n  commands.eval.apply(this, [\"window.name\", cb]);\n};\n/**\n * windowHandle(cb) -> cb(err, handle)\n *\n * @jsonWire GET /session/:sessionId/window_handle\n */\n\n\ncommands.windowHandle = function () {\n  var cb = findCallback(arguments);\n\n  this._jsonWireCall({\n    method: 'GET',\n    relPath: '/window_handle',\n    cb: callbackWithData(cb, this)\n  });\n};\n/**\n * windowHandles(cb) -> cb(err, arrayOfHandles)\n *\n * @jsonWire GET /session/:sessionId/window_handles\n */\n\n\ncommands.windowHandles = function () {\n  var cb = findCallback(arguments);\n\n  this._jsonWireCall({\n    method: 'GET',\n    relPath: '/window_handles',\n    cb: callbackWithData(cb, this)\n  });\n};\n/**\n * getGeoLocation(cb) -> cb(err, geoLocationObj)\n *\n * @jsonWire GET /session/:sessionId/location\n */\n\n\ncommands.getGeoLocation = function () {\n  var cb = findCallback(arguments);\n\n  this._jsonWireCall({\n    method: 'GET',\n    relPath: '/location',\n    cb: callbackWithData(cb, this)\n  });\n};\n/**\n * setGeoLocation(lat, lon, alt, cb) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/location\n */\n\n\ncommands.setGeoLocation = function (lat, lon, alt) {\n  var cb = findCallback(arguments);\n\n  if (typeof alt === 'function') {\n    alt = 0;\n  }\n\n  this._jsonWireCall({\n    method: 'POST',\n    relPath: '/location',\n    cb: simpleCallback(cb),\n    data: {\n      location: {\n        latitude: lat,\n        longitude: lon,\n        altitude: alt\n      }\n    }\n  });\n};\n/**\n * scroll(xOffset, yOffset, cb) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/touch/scroll\n */\n\n\ncommands.scroll = function (xOffset, yOffset) {\n  var cb = findCallback(arguments);\n\n  this._jsonWireCall({\n    method: 'POST',\n    relPath: '/touch/scroll',\n    cb: simpleCallback(cb, this),\n    data: {\n      xoffset: xOffset,\n      yoffset: yOffset\n    }\n  });\n};\n/**\n * logTypes(cb) -> cb(err, arrayOfLogTypes)\n *\n * @jsonWire GET /session/:sessionId/log/types\n */\n\n\ncommands.logTypes = function () {\n  var cb = findCallback(arguments);\n\n  this._jsonWireCall({\n    method: 'GET',\n    relPath: '/log/types',\n    cb: callbackWithData(cb, this)\n  });\n};\n/**\n * log(logType, cb) -> cb(err, arrayOfLogs)\n *\n * @jsonWire POST /session/:sessionId/log\n */\n\n\ncommands.log = function (logType) {\n  var cb = findCallback(arguments);\n\n  this._jsonWireCall({\n    method: 'POST',\n    relPath: '/log',\n    cb: callbackWithData(cb, this),\n    data: {\n      type: logType\n    }\n  });\n};\n/**\n * quit(cb) -> cb(err)\n * Destroy the browser.\n *\n * @jsonWire DELETE /session/:sessionId\n */\n\n\ncommands.quit = function () {\n  var cb = findCallback(arguments);\n\n  this._jsonWireCall({\n    method: 'DELETE' // default url\n    ,\n    emit: {\n      event: 'status',\n      message: '\\nEnding your web drivage..\\n'\n    },\n    cb: simpleCallback(cb)\n  });\n};\n/**\n * get(url,cb) -> cb(err)\n * Get a new url.\n *\n * @jsonWire POST /session/:sessionId/url\n */\n\n\ncommands.get = function (_url) {\n  if (this._httpConfig.baseUrl) {\n    _url = url.resolve(this._httpConfig.baseUrl, _url);\n  }\n\n  var cb = findCallback(arguments);\n\n  this._jsonWireCall({\n    method: 'POST',\n    relPath: '/url',\n    data: {\n      'url': _url\n    },\n    cb: simpleCallback(cb)\n  });\n};\n/**\n * refresh(cb) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/refresh\n */\n\n\ncommands.refresh = function () {\n  var cb = findCallback(arguments);\n\n  this._jsonWireCall({\n    method: 'POST',\n    relPath: '/refresh',\n    cb: simpleCallback(cb)\n  });\n};\n/**\n  * maximize(handle, cb) -> cb(err)\n  *\n  * @jsonWire POST /session/:sessionId/window/:windowHandle/maximize\n */\n\n\ncommands.maximize = function (win) {\n  var cb = findCallback(arguments);\n\n  this._jsonWireCall({\n    method: 'POST',\n    relPath: '/window/' + win + '/maximize',\n    cb: simpleCallback(cb)\n  });\n};\n/**\n  * windowSize(handle, width, height, cb) -> cb(err)\n  *\n  * @jsonWire POST /session/:sessionId/window/:windowHandle/size\n */\n\n\ncommands.windowSize = function (win, width, height) {\n  var cb = findCallback(arguments);\n\n  this._jsonWireCall({\n    method: 'POST',\n    relPath: '/window/' + win + '/size',\n    data: {\n      'width': width,\n      'height': height\n    },\n    cb: simpleCallback(cb)\n  });\n};\n/**\n  * getWindowSize(handle, cb) -> cb(err, size)\n  * getWindowSize(cb) -> cb(err, size)\n  * handle: window handle to get size (optional, default: 'current')\n  *\n  * @jsonWire GET /session/:sessionId/window/:windowHandle/size\n */\n\n\ncommands.getWindowSize = function () {\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback,\n      win = fargs.all[0] || 'current';\n\n  this._jsonWireCall({\n    method: 'GET',\n    relPath: '/window/' + win + '/size',\n    cb: callbackWithData(cb, this)\n  });\n};\n/**\n  * setWindowSize(width, height, handle, cb) -> cb(err)\n  * setWindowSize(width, height, cb) -> cb(err)\n  * width: width in pixels to set size to\n  * height: height in pixels to set size to\n  * handle: window handle to set size for (optional, default: 'current')\n  * @jsonWire POST /session/:sessionId/window/:windowHandle/size\n */\n\n\ncommands.setWindowSize = function () {\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback,\n      width = fargs.all[0],\n      height = fargs.all[1],\n      win = fargs.all[2] || 'current';\n\n  this._jsonWireCall({\n    method: 'POST',\n    relPath: '/window/' + win + '/size',\n    cb: simpleCallback(cb),\n    data: {\n      width: width,\n      height: height\n    }\n  });\n};\n/**\n  * getWindowPosition(handle, cb) -> cb(err, position)\n  * getWindowPosition(cb) -> cb(err, position)\n  * handle: window handle to get position (optional, default: 'current')\n  *\n  * @jsonWire GET /session/:sessionId/window/:windowHandle/position\n */\n\n\ncommands.getWindowPosition = function () {\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback,\n      win = fargs.all[0] || 'current';\n\n  this._jsonWireCall({\n    method: 'GET',\n    relPath: '/window/' + win + '/position',\n    cb: callbackWithData(cb, this)\n  });\n};\n/**\n  * setWindowPosition(x, y, handle, cb) -> cb(err)\n  * setWindowPosition(x, y, cb) -> cb(err)\n  * x: the x-coordinate in pixels to set the window position\n  * y: the y-coordinate in pixels to set the window position\n  * handle: window handle to set position for (optional, default: 'current')\n  * @jsonWire POST /session/:sessionId/window/:windowHandle/position\n */\n\n\ncommands.setWindowPosition = function () {\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback,\n      x = fargs.all[0],\n      y = fargs.all[1],\n      win = fargs.all[2] || 'current';\n\n  this._jsonWireCall({\n    method: 'POST',\n    relPath: '/window/' + win + '/position',\n    cb: simpleCallback(cb),\n    data: {\n      x: x,\n      y: y\n    }\n  });\n};\n/**\n * forward(cb) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/forward\n */\n\n\ncommands.forward = function () {\n  var cb = findCallback(arguments);\n\n  this._jsonWireCall({\n    method: 'POST',\n    relPath: '/forward',\n    cb: simpleCallback(cb)\n  });\n};\n/**\n * back(cb) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/back\n */\n\n\ncommands.back = function () {\n  var cb = findCallback(arguments);\n\n  this._jsonWireCall({\n    method: 'POST',\n    relPath: '/back',\n    cb: simpleCallback(cb)\n  });\n};\n\ncommands.setHttpTimeout = function () {\n  deprecator.warn('setHttpTimeout', 'setHttpTimeout/setHTTPInactivityTimeout has been deprecated, use configureHttp instead.');\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback,\n      ms = fargs.all[0];\n  commands.configureHttp({\n    timeout: ms\n  }, cb);\n};\n\ncommands.setHTTPInactivityTimeout = commands.setHttpTimeout;\n/**\n * configureHttp(opts)\n *\n * opts example:\n * {timeout:60000, retries: 3, 'retryDelay': 15, baseUrl='http://example.com/'}\n * more info in README.\n *\n */\n\ncommands.configureHttp = function () {\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback,\n      opts = fargs.all[0];\n\n  config._configureHttp(this._httpConfig, opts);\n\n  if (cb) {\n    cb(null);\n  }\n};\n/**\n * setImplicitWaitTimeout(ms, cb) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/timeouts/implicit_wait\n */\n\n\ncommands.setImplicitWaitTimeout = function (ms) {\n  var cb = findCallback(arguments);\n\n  this._jsonWireCall({\n    method: 'POST',\n    relPath: '/timeouts/implicit_wait',\n    data: {\n      ms: ms\n    },\n    cb: simpleCallback(cb)\n  });\n}; // for backward compatibility\n\n\ncommands.setWaitTimeout = commands.setImplicitWaitTimeout;\n/**\n * setAsyncScriptTimeout(ms, cb) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/timeouts/async_script\n */\n\ncommands.setAsyncScriptTimeout = function (ms) {\n  var cb = findCallback(arguments);\n\n  this._jsonWireCall({\n    method: 'POST',\n    relPath: '/timeouts/async_script',\n    data: {\n      ms: ms\n    },\n    cb: simpleCallback(cb)\n  });\n};\n/**\n * setPageLoadTimeout(ms, cb) -> cb(err)\n * (use setImplicitWaitTimeout and setAsyncScriptTimeout to set the other timeouts)\n *\n * @jsonWire POST /session/:sessionId/timeouts\n */\n\n\ncommands.setPageLoadTimeout = function (ms) {\n  var cb = findCallback(arguments);\n\n  this._jsonWireCall({\n    method: 'POST',\n    relPath: '/timeouts',\n    data: {\n      type: 'page load',\n      ms: ms\n    },\n    cb: simpleCallback(cb)\n  });\n};\n/**\n * setCommandTimeout(ms, cb) -> cb(err)\n * (this is for Appium only)\n * @jsonWire POST /session/:sessionId/timeouts\n */\n\n\ncommands.setCommandTimeout = function (ms) {\n  var cb = findCallback(arguments);\n\n  this._jsonWireCall({\n    method: 'POST',\n    relPath: '/timeouts',\n    data: {\n      type: 'command',\n      ms: ms\n    },\n    cb: simpleCallback(cb)\n  });\n};\n/**\n * element(using, value, cb) -> cb(err, element)\n *\n * @jsonWire POST /session/:sessionId/element\n */\n\n\ncommands.element = function (using, value) {\n  var cb = findCallback(arguments);\n\n  this._jsonWireCall({\n    method: 'POST',\n    relPath: '/element',\n    data: {\n      using: using,\n      value: value\n    },\n    cb: elementCallback(cb, this)\n  });\n};\n/**\n * Retrieve an element avoiding not found exception and returning null instead:\n * elementOrNull(using, value, cb) -> cb(err, element)\n *\n * @jsonWire POST /session/:sessionId/elements\n * @docOrder 3\n */\n\n\ncommands.elementOrNull = function (using, value) {\n  var cb = findCallback(arguments);\n  commands.elements.apply(this, [using, value, function (err, elements) {\n    if (!err) {\n      if (elements.length > 0) {\n        cb(null, elements[0]);\n      } else {\n        cb(null, null);\n      }\n    } else {\n      cb(err);\n    }\n  }]);\n};\n/**\n * Retrieve an element avoiding not found exception and returning undefined instead:\n * elementIfExists(using, value, cb) -> cb(err, element)\n *\n * @jsonWire POST /session/:sessionId/elements\n * @docOrder 5\n */\n\n\ncommands.elementIfExists = function (using, value) {\n  var cb = findCallback(arguments);\n  commands.elements.apply(this, [using, value, function (err, elements) {\n    if (!err) {\n      if (elements.length > 0) {\n        cb(null, elements[0]);\n      } else {\n        cb(null);\n      }\n    } else {\n      cb(err);\n    }\n  }]);\n};\n/**\n * elements(using, value, cb) -> cb(err, elements)\n *\n * @jsonWire POST /session/:sessionId/elements\n * @docOrder 1\n */\n\n\ncommands.elements = function (using, value) {\n  var cb = findCallback(arguments);\n\n  this._jsonWireCall({\n    method: 'POST',\n    relPath: '/elements',\n    data: {\n      using: using,\n      value: value\n    },\n    cb: elementsCallback(cb, this)\n  });\n};\n/**\n * Check if element exists:\n * hasElement(using, value, cb) -> cb(err, boolean)\n *\n * @jsonWire POST /session/:sessionId/elements\n * @docOrder 7\n */\n\n\ncommands.hasElement = function (using, value) {\n  var cb = findCallback(arguments);\n  commands.elements.apply(this, [using, value, function (err, elements) {\n    if (!err) {\n      cb(null, elements.length > 0);\n    } else {\n      cb(err);\n    }\n  }]);\n};\n/**\n * waitFor(asserter, timeout, pollFreq, cb) -> cb(err, return_value)\n * timeout and pollFreq are optional (default 1000ms/200ms)\n * waitFor(opts, cb) -> cb(err)\n * opts with the following fields: timeout, pollFreq, asserter.\n * asserter like: function(browser , cb) -> cb(err, satisfied, return_value)\n */\n\n\ncommands.waitFor = function () {\n  var cb = findCallback(arguments);\n  var fargs = utils.varargs(arguments);\n  var opts; // retrieving options\n\n  if (typeof fargs.all[0] === 'object' && !(fargs.all[0] instanceof Asserter)) {\n    opts = fargs.all[0];\n  } else {\n    opts = {\n      asserter: fargs.all[0],\n      timeout: fargs.all[1],\n      pollFreq: fargs.all[2]\n    };\n  } // default\n\n\n  opts.timeout = opts.timeout || 1000;\n  opts.pollFreq = opts.pollFreq || 200;\n\n  if (!opts.asserter) {\n    throw new Error('Missing asserter!');\n  }\n\n  var _this = this;\n\n  var endTime = Date.now() + opts.timeout;\n  var unpromisedAsserter = new Asserter(function (browser, cb) {\n    var promise = opts.asserter.assert(browser, cb);\n\n    if (promise && promise.then && typeof promise.then === 'function') {\n      promise.then(function (res) {\n        cb(null, true, res);\n      }, function (err) {\n        if (err.retriable) {\n          cb(null, false);\n        } else {\n          throw err;\n        }\n      });\n    }\n  });\n\n  function poll(isFinalCheck) {\n    unpromisedAsserter.assert(_this, function (err, satisfied, value) {\n      if (err && err.message.indexOf(\"timeout\") === -1) {\n        return cb(err);\n      }\n\n      if (satisfied) {\n        cb(null, value);\n      } else {\n        if (isFinalCheck) {\n          cb(err || new Error(\"Condition wasn't satisfied!\"));\n        } else if (Date.now() > endTime) {\n          // trying one more time for safety\n          setTimeout(poll.bind(null, true), opts.pollFreq);\n        } else {\n          setTimeout(poll, opts.pollFreq);\n        }\n      }\n    });\n  }\n\n  poll();\n};\n/**\n * waitForElement(using, value, asserter, timeout, pollFreq, cb) -> cb(err, el)\n * waitForElement(using, value, timeout, pollFreq, cb) -> cb(err, el)\n * timeout and pollFreq are optional (default 1000ms/200ms)\n * waitForElement(using, value, opts, cb) -> cb(err, el)\n * opts with the following fields: timeout, pollFreq, asserter.\n * asserter like: function(element , cb) -> cb(err, satisfied, el)\n */\n\n\ncommands.waitForElement = function () {\n  var cb = findCallback(arguments);\n  var fargs = utils.varargs(arguments);\n  var using = fargs.all[0],\n      value = fargs.all[1];\n  var opts; // retrieving options\n\n  if (typeof fargs.all[2] === 'object' && !(fargs.all[2] instanceof Asserter)) {\n    opts = fargs.all[2];\n  } else if (fargs.all[2] instanceof Asserter) {\n    opts = {\n      asserter: fargs.all[2],\n      timeout: fargs.all[3],\n      pollFreq: fargs.all[4]\n    };\n  } else {\n    opts = {\n      timeout: fargs.all[2],\n      pollFreq: fargs.all[3]\n    };\n  } // default\n\n\n  opts.asserter = opts.asserter || new Asserter(function (el, cb) {\n    cb(null, true);\n  });\n  var unpromisedAsserter = new Asserter(function (el, cb) {\n    var promise = opts.asserter.assert(el, cb);\n\n    if (promise && promise.then && typeof promise.then === 'function') {\n      promise.then(function () {\n        cb(null, true);\n      }, function (err) {\n        if (err.retriable) {\n          cb(null, false);\n        } else {\n          throw err;\n        }\n      });\n    }\n  });\n  var wrappedAsserter = new Asserter(function (browser, cb) {\n    browser.elements(using, value, function (err, els) {\n      if (err) {\n        return cb(err);\n      }\n\n      var seq = [];\n      var satisfiedEl;\n\n      _(els).each(function (el) {\n        seq.push(function (cb) {\n          if (satisfiedEl) {\n            return cb();\n          }\n\n          unpromisedAsserter.assert(el, function (err, satisfied) {\n            if (err) {\n              return cb(err);\n            }\n\n            if (satisfied) {\n              satisfiedEl = el;\n            }\n\n            cb(err);\n          });\n        });\n      });\n\n      async.series(seq, function (err) {\n        if (err) {\n          return cb(err);\n        }\n\n        cb(err, !_.isUndefined(satisfiedEl), satisfiedEl);\n      });\n    });\n  });\n  commands.waitFor.apply(this, [{\n    asserter: wrappedAsserter,\n    timeout: opts.timeout,\n    pollFreq: opts.pollFreq\n  }, function (err, value) {\n    if (err && err.message && err.message.match(/Condition/)) {\n      cb(new Error(\"Element condition wasn't satisfied!\"));\n    } else {\n      cb(err, value);\n    }\n  }]);\n};\n/**\n * waitForElements(using, value, asserter, timeout, pollFreq, cb) -> cb(err, els)\n * waitForElements(using, value, timeout, pollFreq, cb) -> cb(err, els)\n * timeout and pollFreq are optional (default 1000ms/200ms)\n * waitForElements(using, value, opts, cb) -> cb(err, els)\n * opts with the following fields: timeout, pollFreq, asserter.\n * asserter like: function(element , cb) -> cb(err, satisfied, el)\n */\n\n\ncommands.waitForElements = function () {\n  var cb = findCallback(arguments);\n  var fargs = utils.varargs(arguments);\n  var using = fargs.all[0],\n      value = fargs.all[1];\n  var opts; // retrieving options\n\n  if (typeof fargs.all[2] === 'object' && !(fargs.all[2] instanceof Asserter)) {\n    opts = fargs.all[2];\n  } else if (fargs.all[2] instanceof Asserter) {\n    opts = {\n      asserter: fargs.all[2],\n      timeout: fargs.all[3],\n      pollFreq: fargs.all[4]\n    };\n  } else {\n    opts = {\n      timeout: fargs.all[2],\n      pollFreq: fargs.all[3]\n    };\n  } // default\n\n\n  opts.asserter = opts.asserter || new Asserter(function (el, cb) {\n    cb(null, true);\n  });\n  var unpromisedAsserter = new Asserter(function (el, cb) {\n    var promise = opts.asserter.assert(el, cb);\n\n    if (promise && promise.then && typeof promise.then === 'function') {\n      promise.then(function () {\n        cb(null, true);\n      }, function (err) {\n        if (err.retriable) {\n          cb(null, false);\n        } else {\n          cb(err);\n        }\n      });\n    }\n  });\n  var wrappedAsserter = new Asserter(function (browser, cb) {\n    browser.elements(using, value, function (err, els) {\n      if (err) {\n        return cb(err);\n      }\n\n      var seq = [];\n      var satisfiedEls = [];\n\n      _(els).each(function (el) {\n        seq.push(function (cb) {\n          unpromisedAsserter.assert(el, function (err, satisfied) {\n            if (err) {\n              return cb(err);\n            }\n\n            if (satisfied) {\n              satisfiedEls.push(el);\n            }\n\n            cb();\n          });\n        });\n      });\n\n      async.series(seq, function (err) {\n        if (err) {\n          return cb(err);\n        }\n\n        cb(null, satisfiedEls.length > 0, satisfiedEls);\n      });\n    });\n  });\n  commands.waitFor.apply(this, [{\n    asserter: wrappedAsserter,\n    timeout: opts.timeout,\n    pollFreq: opts.pollFreq\n  }, function (err, value) {\n    if (err && err.message && err.message.match(/Condition/)) {\n      cb(new Error(\"Element condition wasn't satisfied!\"));\n    } else {\n      cb(err, value);\n    }\n  }]);\n};\n\ncommands.waitForVisible = function (using, value, timeout, pollFreq) {\n  deprecator.warn('waitForVisible', 'waitForVisible has been deprecated, use waitForElement + isVisible asserter instead.');\n  var cb = findCallback(arguments);\n  commands.waitForElement.apply(this, [using, value, asserters.isVisible, timeout, pollFreq, function (err, isVisible) {\n    if (err && err.message && err.message.match(/Element condition wasn't satisfied!/)) {\n      cb(new Error(\"Element didn't become visible\"));\n    } else {\n      cb(err, isVisible);\n    }\n  }]);\n};\n/**\n * takeScreenshot(cb) -> cb(err, screenshot)\n *\n * @jsonWire GET /session/:sessionId/screenshot\n */\n\n\ncommands.takeScreenshot = function () {\n  var cb = findCallback(arguments);\n\n  this._jsonWireCall({\n    method: 'GET',\n    relPath: '/screenshot',\n    cb: callbackWithData(cb, this)\n  });\n};\n/**\n * saveScreenshot(path, cb) -> cb(err, filePath)\n *\n * path maybe a full file path, a directory path (finishing with /),\n * the screenshot name, or left blank (will create a file in the system temp dir).\n */\n\n\ncommands.saveScreenshot = function () {\n  var _this = this;\n\n  var cb = findCallback(arguments);\n  var fargs = utils.varargs(arguments);\n  var _path = fargs.all[0];\n\n  function buildFilePath(_path, cb) {\n    if (!_path) {\n      _path = tmp.tmpdir + '/';\n    }\n\n    if (_path.match(/.*\\/$/)) {\n      tmp.tmpName({\n        template: 'screenshot-XXXXXX.png'\n      }, function (err, fileName) {\n        if (err) {\n          return cb(err);\n        }\n\n        cb(null, path.join(_path, fileName));\n      });\n    } else {\n      if (path.extname(_path) === '') {\n        _path = _path + '.png';\n      }\n\n      cb(null, _path);\n    }\n  }\n\n  buildFilePath(_path, function (err, filePath) {\n    commands.takeScreenshot.apply(_this, [function (err, base64Data) {\n      if (err) {\n        return cb(err);\n      }\n\n      require(\"fs\").writeFile(filePath, base64Data, 'base64', function (err) {\n        if (err) {\n          return cb(err);\n        }\n\n        cb(null, filePath);\n      });\n    }]);\n  });\n}; // adding all elementBy... , elementsBy... function\n\n\nvar addMethodsForSuffix = function (type, singular, plural) {\n  if (singular) {\n    /**\n     * elementByClassName(value, cb) -> cb(err, element)\n     * elementByCssSelector(value, cb) -> cb(err, element)\n     * elementById(value, cb) -> cb(err, element)\n     * elementByName(value, cb) -> cb(err, element)\n     * elementByLinkText(value, cb) -> cb(err, element)\n     * elementByPartialLinkText(value, cb) -> cb(err, element)\n     * elementByTagName(value, cb) -> cb(err, element)\n     * elementByXPath(value, cb) -> cb(err, element)\n     * elementByCss(value, cb) -> cb(err, element)\n     * elementByIosUIAutomation(value, cb) -> cb(err, element)\n     * elementByIosClassChain(value, cb) -> cb(err, element)\n     * elementByIosPredicateString(value, cb) -> cb(err, element)\n     * elementByAndroidUIAutomator(value, cb) -> cb(err, element)\n     * elementByAccessibilityId(value, cb) -> cb(err, element)\n     *\n     * @jsonWire POST /session/:sessionId/element\n     */\n    commands['element' + utils.elFuncSuffix(type)] = function () {\n      var args = __slice.call(arguments, 0);\n\n      args.unshift(utils.elFuncFullType(type));\n      commands.element.apply(this, args);\n    };\n    /**\n     * elementByClassNameOrNull(value, cb) -> cb(err, element)\n     * elementByCssSelectorOrNull(value, cb) -> cb(err, element)\n     * elementByIdOrNull(value, cb) -> cb(err, element)\n     * elementByNameOrNull(value, cb) -> cb(err, element)\n     * elementByLinkTextOrNull(value, cb) -> cb(err, element)\n     * elementByPartialLinkTextOrNull(value, cb) -> cb(err, element)\n     * elementByTagNameOrNull(value, cb) -> cb(err, element)\n     * elementByXPathOrNull(value, cb) -> cb(err, element)\n     * elementByCssOrNull(value, cb) -> cb(err, element)\n     * elementByIosUIAutomationOrNull(value, cb) -> cb(err, element)\n     * elementByIosClassChainOrNull(value, cb) -> cb(err, element)\n     * elementByIosPredicateStringOrNull(value, cb) -> cb(err, element)\n     * elementByAndroidUIAutomatorOrNull(value, cb) -> cb(err, element)\n     * elementByAccessibilityIdOrNull(value, cb) -> cb(err, element)\n     *\n     * @jsonWire POST /session/:sessionId/elements\n     * @docOrder 4\n     */\n\n\n    commands['element' + utils.elFuncSuffix(type) + 'OrNull'] = function () {\n      var fargs = utils.varargs(arguments);\n      var cb = fargs.callback;\n      var args = fargs.all;\n      args.unshift(utils.elFuncFullType(type));\n      args.push(function (err, elements) {\n        if (!err) {\n          if (elements.length > 0) {\n            cb(null, elements[0]);\n          } else {\n            cb(null, null);\n          }\n        } else {\n          cb(err);\n        }\n      });\n      commands.elements.apply(this, args);\n    };\n    /**\n     * elementByClassNameIfExists(value, cb) -> cb(err, element)\n     * elementByCssSelectorIfExists(value, cb) -> cb(err, element)\n     * elementByIdIfExists(value, cb) -> cb(err, element)\n     * elementByNameIfExists(value, cb) -> cb(err, element)\n     * elementByLinkTextIfExists(value, cb) -> cb(err, element)\n     * elementByPartialLinkTextIfExists(value, cb) -> cb(err, element)\n     * elementByTagNameIfExists(value, cb) -> cb(err, element)\n     * elementByXPathIfExists(value, cb) -> cb(err, element)\n     * elementByCssIfExists(value, cb) -> cb(err, element)\n     * elementByIosUIAutomationIfExists(value, cb) -> cb(err, element)\n     * elementByIosClassChainIfExists(value, cb) -> cb(err, element)\n     * elementByIosPredicateStringIfExists(value, cb) -> cb(err, element)\n     * elementByAndroidUIAutomatorIfExists(value, cb) -> cb(err, element)\n     * elementByAccessibilityIdIfExists(value, cb) -> cb(err, element)\n     *\n     * @jsonWire POST /session/:sessionId/elements\n     * @docOrder 6\n     */\n\n\n    commands['element' + utils.elFuncSuffix(type) + 'IfExists'] = function () {\n      var fargs = utils.varargs(arguments);\n      var cb = fargs.callback;\n      var args = fargs.all;\n      args.unshift(utils.elFuncFullType(type));\n      args.push(function (err, elements) {\n        if (!err) {\n          if (elements.length > 0) {\n            cb(null, elements[0]);\n          } else {\n            cb(null);\n          }\n        } else {\n          cb(err);\n        }\n      });\n      commands.elements.apply(this, args);\n    };\n    /**\n     * hasElementByClassName(value, cb) -> cb(err, boolean)\n     * hasElementByCssSelector(value, cb) -> cb(err, boolean)\n     * hasElementById(value, cb) -> cb(err, boolean)\n     * hasElementByName(value, cb) -> cb(err, boolean)\n     * hasElementByLinkText(value, cb) -> cb(err, boolean)\n     * hasElementByPartialLinkText(value, cb) -> cb(err, boolean)\n     * hasElementByTagName(value, cb) -> cb(err, boolean)\n     * hasElementByXPath(value, cb) -> cb(err, boolean)\n     * hasElementByCss(value, cb) -> cb(err, boolean)\n     * hasElementByIosUIAutomation(value, cb) -> cb(err, boolean)\n     * hasElementByIosClassChain(value, cb) -> cb(err, boolean)\n     * hasElementByIosPredicateString(value, cb) -> cb(err, boolean)\n     * hasElementByAndroidUIAutomator(value, cb) -> cb(err, boolean)\n     * hasElementByAccessibilityId(value, cb) -> cb(err, boolean)\n     *\n     * @jsonWire POST /session/:sessionId/elements\n     * @docOrder 8\n     */\n\n\n    commands['hasElement' + utils.elFuncSuffix(type)] = function () {\n      var args = __slice.call(arguments, 0);\n\n      args.unshift(utils.elFuncFullType(type));\n      commands.hasElement.apply(this, args);\n    };\n    /**\n     * waitForElementByClassName(value, asserter, timeout, pollFreq, cb) -> cb(err, el)\n     * waitForElementByCssSelector(value, asserter, timeout, pollFreq, cb) -> cb(err, el)\n     * waitForElementById(value, asserter, timeout, pollFreq, cb) -> cb(err, el)\n     * waitForElementByName(value, asserter, timeout, pollFreq, cb) -> cb(err, el)\n     * waitForElementByLinkText(value, asserter, timeout, pollFreq, cb) -> cb(err, el)\n     * waitForElementByPartialLinkText(value, asserter, timeout, pollFreq, cb) -> cb(err, el)\n     * waitForElementByTagName(value, asserter, timeout, pollFreq, cb) -> cb(err, el)\n     * waitForElementByXPath(value, asserter, timeout, pollFreq, cb) -> cb(err, el)\n     * waitForElementByCss(value, asserter, timeout, pollFreq, cb) -> cb(err, el)\n     * waitForElementByIosUIAutomation(value, asserter, timeout, pollFreq, cb) -> cb(err, el)\n     * waitForElementByIosClassChain(value, asserter, timeout, pollFreq, cb) -> cb(err, el)\n     * waitForElementByIosPredicateString(value, asserter, timeout, pollFreq, cb) -> cb(err, el)\n     * waitForElementByAndroidUIAutomator(value, asserter, timeout, pollFreq, cb) -> cb(err, el)\n     * waitForElementByAccessibilityId(value, asserter, timeout, pollFreq, cb) -> cb(err, el)\n     * asserter, timeout, pollFreq are optional, opts may be passed instead,\n     * as in waitForElement.\n     */\n\n\n    commands['waitForElement' + utils.elFuncSuffix(type)] = function () {\n      var args = __slice.call(arguments, 0);\n\n      args.unshift(utils.elFuncFullType(type));\n      commands.waitForElement.apply(this, args);\n    };\n    /**\n     * waitForElementsByClassName(value, asserter, timeout, pollFreq, cb) -> cb(err, els)\n     * waitForElementsByCssSelector(value, asserter, timeout, pollFreq, cb) -> cb(err, els)\n     * waitForElementsById(value, asserter, timeout, pollFreq, cb) -> cb(err, els)\n     * waitForElementsByName(value, asserter, timeout, pollFreq, cb) -> cb(err, els)\n     * waitForElementsByLinkText(value, asserter, timeout, pollFreq, cb) -> cb(err, els)\n     * waitForElementsByPartialLinkText(value, asserter, timeout, pollFreq, cb) -> cb(err, els)\n     * waitForElementsByTagName(value, asserter, timeout, pollFreq, cb) -> cb(err, els)\n     * waitForElementsByXPath(value, asserter, timeout, pollFreq, cb) -> cb(err, els)\n     * waitForElementsByCss(value, asserter, timeout, pollFreq, cb) -> cb(err, els)\n     * waitForElementsByIosUIAutomation(value, asserter, timeout, pollFreq, cb) -> cb(err, el)\n     * waitForElementsByIosClassChain(value, asserter, timeout, pollFreq, cb) -> cb(err, el)\n     * waitForElementsByIosPredicateString(value, asserter, timeout, pollFreq, cb) -> cb(err, el)\n     * waitForElementsByAndroidUIAutomator(value, asserter, timeout, pollFreq, cb) -> cb(err, el)\n     * waitForElementsByAccessibilityId(value, asserter, timeout, pollFreq, cb) -> cb(err, el)\n     * asserter, timeout, pollFreq are optional, opts may be passed instead,\n     * as in waitForElements.\n     */\n\n\n    commands['waitForElements' + utils.elFuncSuffix(type)] = function () {\n      var args = __slice.call(arguments, 0);\n\n      args.unshift(utils.elFuncFullType(type));\n      commands.waitForElements.apply(this, args);\n    };\n\n    commands['waitForVisible' + utils.elFuncSuffix(type)] = function () {\n      var args = __slice.call(arguments, 0);\n\n      args.unshift(utils.elFuncFullType(type));\n      commands.waitForVisible.apply(this, args);\n    };\n    /**\n     * elementsByClassName(value, cb) -> cb(err, elements)\n     * elementsByCssSelector(value, cb) -> cb(err, elements)\n     * elementsById(value, cb) -> cb(err, elements)\n     * elementsByName(value, cb) -> cb(err, elements)\n     * elementsByLinkText(value, cb) -> cb(err, elements)\n     * elementsByPartialLinkText(value, cb) -> cb(err, elements)\n     * elementsByTagName(value, cb) -> cb(err, elements)\n     * elementsByXPath(value, cb) -> cb(err, elements)\n     * elementsByCss(value, cb) -> cb(err, elements)\n     * elementsByIosUIAutomation(value, cb) -> cb(err, elements)\n     * elementsByIosClassChain(value, cb) -> cb(err, elements)\n     * elementsByIosPredicateString(value, cb) -> cb(err, elements)\n     * elementsByAndroidUIAutomator(value, cb) -> cb(err, elements)\n     * elementsByAccessibilityId(value, cb) -> cb(err, elements)\n     *\n     * @jsonWire POST /session/:sessionId/elements\n     * @docOrder 2\n     */\n\n  }\n\n  if (plural) {\n    commands['elements' + utils.elFuncSuffix(type)] = function () {\n      var args = __slice.call(arguments, 0);\n\n      args.unshift(utils.elFuncFullType(type));\n      commands.elements.apply(this, args);\n    };\n  }\n};\n\n_.each(utils.elementFuncTypes, function (suffix) {\n  addMethodsForSuffix(suffix, true, true);\n});\n/**\n * getTagName(element, cb) -> cb(err, name)\n *\n * @jsonWire GET /session/:sessionId/element/:id/name\n */\n\n\ncommands.getTagName = function (element) {\n  var cb = findCallback(arguments);\n\n  this._jsonWireCall({\n    method: 'GET',\n    relPath: '/element/' + element + '/name',\n    cb: callbackWithData(cb, this)\n  });\n};\n/**\n * getAttribute(element, attrName, cb) -> cb(err, value)\n *\n * @jsonWire GET /session/:sessionId/element/:id/attribute/:name\n * @docOrder 1\n */\n\n\ncommands.getAttribute = function () {\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback,\n      element = fargs.all[0],\n      attrName = fargs.all[1];\n\n  if (!element) {\n    throw new Error('Missing element.');\n  }\n\n  if (!attrName) {\n    throw new Error('Missing attribute name.');\n  }\n\n  this._jsonWireCall({\n    method: 'GET',\n    relPath: '/element/' + element + '/attribute/' + attrName,\n    cb: callbackWithData(cb, this)\n  });\n};\n/**\n * isDisplayed(element, cb) -> cb(err, displayed)\n *\n * @jsonWire GET /session/:sessionId/element/:id/displayed\n */\n\n\ncommands.isDisplayed = function (element) {\n  var cb = findCallback(arguments);\n\n  this._jsonWireCall({\n    method: 'GET',\n    relPath: '/element/' + element + '/displayed',\n    cb: callbackWithData(cb, this)\n  });\n};\n\ncommands.displayed = commands.isDisplayed;\n/**\n  * isEnabled(element, cb) -> cb(err, enabled)\n  *\n  * @jsonWire GET /session/:sessionId/element/:id/enabled\n  */\n\ncommands.isEnabled = function (element) {\n  var cb = findCallback(arguments);\n\n  this._jsonWireCall({\n    method: 'GET',\n    relPath: '/element/' + element + '/enabled',\n    cb: callbackWithData(cb, this)\n  });\n};\n\ncommands.enabled = commands.isEnabled;\n/**\n * isSelected(element, cb) -> cb(err, selected)\n *\n * @jsonWire GET /session/:sessionId/element/:id/selected\n */\n\ncommands.isSelected = function (element) {\n  var cb = findCallback(arguments);\n\n  this._jsonWireCall({\n    method: 'GET',\n    relPath: '/element/' + element + '/selected',\n    cb: callbackWithData(cb, this)\n  });\n}; // commands.selected = commands.isSelected;\n\n/**\n * Get element value (in value attribute):\n * getValue(element, cb) -> cb(err, value)\n *\n * @jsonWire GET /session/:sessionId/element/:id/attribute/:name\n * @docOrder 3\n */\n\n\ncommands.getValue = function () {\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback,\n      element = fargs.all[0];\n\n  if (!element) {\n    throw new Error('Missing element.');\n  }\n\n  commands.getAttribute.apply(this, [element, 'value', cb]);\n};\n/**\n * clickElement(element, cb) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/element/:id/click\n */\n\n\ncommands.clickElement = function (element) {\n  var cb = findCallback(arguments);\n\n  this._jsonWireCall({\n    method: 'POST',\n    relPath: '/element/' + element + '/click',\n    cb: simpleCallback(cb)\n  });\n};\n/**\n * getComputedCss(element, cssProperty , cb) -> cb(err, value)\n *\n * @jsonWire GET /session/:sessionId/element/:id/css/:propertyName\n */\n\n\ncommands.getComputedCss = function (element, cssProperty) {\n  var cb = findCallback(arguments);\n\n  this._jsonWireCall({\n    method: 'GET',\n    relPath: '/element/' + element + '/css/' + cssProperty,\n    cb: callbackWithData(cb, this)\n  });\n};\n\ncommands.getComputedCSS = commands.getComputedCss;\n/**\n * equalsElement(element, other , cb) -> cb(err, value)\n *\n * @jsonWire GET /session/:sessionId/element/:id/equals/:other\n */\n\ncommands.equalsElement = function (element, other) {\n  var cb = findCallback(arguments);\n\n  this._jsonWireCall({\n    method: 'GET',\n    relPath: '/element/' + element + '/equals/' + other,\n    cb: callbackWithData(cb, this)\n  });\n};\n\nvar _flick1 = function () {\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback,\n      xspeed = fargs.all[0],\n      yspeed = fargs.all[1],\n      swipe = fargs.all[2];\n  var data = {\n    xspeed: xspeed,\n    yspeed: yspeed\n  };\n\n  if (swipe) {\n    data.swipe = swipe;\n  }\n\n  this._jsonWireCall({\n    method: 'POST',\n    relPath: '/touch/flick',\n    data: data,\n    cb: simpleCallback(cb)\n  });\n};\n\nvar _flick2 = function () {\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback,\n      element = fargs.all[0],\n      xoffset = fargs.all[1],\n      yoffset = fargs.all[2],\n      speed = fargs.all[3];\n\n  this._jsonWireCall({\n    method: 'POST',\n    relPath: '/touch/flick',\n    data: {\n      element: element,\n      xoffset: xoffset,\n      yoffset: yoffset,\n      speed: speed\n    },\n    cb: simpleCallback(cb)\n  });\n};\n/**\n * flick(xspeed, yspeed, swipe, cb) -> cb(err)\n * Flicks, starting anywhere on the screen.\n *\n * flick(element, xoffset, yoffset, speed, cb) -> cb(err)\n * Flicks, starting at element center.\n *\n * @jsonWire POST /session/:sessionId/touch/flick\n */\n\n\ncommands.flick = function () {\n  var args = __slice.call(arguments, 0);\n\n  if (args.length <= 4) {\n    _flick1.apply(this, args);\n  } else {\n    _flick2.apply(this, args);\n  }\n};\n/**\n * tapElement(element) -> cb(err)\n * Taps element\n *\n * @jsonWire POST /session/:sessionId/touch/click\n */\n\n\ncommands.tapElement = function (element, cb) {\n  this._jsonWireCall({\n    method: 'POST',\n    relPath: '/touch/click',\n    data: {\n      element: element.value.toString()\n    },\n    cb: simpleCallback(cb)\n  });\n};\n/**\n * performTouchAction(touchAction) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/touch/perform\n */\n\n\ncommands.performTouchAction = function () {\n  var _this = this;\n\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback,\n      touchAction = fargs.all[0];\n\n  try {\n    _this._jsonWireCall({\n      method: 'POST',\n      relPath: '/touch/perform',\n      data: {\n        actions: touchAction.toJSON()\n      },\n      cb: callbackWithData(cb, this)\n    });\n  } catch (err) {\n    return cb(err);\n  }\n};\n/**\n * performMultiAction(element, multiAction) -> cb(err, touchStateObjects)\n * performMultiAction(multiAction) -> cb(err, touchStateObjects)\n *\n * @jsonWire POST /session/:sessionId/touch/multi/perform\n */\n\n\ncommands.performMultiAction = function () {\n  var _this = this;\n\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback,\n      element = fargs.all[0],\n      multiTouchAction = fargs.all[1];\n\n  if (!multiTouchAction) {\n    multiTouchAction = element;\n    element = null;\n  }\n\n  element = element || multiTouchAction.element;\n\n  try {\n    var data = multiTouchAction.toJSON(element);\n\n    if (element) {\n      data.elementId = element.value.toString();\n    }\n\n    _this._jsonWireCall({\n      method: 'POST',\n      relPath: '/touch/multi/perform',\n      data: data,\n      cb: callbackWithData(cb, this)\n    });\n  } catch (err) {\n    return cb(err);\n  }\n};\n/**\n * performW3CActions(actions) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/actions\n */\n\n\ncommands.performW3CActions = function () {\n  var _this = this;\n\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback,\n      actions = fargs.all[0];\n\n  try {\n    var data = actions.toJSON();\n\n    _this._jsonWireCall({\n      method: 'POST',\n      relPath: '/actions',\n      data: data,\n      cb: callbackWithData(cb, this)\n    });\n  } catch (err) {\n    return cb(err);\n  }\n};\n\ncommands.releaseW3CActions = function () {\n  var _this = this;\n\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback;\n\n  try {\n    _this._jsonWireCall({\n      method: 'DELETE',\n      relPath: '/actions',\n      cb: callbackWithData(cb, this)\n    });\n  } catch (err) {\n    return cb(err);\n  }\n};\n/**\n * moveTo(element, xoffset, yoffset, cb) -> cb(err)\n * Move to element, element may be null, xoffset and y offset\n * are optional.\n *\n * @jsonWire POST /session/:sessionId/moveto\n */\n\n\ncommands.moveTo = function () {\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback,\n      element = fargs.all[0],\n      xoffset = fargs.all[1],\n      yoffset = fargs.all[2];\n\n  this._jsonWireCall({\n    method: 'POST',\n    relPath: '/moveto',\n    data: {\n      element: element ? element.toString() : null,\n      xoffset: xoffset,\n      yoffset: yoffset\n    },\n    cb: simpleCallback(cb)\n  });\n};\n/**\n * buttonDown(button ,cb) -> cb(err)\n * button is optional.\n * {LEFT = 0, MIDDLE = 1 , RIGHT = 2}.\n * LEFT if not specified.\n *\n * @jsonWire POST /session/:sessionId/buttondown\n */\n\n\ncommands.buttonDown = function () {\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback,\n      button = fargs.all[0];\n\n  this._jsonWireCall({\n    method: 'POST',\n    relPath: '/buttondown',\n    data: {\n      button: button\n    },\n    cb: simpleCallback(cb)\n  });\n};\n/**\n * buttonUp(button, cb) -> cb(err)\n * button is optional.\n * {LEFT = 0, MIDDLE = 1 , RIGHT = 2}.\n * LEFT if not specified.\n *\n * @jsonWire POST /session/:sessionId/buttonup\n */\n\n\ncommands.buttonUp = function () {\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback,\n      button = fargs.all[0];\n\n  this._jsonWireCall({\n    method: 'POST',\n    relPath: '/buttonup',\n    data: {\n      button: button\n    },\n    cb: simpleCallback(cb)\n  });\n};\n/**\n * click(button, cb) -> cb(err)\n * Click on current element.\n * Buttons: {left: 0, middle: 1 , right: 2}\n *\n * @jsonWire POST /session/:sessionId/click\n */\n\n\ncommands.click = function () {\n  // parsing args, button optional\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback,\n      button = fargs.all[0];\n\n  this._jsonWireCall({\n    method: 'POST',\n    relPath: '/click',\n    data: {\n      button: button\n    },\n    cb: simpleCallback(cb)\n  });\n};\n/**\n * doubleclick(cb) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/doubleclick\n */\n\n\ncommands.doubleclick = function () {\n  var cb = findCallback(arguments);\n\n  this._jsonWireCall({\n    method: 'POST',\n    relPath: '/doubleclick',\n    cb: simpleCallback(cb)\n  });\n};\n/**\n * type(element, keys, cb) -> cb(err)\n * Type keys (all keys are up at the end of command).\n * special key map: wd.SPECIAL_KEYS (see lib/special-keys.js)\n *\n * @jsonWire POST /session/:sessionId/element/:id/value\n */\n\n\ncommands.type = function (element, keys) {\n  var cb = findCallback(arguments);\n\n  if (!Array.isArray(keys)) {\n    keys = [keys];\n  } // ensure all keystrokes are strings to conform to JSONWP\n\n\n  _.each(keys, function (key, idx) {\n    if (typeof key !== \"string\") {\n      keys[idx] = key.toString();\n    }\n  });\n\n  this._jsonWireCall({\n    method: 'POST',\n    relPath: '/element/' + element + '/value',\n    data: {\n      value: keys,\n      text: keys.join('')\n    },\n    cb: simpleCallback(cb)\n  });\n};\n\ncommands.replace = function (element, keys) {\n  var cb = findCallback(arguments);\n\n  if (!Array.isArray(keys)) {\n    keys = [keys];\n  } // ensure all keystrokes are strings to conform to JSONWP\n\n\n  _.each(keys, function (key, idx) {\n    if (typeof key !== \"string\") {\n      keys[idx] = key.toString();\n    }\n  });\n\n  this._jsonWireCall({\n    method: 'POST',\n    relPath: '/appium/element/' + element + '/replace_value',\n    data: {\n      value: keys\n    },\n    cb: simpleCallback(cb)\n  });\n};\n/**\n * submit(element, cb) -> cb(err)\n * Submit a `FORM` element.\n *\n * @jsonWire POST /session/:sessionId/element/:id/submit\n */\n\n\ncommands.submit = function (element) {\n  var cb = findCallback(arguments);\n\n  this._jsonWireCall({\n    method: 'POST',\n    relPath: '/element/' + element + '/submit',\n    cb: simpleCallback(cb)\n  });\n};\n/**\n * keys(keys, cb) -> cb(err)\n * Press keys (keys may still be down at the end of command).\n * special key map: wd.SPECIAL_KEYS (see lib/special-keys.js)\n *\n * @jsonWire POST /session/:sessionId/keys\n */\n\n\ncommands.keys = function (keys) {\n  var cb = findCallback(arguments);\n\n  if (!Array.isArray(keys)) {\n    keys = [keys];\n  } // ensure all keystrokes are strings to conform to JSONWP\n\n\n  _.each(keys, function (key, idx) {\n    if (typeof key !== \"string\") {\n      keys[idx] = key.toString();\n    }\n  });\n\n  this._jsonWireCall({\n    method: 'POST',\n    relPath: '/keys',\n    data: {\n      value: keys\n    },\n    cb: simpleCallback(cb)\n  });\n};\n/**\n * clear(element, cb) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/element/:id/clear\n */\n\n\ncommands.clear = function (element) {\n  var cb = findCallback(arguments);\n\n  this._jsonWireCall({\n    method: 'POST',\n    relPath: '/element/' + element + '/clear',\n    cb: simpleCallback(cb)\n  });\n};\n/**\n * title(cb) -> cb(err, title)\n *\n * @jsonWire GET /session/:sessionId/title\n */\n\n\ncommands.title = function () {\n  var cb = findCallback(arguments);\n\n  this._jsonWireCall({\n    method: 'GET',\n    relPath: '/title',\n    cb: callbackWithData(cb, this)\n  });\n};\n/**\n * source(cb) -> cb(err, source)\n *\n * @jsonWire GET /session/:sessionId/source\n */\n\n\ncommands.source = function () {\n  var cb = findCallback(arguments);\n\n  this._jsonWireCall({\n    method: 'GET',\n    relPath: '/source',\n    cb: callbackWithData(cb, this)\n  });\n}; // element must be specified\n\n\nvar _rawText = function (element) {\n  var cb = findCallback(arguments);\n\n  this._jsonWireCall({\n    method: 'GET',\n    relPath: '/element/' + element + '/text',\n    cb: callbackWithData(cb, this)\n  });\n};\n/**\n * text(element, cb) -> cb(err, text)\n * element: specific element, 'body', or undefined\n *\n * @jsonWire GET /session/:sessionId/element/:id/text\n * @docOrder 1\n */\n\n\ncommands.text = function () {\n  var cb = findCallback(arguments);\n  var fargs = utils.varargs(arguments);\n  var element = fargs.all[0];\n\n  var _this = this;\n\n  if (!element || element === 'body') {\n    commands.element.apply(this, ['tag name', 'body', function (err, bodyEl) {\n      if (!err) {\n        _rawText.apply(_this, [bodyEl, cb]);\n      } else {\n        cb(err);\n      }\n    }]);\n  } else {\n    _rawText.apply(_this, [element, cb]);\n  }\n};\n/**\n * Check if text is present:\n * textPresent(searchText, element, cb) -> cb(err, boolean)\n * element: specific element, 'body', or undefined\n *\n * @jsonWire GET /session/:sessionId/element/:id/text\n * @docOrder 3\n */\n\n\ncommands.textPresent = function (searchText, element) {\n  var cb = findCallback(arguments);\n  commands.text.apply(this, [element, function (err, text) {\n    if (err) {\n      cb(err, null);\n    } else {\n      cb(err, text.indexOf(searchText) >= 0);\n    }\n  }]);\n};\n/**\n * alertText(cb) -> cb(err, text)\n *\n * @jsonWire GET /session/:sessionId/alert_text\n */\n\n\ncommands.alertText = function () {\n  var cb = findCallback(arguments);\n\n  this._jsonWireCall({\n    method: 'GET',\n    relPath: '/alert_text',\n    cb: callbackWithData(cb, this)\n  });\n};\n/**\n * alertKeys(keys, cb) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/alert_text\n */\n\n\ncommands.alertKeys = function (keys) {\n  var cb = findCallback(arguments);\n\n  this._jsonWireCall({\n    method: 'POST',\n    relPath: '/alert_text',\n    data: {\n      text: keys\n    },\n    cb: simpleCallback(cb)\n  });\n};\n/**\n * acceptAlert(cb) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/accept_alert\n */\n\n\ncommands.acceptAlert = function () {\n  var cb = findCallback(arguments);\n\n  this._jsonWireCall({\n    method: 'POST',\n    relPath: '/accept_alert',\n    cb: simpleCallback(cb)\n  });\n};\n/**\n * dismissAlert(cb) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/dismiss_alert\n */\n\n\ncommands.dismissAlert = function () {\n  var cb = findCallback(arguments);\n\n  this._jsonWireCall({\n    method: 'POST',\n    relPath: '/dismiss_alert',\n    cb: simpleCallback(cb)\n  });\n};\n/**\n * active(cb) -> cb(err, element)\n *\n * @jsonWire POST /session/:sessionId/element/active\n */\n\n\ncommands.active = function () {\n  var cb = findCallback(arguments);\n  var method = this.w3c ? 'GET' : 'POST';\n\n  this._jsonWireCall({\n    method: method,\n    relPath: '/element/active',\n    cb: callbackWithData(cb, this)\n  });\n};\n/**\n * url(cb) -> cb(err, url)\n *\n * @jsonWire GET /session/:sessionId/url\n */\n\n\ncommands.url = function () {\n  var cb = findCallback(arguments);\n\n  this._jsonWireCall({\n    method: 'GET',\n    relPath: '/url',\n    cb: callbackWithData(cb, this)\n  });\n};\n/**\n * allCookies() -> cb(err, cookies)\n *\n * @jsonWire GET /session/:sessionId/cookie\n */\n\n\ncommands.allCookies = function () {\n  var cb = findCallback(arguments);\n\n  this._jsonWireCall({\n    method: 'GET',\n    relPath: '/cookie',\n    cb: callbackWithData(cb, this)\n  });\n};\n/**\n * setCookie(cookie, cb) -> cb(err)\n * cookie example:\n *  {name:'fruit', value:'apple'}\n * Optional cookie fields:\n *  path, domain, secure, expiry\n *\n * @jsonWire POST /session/:sessionId/cookie\n */\n\n\ncommands.setCookie = function (cookie) {\n  var cb = findCallback(arguments); // setting secure otherwise selenium server throws\n\n  if (cookie) {\n    cookie.secure = cookie.secure || false;\n  }\n\n  this._jsonWireCall({\n    method: 'POST',\n    relPath: '/cookie',\n    data: {\n      cookie: cookie\n    },\n    cb: simpleCallback(cb)\n  });\n};\n/**\n * deleteAllCookies(cb) -> cb(err)\n *\n * @jsonWire DELETE /session/:sessionId/cookie\n */\n\n\ncommands.deleteAllCookies = function () {\n  var cb = findCallback(arguments);\n\n  this._jsonWireCall({\n    method: 'DELETE',\n    relPath: '/cookie',\n    cb: simpleCallback(cb)\n  });\n};\n/**\n * deleteCookie(name, cb) -> cb(err)\n *\n * @jsonWire DELETE /session/:sessionId/cookie/:name\n */\n\n\ncommands.deleteCookie = function (name) {\n  var cb = findCallback(arguments);\n\n  this._jsonWireCall({\n    method: 'DELETE',\n    relPath: '/cookie/' + encodeURIComponent(name),\n    cb: simpleCallback(cb)\n  });\n};\n/**\n * getOrientation(cb) -> cb(err, orientation)\n *\n * @jsonWire GET /session/:sessionId/orientation\n */\n\n\ncommands.getOrientation = function () {\n  var cb = findCallback(arguments);\n\n  this._jsonWireCall({\n    method: 'GET',\n    relPath: '/orientation',\n    cb: callbackWithData(cb, this)\n  });\n};\n/**\n * setOrientation(cb) -> cb(err, orientation)\n *\n * @jsonWire POST /session/:sessionId/orientation\n */\n\n\ncommands.setOrientation = function (orientation) {\n  orientation = orientation.toUpperCase();\n  var cb = findCallback(arguments);\n\n  this._jsonWireCall({\n    method: 'POST',\n    relPath: '/orientation',\n    data: {\n      orientation: orientation\n    },\n    cb: simpleCallback(cb)\n  });\n};\n/**\n * setLocalStorageKey(key, value, cb) -> cb(err)\n *\n * # uses safeExecute() due to localStorage bug in Selenium\n *\n * @jsonWire POST /session/:sessionId/local_storage\n */\n\n\ncommands.setLocalStorageKey = function () {\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback,\n      key = fargs.all[0],\n      value = fargs.all[1];\n  commands.safeExecute.apply(this, [\"localStorage.setItem(arguments[0], arguments[1])\", [key, value], cb]);\n};\n/**\n * getLocalStorageKey(key, cb) -> cb(err)\n *\n * # uses safeEval() due to localStorage bug in Selenium\n *\n * @jsonWire GET /session/:sessionId/local_storage/key/:key\n */\n\n\ncommands.getLocalStorageKey = function () {\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback,\n      key = fargs.all[0];\n  commands.safeEval.apply(this, [\"localStorage.getItem('\" + key + \"')\", cb]);\n};\n/**\n * removeLocalStorageKey(key, cb) -> cb(err)\n *\n * # uses safeExecute() due to localStorage bug in Selenium\n *\n * @jsonWire DELETE /session/:sessionId/local_storage/key/:key\n */\n\n\ncommands.removeLocalStorageKey = function () {\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback,\n      key = fargs.all[0];\n  commands.safeExecute.apply(this, [\"localStorage.removeItem(arguments[0])\", [key], cb]);\n};\n/**\n * clearLocalStorage(cb) -> cb(err)\n *\n * # uses safeExecute() due to localStorage bug in Selenium\n *\n * @jsonWire DELETE /session/:sessionId/local_storage\n */\n\n\ncommands.clearLocalStorage = function () {\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback;\n  commands.safeExecute.apply(this, [\"localStorage.clear()\", cb]);\n}; // deprecated\n\n\nvar _isVisible1 = function (element) {\n  var cb = findCallback(arguments);\n  commands.getComputedCSS.apply(this, [element, \"display\", function (err, display) {\n    if (err) {\n      return cb(err);\n    }\n\n    cb(null, display !== \"none\");\n  }]);\n}; // deprecated\n\n\nvar _isVisible2 = function (queryType, querySelector) {\n  var cb = findCallback(arguments);\n  commands.elementIfExists.apply(this, [queryType, querySelector, function (err, element) {\n    if (err) {\n      return cb(err);\n    }\n\n    if (element) {\n      element.isVisible(cb);\n    } else {\n      cb(null, false);\n    }\n  }]);\n}; // deprecated\n\n\ncommands.isVisible = function () {\n  deprecator.warn('isVisible', 'isVisible has been deprecated, use isDisplayed instead.');\n\n  var args = __slice.call(arguments, 0);\n\n  if (args.length <= 2) {\n    _isVisible1.apply(this, args);\n  } else {\n    _isVisible2.apply(this, args);\n  }\n};\n/**\n * Retrieves the pageIndex element (added for Appium):\n * getPageIndex(element, cb) -> cb(err, pageIndex)\n */\n\n\ncommands.getPageIndex = function (element) {\n  var cb = findCallback(arguments);\n\n  this._jsonWireCall({\n    method: 'GET',\n    relPath: '/element/' + element + '/pageIndex',\n    cb: callbackWithData(cb, this)\n  });\n};\n/**\n * getLocation(element, cb) -> cb(err, location)\n *\n * @jsonWire GET /session/:sessionId/element/:id/location\n */\n\n\ncommands.getLocation = function (element) {\n  var cb = findCallback(arguments);\n\n  this._jsonWireCall({\n    method: 'GET',\n    relPath: '/element/' + element + '/location',\n    cb: callbackWithData(cb, this)\n  });\n};\n/**\n * getLocationInView(element, cb) -> cb(err, location)\n *\n * @jsonWire GET /session/:sessionId/element/:id/location_in_view\n */\n\n\ncommands.getLocationInView = function (element) {\n  var cb = findCallback(arguments);\n\n  this._jsonWireCall({\n    method: 'GET',\n    relPath: '/element/' + element + '/location_in_view',\n    cb: callbackWithData(cb, this)\n  });\n};\n/**\n * getSize(element, cb) -> cb(err, size)\n *\n * @jsonWire GET /session/:sessionId/element/:id/size\n */\n\n\ncommands.getSize = function (element) {\n  var cb = findCallback(arguments);\n\n  this._jsonWireCall({\n    method: 'GET',\n    relPath: '/element/' + element + '/size',\n    cb: callbackWithData(cb, this)\n  });\n};\n/**\n * Uploads a local file using undocumented\n * POST /session/:sessionId/file\n * uploadFile(filepath, cb) -> cb(err, filepath)\n */\n\n\ncommands.uploadFile = function (filepath) {\n  var cb = findCallback(arguments);\n\n  var _this = this;\n\n  var archiver = require('archiver');\n\n  var archive = archiver('zip');\n  var dataList = [];\n  archive.on('error', function (err) {\n    cb(err);\n  }).on('data', function (data) {\n    dataList.push(data);\n  }).on('end', function () {\n    _this._jsonWireCall({\n      method: 'POST',\n      relPath: '/file',\n      data: {\n        file: Buffer.concat(dataList).toString('base64')\n      },\n      cb: callbackWithData(cb, _this)\n    });\n  });\n  archive.append(fs.createReadStream(filepath), {\n    name: path.basename(filepath)\n  });\n  archive.finalize(function (err) {\n    if (err) {\n      cb(err);\n    }\n  });\n};\n\ncommands.waitForJsCondition = function () {\n  deprecator.warn('waitForJsCondition', 'waitForJsCondition has been deprecated, use waitFor + jsCondition asserter instead.');\n  var cb = findCallback(arguments);\n  var fargs = utils.varargs(arguments);\n  var jsConditionExpr = fargs.all[0],\n      timeout = fargs.all[1],\n      pollFreq = fargs.all[2];\n  commands.waitFor.apply(this, [{\n    asserter: asserters.jsCondition(jsConditionExpr, true),\n    timeout: timeout,\n    pollFreq: pollFreq\n  }, function (err, value) {\n    if (err && err.message && err.message.match(/Condition/)) {\n      cb(new Error(\"Element condition wasn't satisfied!\"));\n    } else {\n      cb(err, value);\n    }\n  }]);\n};\n\ncommands.waitForCondition = commands.waitForJsCondition;\n/**\n * Waits for JavaScript condition to be true (async script polling within browser):\n * waitForConditionInBrowser(conditionExpr, timeout, pollFreq, cb) -> cb(err, boolean)\n * conditionExpr: condition expression, should return a boolean\n * timeout and  pollFreq are optional, default: 1000/100.\n * return true if condition satisfied, error otherwise.\n */\n\ncommands.waitForConditionInBrowser = function () {\n  var _this = this; // parsing args\n\n\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback,\n      conditionExpr = fargs.all[0],\n      timeout = fargs.all[1] || 1000,\n      poll = fargs.all[2] || 100; // calling script\n\n  commands.safeExecuteAsync.apply(_this, [_waitForConditionInBrowserJsScript, [conditionExpr, timeout, poll], function (err, res) {\n    if (err) {\n      return cb(err);\n    }\n\n    if (res !== true) {\n      return cb(\"waitForConditionInBrowser failure for: \" + conditionExpr);\n    }\n\n    cb(null, res);\n  }]);\n};\n/**\n * sauceJobUpdate(jsonData, cb) -> cb(err)\n */\n\n\ncommands.sauceJobUpdate = function () {\n  var fargs = utils.varargs(arguments);\n\n  this._sauceJobUpdate.apply(this, fargs.array);\n};\n/**\n * sauceJobStatus(hasPassed, cb) -> cb(err)\n */\n\n\ncommands.sauceJobStatus = function () {\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback,\n      hasPassed = fargs.all[0];\n\n  this._sauceJobUpdate.apply(this, [{\n    passed: hasPassed\n  }, cb]);\n};\n/**\n * sleep(ms, cb) -> cb(err)\n */\n\n\ncommands.sleep = function (ms, cb) {\n  cb = cb || function () {};\n\n  setTimeout(cb, ms);\n};\n/**\n * noop(cb) -> cb(err)\n */\n\n\ncommands.noop = function (cb) {\n  if (cb) {\n    cb();\n  }\n};\n/**\n * shakeDevice(cb) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/appium/device/shake\n */\n\n\ncommands.shakeDevice = function () {\n  var cb = findCallback(arguments);\n\n  this._jsonWireCall({\n    method: 'POST',\n    relPath: '/appium/device/shake',\n    cb: simpleCallback(cb)\n  });\n};\n/**\n * shake(cb) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/appium/device/shake\n */\n\n\ncommands.shake = commands.shakeDevice;\n/**\n * lockDevice(seconds, cb) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/appium/device/lock\n */\n\ncommands.lockDevice = function () {\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback,\n      seconds = fargs.all[0];\n\n  this._jsonWireCall({\n    method: 'POST',\n    relPath: '/appium/device/lock',\n    data: {\n      seconds: seconds\n    },\n    cb: simpleCallback(cb)\n  });\n};\n/**\n * lock(seconds, cb) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/appium/device/lock\n */\n\n\ncommands.lock = commands.lockDevice;\n/**\n * unlockDevice(cb) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/appium/device/lock\n */\n\ncommands.unlockDevice = function () {\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback;\n\n  this._jsonWireCall({\n    method: 'POST',\n    relPath: '/appium/device/unlock',\n    cb: simpleCallback(cb)\n  });\n};\n/**\n * unlock(cb) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/appium/device/lock\n */\n\n\ncommands.unlock = commands.unlockDevice;\n/**\n * isLocked(cb) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/appium/device/is_locked\n */\n\ncommands.isLocked = function () {\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback;\n\n  this._jsonWireCall({\n    method: 'POST',\n    relPath: '/appium/device/is_locked',\n    cb: callbackWithData(cb)\n  });\n};\n/**\n * deviceKeyEvent(keycode, metastate, cb) -> cb(err)\n * metastate is optional. DEPRECATED: use pressKeycode instead\n *\n * @jsonWire POST /session/:sessionId/appium/device/keyevent\n */\n\n\ncommands.deviceKeyEvent = function () {\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback,\n      keycode = fargs.all[0],\n      metastate = fargs.all[1];\n  var data = {\n    keycode: keycode\n  };\n\n  if (metastate) {\n    data.metastate = metastate;\n  }\n\n  this._jsonWireCall({\n    method: 'POST',\n    relPath: '/appium/device/keyevent',\n    data: data,\n    cb: simpleCallback(cb)\n  });\n};\n/**\n * pressDeviceKey(keycode, metastate, cb) -> cb(err)\n * metastate is optional. DEPRECATED: use pressKeycode instead\n *\n * @jsonWire POST /session/:sessionId/appium/device/keyevent\n */\n\n\ncommands.pressDeviceKey = commands.deviceKeyEvent;\n/**\n * pressKeycode(keycode, metastate, cb) -> cb(err)\n * metastate is optional.\n * flags is optional for native android flag. Can set multiple falsg as Array. Flags have `FLAG_` prefix in http://developer.android.com/reference/android/view/KeyEvent.html\n * e.g.: FLAG_CANCELED is `32` or `0x00000020`\n *\n * @jsonWire POST /session/:sessionId/appium/device/press_keycode\n */\n\ncommands.pressKeycode = function () {\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback,\n      keycode = fargs.all[0],\n      metastate = fargs.all[1],\n      flags = fargs.all[2];\n  var data = {\n    keycode: keycode\n  };\n\n  if (metastate) {\n    data.metastate = metastate;\n  }\n\n  if (flags) {\n    var f = 0;\n    flags.forEach(function (value) {\n      f = f | value;\n    });\n    data.flags = f;\n  }\n\n  this._jsonWireCall({\n    method: 'POST',\n    relPath: '/appium/device/press_keycode',\n    data: data,\n    cb: simpleCallback(cb)\n  });\n};\n/**\n * longPressKeycode(keycode, metastate, cb) -> cb(err)\n * metastate is optional.\n * flags is optional for native android flag. Can set multiple falsg as Array. Flags have `FLAG_` prefix in http://developer.android.com/reference/android/view/KeyEvent.html\n * e.g.: FLAG_CANCELED is `32` or `0x00000020`\n *\n * @jsonWire POST /session/:sessionId/appium/device/long_press_keycode\n */\n\n\ncommands.longPressKeycode = function () {\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback,\n      keycode = fargs.all[0],\n      metastate = fargs.all[1],\n      flags = fargs.all[2];\n  var data = {\n    keycode: keycode\n  };\n\n  if (metastate) {\n    data.metastate = metastate;\n  }\n\n  if (flags) {\n    var f = 0;\n    flags.forEach(function (value) {\n      f = f | value;\n    });\n    data.flags = f;\n  }\n\n  this._jsonWireCall({\n    method: 'POST',\n    relPath: '/appium/device/long_press_keycode',\n    data: data,\n    cb: simpleCallback(cb)\n  });\n};\n/**\n * rotateDevice(element, opts, cb) -> cb(err)\n * rotateDevice(opts, cb) -> cb(err)\n * opts is like the following:\n * {x: 114, y: 198, duration: 5, radius: 3, rotation: 220, touchCount: 2}\n *\n * @jsonWire POST /session/:sessionId/appium/device/rotate\n */\n\n\ncommands.rotateDevice = function () {\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback,\n      element = fargs.all[0],\n      opts = fargs.all[1];\n\n  if (!(element && element.value)) {\n    opts = element;\n    element = null;\n  }\n\n  var data = _.clone(opts);\n\n  if (element) {\n    data.element = element.value.toString();\n  }\n\n  this._jsonWireCall({\n    method: 'POST',\n    relPath: '/appium/device/rotate',\n    data: data,\n    cb: simpleCallback(cb)\n  });\n};\n/**\n * rotate(element, opts, cb) -> cb(err)\n * rotate(opts, cb) -> cb(err)\n * opts is like the following:\n * {x: 114, y: 198, duration: 5, radius: 3, rotation: 220, touchCount: 2}\n *\n * @jsonWire POST /session/:sessionId/appium/device/rotate\n */\n\n\ncommands.rotate = commands.rotateDevice;\n/**\n * getCurrentDeviceActivity(cb) -> cb(err)\n *\n * @jsonWire GET /session/:sessionId/appium/device/current_activity\n */\n\ncommands.getCurrentDeviceActivity = function () {\n  var cb = findCallback(arguments);\n\n  this._jsonWireCall({\n    method: 'GET',\n    relPath: '/appium/device/current_activity',\n    cb: callbackWithData(cb, this)\n  });\n};\n/**\n * getCurrentActivity(cb) -> cb(err)\n *\n * @jsonWire GET /session/:sessionId/appium/device/current_activity\n */\n\n\ncommands.getCurrentActivity = commands.getCurrentDeviceActivity;\n/**\n * getCurrentPackage(cb) -> cb(err)\n *\n * @jsonWire GET /session/:sessionId/appium/device/current_package\n */\n\ncommands.getCurrentPackage = function () {\n  var cb = findCallback(arguments);\n\n  this._jsonWireCall({\n    method: 'GET',\n    relPath: '/appium/device/current_package',\n    cb: callbackWithData(cb, this)\n  });\n};\n/**\n * installAppOnDevice(appPath, cb) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/appium/device/install_app\n */\n\n\ncommands.installAppOnDevice = function () {\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback,\n      appPath = fargs.all[0];\n\n  this._jsonWireCall({\n    method: 'POST',\n    relPath: '/appium/device/install_app',\n    data: {\n      appPath: appPath\n    },\n    cb: simpleCallback(cb)\n  });\n};\n/**\n * installApp(appPath, cb) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/appium/device/install_app\n */\n\n\ncommands.installApp = commands.installAppOnDevice;\n/**\n * removeAppFromDevice(appId, cb) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/appium/device/remove_app\n */\n\ncommands.removeAppFromDevice = function () {\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback,\n      appId = fargs.all[0];\n\n  this._jsonWireCall({\n    method: 'POST',\n    relPath: '/appium/device/remove_app',\n    data: {\n      appId: appId\n    },\n    cb: simpleCallback(cb)\n  });\n};\n/**\n * removeApp(appId, cb) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/appium/device/remove_app\n */\n\n\ncommands.removeApp = commands.removeAppFromDevice;\n/**\n * isAppInstalledOnDevice(bundleId, cb) -> cb(isInstalled, err)\n *\n * @jsonWire POST /session/:sessionId/appium/device/app_installed\n */\n\ncommands.isAppInstalledOnDevice = function () {\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback,\n      bundleId = fargs.all[0];\n\n  this._jsonWireCall({\n    method: 'POST',\n    relPath: '/appium/device/app_installed',\n    data: {\n      bundleId: bundleId\n    },\n    cb: callbackWithData(cb, this)\n  });\n};\n/**\n * isAppInstalled(bundleId, cb) -> cb(isInstalled, err)\n *\n * @jsonWire POST /session/:sessionId/appium/device/app_installed\n */\n\n\ncommands.isAppInstalled = commands.isAppInstalledOnDevice;\n/**\n * isKeyboardShown() -> cb(err)\n *\n * @jsonWire GET /session/:sessionId/appium/device/is_keyboard_shown\n */\n\ncommands.isKeyboardShown = function () {\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback;\n\n  this._jsonWireCall({\n    method: 'GET',\n    relPath: '/appium/device/is_keyboard_shown',\n    cb: callbackWithData(cb)\n  });\n};\n/**\n * hideKeyboard() -> cb(err)\n * hideKeyboard(keyName, cb) -> cb(err)\n * hideKeyboard({strategy: 'pressKey', key:'<key>'}) -> cb(err)\n * hideKeyboard({strategy: 'tapOutside'}) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/appium/device/hide_keyboard\n */\n\n\ncommands.hideDeviceKeyboard = function () {\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback;\n  var data = {};\n\n  switch (typeof fargs.all[0]) {\n    case 'string':\n      data = {\n        keyName: fargs.all[0]\n      };\n      break;\n\n    case 'object':\n      data = fargs.all[0];\n      break;\n\n    default:\n      data = null;\n  }\n\n  this._jsonWireCall({\n    method: 'POST',\n    relPath: '/appium/device/hide_keyboard',\n    data: data,\n    cb: simpleCallback(cb)\n  });\n};\n\ncommands.hideKeyboard = commands.hideDeviceKeyboard;\n/**\n * pushFileToDevice(pathOnDevice, base64Data, cb) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/appium/device/push_file\n */\n\ncommands.pushFileToDevice = function () {\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback,\n      pathOnDevice = fargs.all[0],\n      base64Data = fargs.all[1];\n\n  this._jsonWireCall({\n    method: 'POST',\n    relPath: '/appium/device/push_file',\n    data: {\n      path: pathOnDevice,\n      data: base64Data\n    },\n    cb: simpleCallback(cb)\n  });\n};\n/**\n * pushFile(pathOnDevice, base64Data, cb) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/appium/device/push_file\n */\n\n\ncommands.pushFile = commands.pushFileToDevice;\n/**\n * pullFileFromDevice(pathOnDevice, cb) -> cb(base64EncodedData, err)\n *\n * @jsonWire POST /session/:sessionId/appium/device/pull_file\n */\n\ncommands.pullFileFromDevice = function () {\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback,\n      pathOnDevice = fargs.all[0];\n\n  this._jsonWireCall({\n    method: 'POST',\n    relPath: '/appium/device/pull_file',\n    data: {\n      path: pathOnDevice\n    },\n    cb: callbackWithData(cb, this)\n  });\n};\n/**\n * pullFile(pathOnDevice, cb) -> cb(base64EncodedData, err)\n *\n * @jsonWire POST /session/:sessionId/appium/device/pull_file\n */\n\n\ncommands.pullFile = commands.pullFileFromDevice;\n/**\n * pullFolderFromDevice(pathOnDevice, cb) -> cb(base64EncodedData, err)\n *\n * @jsonWire POST /session/:sessionId/appium/device/pull_folder\n */\n\ncommands.pullFolderFromDevice = function () {\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback,\n      pathOnDevice = fargs.all[0];\n\n  this._jsonWireCall({\n    method: 'POST',\n    relPath: '/appium/device/pull_folder',\n    data: {\n      path: pathOnDevice\n    },\n    cb: callbackWithData(cb, this)\n  });\n};\n/**\n * pullFolder(pathOnDevice, cb) -> cb(base64EncodedData, err)\n *\n * @jsonWire POST /session/:sessionId/appium/device/pull_folder\n */\n\n\ncommands.pullFolder = commands.pullFolderFromDevice;\n/**\n * toggleAirplaneModeOnDevice(cb) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/appium/device/toggle_airplane_mode\n */\n\ncommands.toggleAirplaneModeOnDevice = function () {\n  var cb = findCallback(arguments);\n\n  this._jsonWireCall({\n    method: 'POST',\n    relPath: '/appium/device/toggle_airplane_mode',\n    cb: simpleCallback(cb)\n  });\n};\n/**\n * toggleAirplaneMode(cb) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/appium/device/toggle_airplane_mode\n */\n\n\ncommands.toggleAirplaneMode = commands.toggleAirplaneModeOnDevice;\n/**\n * toggleFlightMode(cb) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/appium/device/toggle_airplane_mode\n */\n\ncommands.toggleFlightMode = commands.toggleAirplaneModeOnDevice;\n/**\n * toggleWiFiOnDevice(cb) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/appium/device/toggle_wifi\n */\n\ncommands.toggleWiFiOnDevice = function () {\n  var cb = findCallback(arguments);\n\n  this._jsonWireCall({\n    method: 'POST',\n    relPath: '/appium/device/toggle_wifi',\n    cb: simpleCallback(cb)\n  });\n};\n/**\n * toggleWiFi(cb) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/appium/device/toggle_wifi\n */\n\n\ncommands.toggleWiFi = commands.toggleWiFiOnDevice;\n/**\n * toggleLocationServicesOnDevice(cb) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/appium/device/toggle_location_services\n */\n\ncommands.toggleLocationServicesOnDevice = function () {\n  var cb = findCallback(arguments);\n\n  this._jsonWireCall({\n    method: 'POST',\n    relPath: '/appium/device/toggle_location_services',\n    cb: simpleCallback(cb)\n  });\n};\n/**\n * toggleLocationServices(cb) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/appium/device/toggle_location_services\n */\n\n\ncommands.toggleLocationServices = commands.toggleLocationServicesOnDevice;\n/**\n * toggleDataOnDevice(cb) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/appium/device/toggle_data\n */\n\ncommands.toggleDataOnDevice = function () {\n  var cb = findCallback(arguments);\n\n  this._jsonWireCall({\n    method: 'POST',\n    relPath: '/appium/device/toggle_data',\n    cb: simpleCallback(cb)\n  });\n};\n/**\n * toggleData(cb) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/appium/device/toggle_data\n */\n\n\ncommands.toggleData = commands.toggleDataOnDevice;\n/**\n * launchApp(cb) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/appium/app/launch\n */\n\ncommands.launchApp = function () {\n  var cb = findCallback(arguments);\n\n  this._jsonWireCall({\n    method: 'POST',\n    relPath: '/appium/app/launch',\n    cb: simpleCallback(cb)\n  });\n};\n/**\n * closeApp(cb) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/appium/app/close\n */\n\n\ncommands.closeApp = function () {\n  var cb = findCallback(arguments);\n\n  this._jsonWireCall({\n    method: 'POST',\n    relPath: '/appium/app/close',\n    cb: simpleCallback(cb)\n  });\n};\n/**\n * resetApp(cb) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/appium/app/reset\n */\n\n\ncommands.resetApp = function () {\n  var cb = findCallback(arguments);\n\n  this._jsonWireCall({\n    method: 'POST',\n    relPath: '/appium/app/reset',\n    cb: simpleCallback(cb)\n  });\n};\n/**\n * backgroundApp(seconds, cb) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/appium/app/background\n */\n\n\ncommands.backgroundApp = function () {\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback,\n      seconds = fargs.all[0];\n\n  this._jsonWireCall({\n    method: 'POST',\n    relPath: '/appium/app/background',\n    data: {\n      seconds: seconds\n    },\n    cb: simpleCallback(cb)\n  });\n};\n/**\n * endTestCoverageForApp(intentToBroadcast, pathOnDevice) -> cb(base64Data,err)\n *\n * @jsonWire POST /session/:sessionId/appium/app/end_test_coverage\n */\n\n\ncommands.endTestCoverageForApp = function () {\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback,\n      intent = fargs.all[0],\n      path = fargs.all[1];\n\n  this._jsonWireCall({\n    method: 'POST',\n    relPath: '/appium/app/end_test_coverage',\n    data: {\n      intent: intent,\n      path: path\n    },\n    cb: callbackWithData(cb, this)\n  });\n};\n/**\n * endTestCoverage(intentToBroadcast, pathOnDevice) -> cb(base64Data,err)\n *\n * @jsonWire POST /session/:sessionId/appium/app/end_test_coverage\n */\n\n\ncommands.endTestCoverage = commands.endTestCoverageForApp;\n/**\n * endCoverage(intentToBroadcast, pathOnDevice) -> cb(base64Data,err)\n *\n * @jsonWire POST /session/:sessionId/appium/app/end_test_coverage\n */\n\ncommands.endCoverage = commands.endTestCoverageForApp;\n/**\n * complexFindInApp(selector) -> cb(element(s))\n * Return a single element or an elements array depending on\n * selector\n *\n * @jsonWire POST /session/:sessionId/appium/app/complex_find\n */\n\ncommands.complexFindInApp = function () {\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback,\n      selector = fargs.all[0];\n\n  this._jsonWireCall({\n    method: 'POST',\n    relPath: '/appium/app/complex_find',\n    data: {\n      selector: selector\n    },\n    cb: elementOrElementsCallback(cb, this)\n  });\n};\n/**\n * complexFind(selector) -> cb(element(s))\n * Return a single element or an elements array depending on\n * selector\n *\n * @jsonWire POST /session/:sessionId/appium/app/complex_find\n */\n\n\ncommands.complexFind = commands.complexFindInApp;\n/**\n * getAppStrings(cb) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/appium/app/strings\n */\n\ncommands.getAppStrings = function () {\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback,\n      language = fargs.all[0];\n\n  this._jsonWireCall({\n    method: 'POST',\n    relPath: '/appium/app/strings',\n    data: {\n      language: language\n    },\n    cb: callbackWithData(cb, this)\n  });\n};\n/**\n * setImmediateValueInApp(element, value, cb) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/appium/element/:elementId?/value\n */\n\n\ncommands.setImmediateValueInApp = function (element, value) {\n  var cb = findCallback(arguments);\n\n  this._jsonWireCall({\n    method: 'POST',\n    relPath: '/appium/element/' + element.value.toString() + '/value',\n    data: {\n      value: value\n    },\n    cb: simpleCallback(cb)\n  });\n};\n/**\n * startActivity(options, cb) -> cb(err)\n * Start an arbitrary Android activity during a session. The 'options' parameter should\n * implement the interface {appPackage, appActivity, [appWaitPackage], [appWaitActivity]}.\n *\n * @jsonWire POST /session/:sessionId/appium/device/start_activity\n */\n\n\ncommands.startActivity = function () {\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback,\n      options = fargs.all[0];\n\n  this._jsonWireCall({\n    method: 'POST',\n    relPath: '/appium/device/start_activity',\n    data: options,\n    cb: simpleCallback(cb)\n  });\n};\n/**\n * setImmediateValue(element, value, cb) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/appium/element/:elementId?/value\n */\n\n\ncommands.setImmediateValue = commands.setImmediateValueInApp;\n/**\n * setNetworkConnection(type, cb) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/network_connection\n */\n\ncommands.setNetworkConnection = function () {\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback;\n\n  this._jsonWireCall({\n    method: 'POST',\n    relPath: '/network_connection',\n    data: {\n      parameters: {\n        type: fargs.all[0]\n      }\n    },\n    cb: callbackWithData(cb, this)\n  });\n};\n/**\n * getNetworkConnection(cb) -> cb(err, networkConnectionInfo)\n *\n * @jsonWire GET /session/:sessionId/network_connection\n */\n\n\ncommands.getNetworkConnection = function () {\n  var cb = findCallback(arguments);\n\n  this._jsonWireCall({\n    method: 'GET',\n    relPath: '/network_connection',\n    cb: callbackWithData(cb, this)\n  });\n};\n/**\n * openNotifications(cb) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/appium/device/open_notifications\n */\n\n\ncommands.openNotifications = function () {\n  var cb = findCallback(arguments);\n\n  this._jsonWireCall({\n    method: 'POST',\n    relPath: '/appium/device/open_notifications',\n    cb: simpleCallback(cb, this)\n  });\n};\n/**\n * settings(cb) -> cb(err, settingsObject)\n *\n * @jsonWire GET /session/:sessionId/appium/settings\n */\n\n\ncommands.settings = function () {\n  var cb = findCallback(arguments);\n\n  this._jsonWireCall({\n    method: 'GET',\n    relPath: '/appium/settings',\n    cb: callbackWithData(cb, this)\n  });\n};\n/**\n * updateSettings(settingsObject, cb) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/appium/settings\n */\n\n\ncommands.updateSettings = function () {\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback;\n\n  this._jsonWireCall({\n    method: 'POST',\n    relPath: '/appium/settings',\n    data: {\n      settings: fargs.all[0]\n    },\n    cb: simpleCallback(cb, this)\n  });\n};\n/**\n * availableIMEEngines(cb) -> cb(err, engines)\n *\n * @jsonWire GET /session/:sessionId/ime/available_engines\n */\n\n\ncommands.availableIMEEngines = function () {\n  var cb = findCallback(arguments);\n\n  this._jsonWireCall({\n    method: 'GET',\n    relPath: '/ime/available_engines',\n    cb: callbackWithData(cb, this)\n  });\n};\n/**\n * activateIMEEngine(cb, engine) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/ime/activate\n */\n\n\ncommands.activateIMEEngine = function (engine) {\n  var cb = findCallback(arguments);\n\n  this._jsonWireCall({\n    method: 'POST',\n    relPath: '/ime/activate',\n    data: {\n      engine: engine\n    },\n    cb: simpleCallback(cb, this)\n  });\n};\n/**\n * deactivateIMEEngine(cb) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/ime/deactivate\n */\n\n\ncommands.deactivateIMEEngine = function () {\n  var cb = findCallback(arguments);\n\n  this._jsonWireCall({\n    method: 'POST',\n    relPath: '/ime/deactivate',\n    cb: simpleCallback(cb, this)\n  });\n};\n/**\n * activatedIMEEngine(cb) -> cb(err, active)\n *\n * @jsonWire GET /session/:sessionId/ime/activated\n */\n\n\ncommands.isIMEActive = function () {\n  var cb = findCallback(arguments);\n\n  this._jsonWireCall({\n    method: 'GET',\n    relPath: '/ime/activated',\n    cb: callbackWithData(cb, this)\n  });\n};\n/**\n * activeIMEEngine(cb) -> cb(err, activeEngine)\n *\n * @jsonWire GET /session/:sessionId/ime/active_engine\n */\n\n\ncommands.activeIMEEngine = function () {\n  var cb = findCallback(arguments);\n\n  this._jsonWireCall({\n    method: 'GET',\n    relPath: '/ime/active_engine',\n    cb: callbackWithData(cb, this)\n  });\n};\n/**\n * getDeviceTime(cb) -> cb(err, deviceTime)\n *\n * @jsonWire GET /session/:sessionId/appium/device/system_time\n */\n\n\ncommands.getDeviceTime = function () {\n  var cb = findCallback(arguments);\n\n  this._jsonWireCall({\n    method: 'GET',\n    relPath: '/appium/device/system_time',\n    cb: callbackWithData(cb, this)\n  });\n};\n/**\n * touchId(cb) -> cb(err, touchId)\n *\n * @jsonWire POST /session/:sessionId/appium/simulator/touch_id\n */\n\n\ncommands.touchId = function () {\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback,\n      match = fargs.all[0];\n\n  this._jsonWireCall({\n    method: 'POST',\n    relPath: '/appium/simulator/touch_id',\n    cb: callbackWithData(cb, this),\n    data: {\n      match: match\n    }\n  });\n};\n/**\n * touchId(cb) -> cb(err, touchId)\n *\n * @jsonWire POST /session/:sessionId/appium/simulator/touch_id\n */\n\n\ncommands.toggleTouchIdEnrollment = function () {\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback;\n\n  this._jsonWireCall({\n    method: 'POST',\n    relPath: '/appium/simulator/toggle_touch_id_enrollment',\n    cb: callbackWithData(cb, this)\n  });\n};\n/**\n * fingerprint(fingerprintId, cb) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/appium/device/finger_print\n */\n\n\ncommands.fingerprint = function () {\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback,\n      fingerprintId = fargs.all[0];\n  var data = {\n    fingerprintId: fingerprintId\n  };\n\n  this._jsonWireCall({\n    method: 'POST',\n    relPath: '/appium/device/finger_print',\n    data: data,\n    cb: simpleCallback(cb)\n  });\n};\n/**\n * sendSms(phoneNumber, message, cb) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/appium/device/send_sms\n */\n\n\ncommands.sendSms = function () {\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback,\n      phoneNumber = fargs.all[0],\n      message = fargs.all[1];\n  var data = {\n    phoneNumber: phoneNumber,\n    message: message\n  };\n\n  this._jsonWireCall({\n    method: 'POST',\n    relPath: '/appium/device/send_sms',\n    data: data,\n    cb: simpleCallback(cb)\n  });\n};\n/**\n * gsmCall(phoneNumber, action, cb) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/appium/device/gsm_call\n */\n\n\ncommands.gsmCall = function () {\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback,\n      phoneNumber = fargs.all[0],\n      action = fargs.all[1];\n  var data = {\n    phoneNumber: phoneNumber,\n    action: action\n  };\n\n  this._jsonWireCall({\n    method: 'POST',\n    relPath: '/appium/device/gsm_call',\n    data: data,\n    cb: simpleCallback(cb)\n  });\n};\n/**\n * gsmSignal(signalStrength, cb) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/appium/device/gsm_signal\n */\n\n\ncommands.gsmSignal = function () {\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback,\n      signalStrength = fargs.all[0];\n  var data = {\n    signalStrength: signalStrength\n  };\n\n  this._jsonWireCall({\n    method: 'POST',\n    relPath: '/appium/device/gsm_signal',\n    data: data,\n    cb: simpleCallback(cb)\n  });\n};\n\ncommands.gsmSignalStrength = commands.gsmSignal;\n/**\n * gsmVoice(state, cb) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/appium/device/gsm_voice\n */\n\ncommands.gsmVoice = function () {\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback,\n      state = fargs.all[0];\n  var data = {\n    state: state\n  };\n\n  this._jsonWireCall({\n    method: 'POST',\n    relPath: '/appium/device/gsm_voice',\n    data: data,\n    cb: simpleCallback(cb)\n  });\n};\n\ncommands.gsmVoiceState = commands.gsmVoice;\n/**\n * powerCapacity(percent, cb) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/appium/device/power_capacity\n */\n\ncommands.powerCapacity = function () {\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback,\n      percent = fargs.all[0];\n  var data = {\n    percent: percent\n  };\n\n  this._jsonWireCall({\n    method: 'POST',\n    relPath: '/appium/device/power_capacity',\n    data: data,\n    cb: simpleCallback(cb)\n  });\n};\n/**\n * powerAC(state, cb) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/appium/device/power_ac\n */\n\n\ncommands.powerAC = function () {\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback,\n      state = fargs.all[0];\n  var data = {\n    state: state\n  };\n\n  this._jsonWireCall({\n    method: 'POST',\n    relPath: '/appium/device/power_ac',\n    data: data,\n    cb: simpleCallback(cb)\n  });\n};\n\ncommands.powerChargerState = commands.powerAC;\n/**\n * networkSpeed(netspeed, cb) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/appium/device/network_speed\n */\n\ncommands.networkSpeed = function () {\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback,\n      netspeed = fargs.all[0];\n  var data = {\n    netspeed: netspeed\n  };\n\n  this._jsonWireCall({\n    method: 'POST',\n    relPath: '/appium/device/network_speed',\n    data: data,\n    cb: simpleCallback(cb)\n  });\n};\n/**\n * getClipboard(contentType, cb) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/appium/device/get_clipboard\n */\n\n\ncommands.getClipboard = function () {\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback,\n      contentType = fargs.all[0];\n  var data = {\n    contentType: contentType\n  };\n\n  this._jsonWireCall({\n    method: 'POST',\n    relPath: '/appium/device/get_clipboard',\n    data: data,\n    cb: callbackWithData(cb)\n  });\n};\n/**\n * setClipboard(content, contentType, cb) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/appium/device/set_clipboard\n */\n\n\ncommands.setClipboard = function () {\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback,\n      content = fargs.all[0],\n      contentType = fargs.all[1];\n  var data = {\n    content: content,\n    contentType: contentType\n  };\n\n  this._jsonWireCall({\n    method: 'POST',\n    relPath: '/appium/device/set_clipboard',\n    data: data,\n    cb: simpleCallback(cb)\n  });\n};\n/**\n * getSupportedPerformanceDataTypes(cb) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/appium/performanceData/types\n */\n\n\ncommands.getSupportedPerformanceDataTypes = function () {\n  var cb = findCallback(arguments);\n\n  this._jsonWireCall({\n    method: 'POST',\n    relPath: '/appium/performanceData/types',\n    cb: callbackWithData(cb, this)\n  });\n};\n/**\n * getPerformanceData(packageName, dataType, dataReadTimeout, cb) -> cb(err)\n * dataReadTimeout is optional.\n *\n * @jsonWire POST /session/:sessionId/appium/getPerformanceData\n */\n\n\ncommands.getPerformanceData = function () {\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback,\n      packageName = fargs.all[0],\n      dataType = fargs.all[1],\n      dataReadTimeout = fargs.all[2];\n  var data = {\n    packageName: packageName,\n    dataType: dataType\n  };\n\n  if (dataReadTimeout) {\n    data.dataReadTimeout = dataReadTimeout;\n  }\n\n  this._jsonWireCall({\n    method: 'POST',\n    relPath: '/appium/getPerformanceData',\n    data: data,\n    cb: callbackWithData(cb, this)\n  });\n};\n\ncommands.elementsByImageFile = function () {\n  var fargs = utils.varargs(arguments);\n\n  var _this = this;\n\n  var cb = fargs.callback,\n      imgPath = fargs.all[0];\n\n  _this.elementByImageFile(imgPath, true, cb);\n};\n\ncommands.elementByImageFile = function () {\n  var fargs = utils.varargs(arguments);\n\n  var _this = this;\n\n  var cb = fargs.callback,\n      imgPath = fargs.all[0],\n      multiple = fargs.all[1] || false;\n  fs.readFile(imgPath, function (err, fileData) {\n    if (err) {\n      return cb(err);\n    }\n\n    var elFn = multiple ? 'elementsByImage' : 'elementByImage';\n\n    _this[elFn](fileData.toString('base64'), cb);\n  });\n};\n\nmodule.exports = commands;","map":{"version":3,"sources":["/home/yanxiaoyang/react-project/PersonalWebsiteTest/node_modules/wd/lib/commands.js"],"names":["fs","require","url","path","tmp","_","async","__slice","Array","prototype","slice","config","callbacks","callbackWithData","simpleCallback","elementCallback","elementsCallback","elementOrElementsCallback","utils","findCallback","codeToString","deprecator","asserters","Asserter","safeExecuteJsScript","safeExecuteAsyncJsScript","_waitForConditionInBrowserJsScript","commands","init","args","call","arguments","_init","apply","status","cb","_jsonWireCall","method","absPath","sessions","getSessionId","sessionID","getSessionID","execute","fargs","varargs","callback","code","all","relPath","data","script","safeExecute","eval","err","res","safeEval","executeAsync","safeExecuteAsync","altSessionCapabilities","_this","filter","session","id","capabilities","sessionCapabilities","newWindow","name","close","currentContext","context","contextRef","contexts","window","windowRef","frame","frameRef","value","ELEMENT","w3cElementKeyId","windowName","windowHandle","windowHandles","getGeoLocation","setGeoLocation","lat","lon","alt","location","latitude","longitude","altitude","scroll","xOffset","yOffset","xoffset","yoffset","logTypes","log","logType","type","quit","emit","event","message","get","_url","_httpConfig","baseUrl","resolve","refresh","maximize","win","windowSize","width","height","getWindowSize","setWindowSize","getWindowPosition","setWindowPosition","x","y","forward","back","setHttpTimeout","warn","ms","configureHttp","timeout","setHTTPInactivityTimeout","opts","_configureHttp","setImplicitWaitTimeout","setWaitTimeout","setAsyncScriptTimeout","setPageLoadTimeout","setCommandTimeout","element","using","elementOrNull","elements","length","elementIfExists","hasElement","waitFor","asserter","pollFreq","Error","endTime","Date","now","unpromisedAsserter","browser","promise","assert","then","retriable","poll","isFinalCheck","satisfied","indexOf","setTimeout","bind","waitForElement","el","wrappedAsserter","els","seq","satisfiedEl","each","push","series","isUndefined","match","waitForElements","satisfiedEls","waitForVisible","isVisible","takeScreenshot","saveScreenshot","_path","buildFilePath","tmpdir","tmpName","template","fileName","join","extname","filePath","base64Data","writeFile","addMethodsForSuffix","singular","plural","elFuncSuffix","unshift","elFuncFullType","elementFuncTypes","suffix","getTagName","getAttribute","attrName","isDisplayed","displayed","isEnabled","enabled","isSelected","getValue","clickElement","getComputedCss","cssProperty","getComputedCSS","equalsElement","other","_flick1","xspeed","yspeed","swipe","_flick2","speed","flick","tapElement","toString","performTouchAction","touchAction","actions","toJSON","performMultiAction","multiTouchAction","elementId","performW3CActions","releaseW3CActions","moveTo","buttonDown","button","buttonUp","click","doubleclick","keys","isArray","key","idx","text","replace","submit","clear","title","source","_rawText","bodyEl","textPresent","searchText","alertText","alertKeys","acceptAlert","dismissAlert","active","w3c","allCookies","setCookie","cookie","secure","deleteAllCookies","deleteCookie","encodeURIComponent","getOrientation","setOrientation","orientation","toUpperCase","setLocalStorageKey","getLocalStorageKey","removeLocalStorageKey","clearLocalStorage","_isVisible1","display","_isVisible2","queryType","querySelector","getPageIndex","getLocation","getLocationInView","getSize","uploadFile","filepath","archiver","archive","dataList","on","file","Buffer","concat","append","createReadStream","basename","finalize","waitForJsCondition","jsConditionExpr","jsCondition","waitForCondition","waitForConditionInBrowser","conditionExpr","sauceJobUpdate","_sauceJobUpdate","array","sauceJobStatus","hasPassed","passed","sleep","noop","shakeDevice","shake","lockDevice","seconds","lock","unlockDevice","unlock","isLocked","deviceKeyEvent","keycode","metastate","pressDeviceKey","pressKeycode","flags","f","forEach","longPressKeycode","rotateDevice","clone","rotate","getCurrentDeviceActivity","getCurrentActivity","getCurrentPackage","installAppOnDevice","appPath","installApp","removeAppFromDevice","appId","removeApp","isAppInstalledOnDevice","bundleId","isAppInstalled","isKeyboardShown","hideDeviceKeyboard","keyName","hideKeyboard","pushFileToDevice","pathOnDevice","pushFile","pullFileFromDevice","pullFile","pullFolderFromDevice","pullFolder","toggleAirplaneModeOnDevice","toggleAirplaneMode","toggleFlightMode","toggleWiFiOnDevice","toggleWiFi","toggleLocationServicesOnDevice","toggleLocationServices","toggleDataOnDevice","toggleData","launchApp","closeApp","resetApp","backgroundApp","endTestCoverageForApp","intent","endTestCoverage","endCoverage","complexFindInApp","selector","complexFind","getAppStrings","language","setImmediateValueInApp","startActivity","options","setImmediateValue","setNetworkConnection","parameters","getNetworkConnection","openNotifications","settings","updateSettings","availableIMEEngines","activateIMEEngine","engine","deactivateIMEEngine","isIMEActive","activeIMEEngine","getDeviceTime","touchId","toggleTouchIdEnrollment","fingerprint","fingerprintId","sendSms","phoneNumber","gsmCall","action","gsmSignal","signalStrength","gsmSignalStrength","gsmVoice","state","gsmVoiceState","powerCapacity","percent","powerAC","powerChargerState","networkSpeed","netspeed","getClipboard","contentType","setClipboard","content","getSupportedPerformanceDataTypes","getPerformanceData","packageName","dataType","dataReadTimeout","elementsByImageFile","imgPath","elementByImageFile","multiple","readFile","fileData","elFn","module","exports"],"mappings":"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","sourcesContent":["var fs = require(\"fs\"),\n    url = require('url'),\n    path = require('path'),\n    tmp = require('./tmp'),\n    _ = require(\"lodash\"),\n    async = require('async'),\n    __slice = Array.prototype.slice,\n    config = require('./config'),\n    callbacks = require(\"./callbacks\"),\n    callbackWithData = callbacks.callbackWithData,\n    simpleCallback = callbacks.simpleCallback,\n    elementCallback = callbacks.elementCallback,\n    elementsCallback = callbacks.elementsCallback,\n    elementOrElementsCallback = callbacks.elementOrElementsCallback,\n    utils = require(\"./utils\"),\n    findCallback = utils.findCallback,\n    codeToString = utils.codeToString,\n    deprecator = utils.deprecator,\n    asserters = require(\"./asserters\"),\n    Asserter = asserters.Asserter,\n    safeExecuteJsScript = require('../build/safe-execute'),\n    safeExecuteAsyncJsScript = require('../build/safe-execute-async'),\n    _waitForConditionInBrowserJsScript = require('../build/wait-for-cond-in-browser');\n\nvar commands = {};\n\n/**\n * init(desired, cb) -> cb(err, sessionID, capabilities)\n * Initialize the browser. capabilities return may be\n * absent, depending on driver.\n *\n * @jsonWire POST /session\n */\ncommands.init = function() {\n  var args = __slice.call(arguments, 0);\n  this._init.apply(this, args);\n};\n\n/**\n * status(cb) -> cb(err, status)\n *\n * @jsonWire GET /status\n */\ncommands.status = function() {\n  var cb = findCallback(arguments);\n  this._jsonWireCall({\n    method: 'GET'\n    , absPath: 'status'\n    , cb: callbackWithData(cb, this)\n  });\n};\n\n/**\n * sessions(cb) -> cb(err, sessions)\n *\n * @jsonWire GET /sessions\n */\ncommands.sessions = function() {\n  var cb = findCallback(arguments);\n  this._jsonWireCall({\n    method: 'GET'\n    , absPath: 'sessions'\n    , cb: callbackWithData(cb, this)\n  });\n};\n\n/**\n * Retrieves the current session id.\n * getSessionId(cb) -> cb(err, sessionId)\n * getSessionId()\n */\ncommands.getSessionId = function() {\n  var cb = findCallback(arguments);\n  if(cb) { cb(null, this.sessionID); }\n  return this.sessionID;\n};\n\ncommands.getSessionID = commands.getSessionId;\n\n/**\n * execute(code, args, cb) -> cb(err, result)\n * execute(code, cb) -> cb(err, result)\n * args: script argument array (optional)\n *\n * @jsonWire POST /session/:sessionId/execute\n * @docOrder 1\n */\ncommands.execute = function() {\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback,\n      code = fargs.all[0],\n      args = fargs.all[1] || [];\n  code = codeToString(code);\n  this._jsonWireCall({\n    method: 'POST'\n    , relPath: '/execute'\n    , cb: callbackWithData(cb, this)\n    , data: {script: code, args: args}\n  });\n};\n\n/**\n * Safely execute script within an eval block, always returning:\n * safeExecute(code, args, cb) -> cb(err, result)\n * safeExecute(code, cb) -> cb(err, result)\n * args: script argument array (optional)\n *\n * @jsonWire POST /session/:sessionId/execute\n * @docOrder 2\n */\ncommands.safeExecute = function() {\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback,\n      code = fargs.all[0],\n      args = fargs.all[1] || [];\n\n  code = codeToString(code);\n  this._jsonWireCall({\n    method: 'POST'\n    , relPath: '/execute'\n    , cb: callbackWithData(cb, this)\n    , data: {script: safeExecuteJsScript, args: [code, args]}\n  });\n};\n\n/**\n * Evaluate expression (using execute):\n * eval(code, cb) -> cb(err, value)\n *\n * @jsonWire POST /session/:sessionId/execute\n */\n(function() {\n  commands.eval = function(code) {\n    var cb = findCallback(arguments);\n    code = codeToString(code);\n    code = \"return \" + code + \";\";\n    commands.execute.apply(this, [code, function(err, res) {\n      if(err) {return cb(err);}\n      cb(null, res);\n    }]);\n  };\n})();\n\n/**\n * Safely evaluate expression, always returning  (using safeExecute):\n * safeEval(code, cb) -> cb(err, value)\n *\n * @jsonWire POST /session/:sessionId/execute\n */\ncommands.safeEval = function(code) {\n  var cb = findCallback(arguments);\n  code = codeToString(code);\n  commands.safeExecute.apply(this, [code, function(err, res) {\n    if(err) {return cb(err);}\n    cb(null, res);\n  }]);\n};\n\n/**\n * executeAsync(code, args, cb) -> cb(err, result)\n * executeAsync(code, cb) -> cb(err, result)\n * args: script argument array (optional)\n *\n * @jsonWire POST /session/:sessionId/execute_async\n */\n  commands.executeAsync = function() {\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback,\n      code = fargs.all[0],\n      args = fargs.all[1] || [];\n\n  code = codeToString(code);\n  this._jsonWireCall({\n    method: 'POST'\n    , relPath: '/execute_async'\n    , cb: callbackWithData(cb, this)\n    , data: {script: code, args: args}\n  });\n};\n\n/**\n * Safely execute async script within an eval block, always returning:\n * safeExecuteAsync(code, args, cb) -> cb(err, result)\n * safeExecuteAsync(code, cb) -> cb(err, result)\n * args: script argument array (optional)\n *\n * @jsonWire POST /session/:sessionId/execute_async\n */\ncommands.safeExecuteAsync = function() {\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback,\n      code = fargs.all[0],\n      args = fargs.all[1] || [];\n\n  code = codeToString(code);\n  this._jsonWireCall({\n    method: 'POST'\n    , relPath: '/execute_async'\n    , cb: callbackWithData(cb, this)\n    , data: {script: safeExecuteAsyncJsScript , args: [code, args]}\n  });\n};\n\n/**\n * Alternate strategy to get session capabilities from server session list:\n * altSessionCapabilities(cb) -> cb(err, capabilities)\n *\n * @jsonWire GET /sessions\n */\ncommands.altSessionCapabilities = function() {\n  var cb = findCallback(arguments);\n  var _this = this;\n  // looking for the current session\n  commands.sessions.apply(this, [function(err, sessions) {\n    if(err) {\n      cb(err, sessions);\n    } else {\n      sessions = sessions.filter(function(session) {\n        return session.id === _this.sessionID;\n      });\n      cb(null, sessions[0]? sessions[0].capabilities : 0);\n    }\n  }]);\n};\n\n/**\n * sessionCapabilities(cb) -> cb(err, capabilities)\n *\n * @jsonWire GET /session/:sessionId\n */\ncommands.sessionCapabilities = function() {\n  var cb = findCallback(arguments);\n  this._jsonWireCall({\n    method: 'GET'\n    // default url\n    , cb: callbackWithData(cb, this)\n  });\n};\n\n/**\n * Opens a new window (using Javascript window.open):\n * newWindow(url, name, cb) -> cb(err)\n * newWindow(url, cb) -> cb(err)\n * name: optional window name\n * Window can later be accessed by name with the window method,\n * or by getting the last handle returned by the windowHandles method.\n */\ncommands.newWindow = function() {\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback,\n      url =  fargs.all[0],\n      name = fargs.all[1];\n  commands.execute.apply(\n    this,\n    [ \"var url=arguments[0], name=arguments[1]; window.open(url, name);\",\n      [url,name] , cb]);\n};\n\n/**\n * close(cb) -> cb(err)\n *\n * @jsonWire DELETE /session/:sessionId/window\n */\ncommands.close = function() {\n  var cb = findCallback(arguments);\n  this._jsonWireCall({\n    method: 'DELETE'\n    , relPath: '/window'\n    , cb: simpleCallback(cb)\n  });\n};\n\n/**\n * currentContext(cb) -> cb(err)\n *\n * @jsonWire GET /session/:sessionId/context\n */\ncommands.currentContext = function() {\n  var cb = findCallback(arguments);\n  this._jsonWireCall({\n    method: 'GET'\n    , relPath: '/context'\n    , cb: callbackWithData(cb, this)\n  });\n};\n\n/**\n * context(contextRef, cb) -> cb(err, context)\n *\n * @jsonWire POST /session/:sessionId/context\n */\ncommands.context = function(contextRef) {\n  var cb = findCallback(arguments);\n  this._jsonWireCall({\n    method: 'POST'\n    , relPath: '/context'\n    , cb: simpleCallback(cb)\n    , data: { name: contextRef }\n  });\n};\n\n/**\n * contexts(cb) -> cb(err, handle)\n *\n * @jsonWire GET /session/:sessionId/contexts\n */\ncommands.contexts = function() {\n  var cb = findCallback(arguments);\n  this._jsonWireCall({\n    method: 'GET'\n    , relPath: '/contexts'\n    , cb: callbackWithData(cb, this)\n  });\n};\n\n/**\n * window(name, cb) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/window\n */\ncommands.window = function(windowRef) {\n  var cb = findCallback(arguments);\n  this._jsonWireCall({\n    method: 'POST'\n    , relPath: '/window'\n    , cb: simpleCallback(cb)\n    , data: { name: windowRef }\n  });\n};\n\n/**\n * frame(frameRef, cb) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/frame\n */\ncommands.frame = function(frameRef) {\n  var cb = findCallback(arguments);\n  // avoid using this, Webdriver seems very buggy\n  // doesn't work at all with chromedriver\n  if(typeof(frameRef) === 'function'){\n    frameRef = null;\n  }\n  if(frameRef !== null && typeof(frameRef.value) !== \"undefined\"){\n    // we have an element object\n    frameRef = {ELEMENT: frameRef.value};\n    frameRef[utils.w3cElementKeyId] = frameRef.value;\n  }\n  this._jsonWireCall({\n    method: 'POST'\n    , relPath: '/frame'\n    , cb: simpleCallback(cb)\n    , data: { id: frameRef }\n  });\n};\n\n/**\n * windowName(cb) -> cb(err, name)\n */\ncommands.windowName = function() {\n  var cb = findCallback(arguments);\n  commands.eval.apply(this, [\"window.name\", cb]);\n};\n\n/**\n * windowHandle(cb) -> cb(err, handle)\n *\n * @jsonWire GET /session/:sessionId/window_handle\n */\ncommands.windowHandle = function() {\n  var cb = findCallback(arguments);\n  this._jsonWireCall({\n    method: 'GET'\n    , relPath: '/window_handle'\n    , cb: callbackWithData(cb, this)\n  });\n};\n\n/**\n * windowHandles(cb) -> cb(err, arrayOfHandles)\n *\n * @jsonWire GET /session/:sessionId/window_handles\n */\ncommands.windowHandles = function() {\n  var cb = findCallback(arguments);\n  this._jsonWireCall({\n    method: 'GET'\n    , relPath: '/window_handles'\n    , cb: callbackWithData(cb, this)\n  });\n};\n\n/**\n * getGeoLocation(cb) -> cb(err, geoLocationObj)\n *\n * @jsonWire GET /session/:sessionId/location\n */\ncommands.getGeoLocation = function() {\n  var cb = findCallback(arguments);\n  this._jsonWireCall({\n    method: 'GET'\n    , relPath: '/location'\n    , cb: callbackWithData(cb, this)\n  });\n};\n\n/**\n * setGeoLocation(lat, lon, alt, cb) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/location\n */\ncommands.setGeoLocation = function(lat, lon, alt) {\n  var cb = findCallback(arguments);\n  if(typeof(alt) === 'function'){\n    alt = 0;\n  }\n  this._jsonWireCall({\n    method: 'POST'\n    , relPath: '/location'\n    , cb: simpleCallback(cb)\n    , data: {location :{latitude: lat, longitude: lon, altitude: alt }}\n  });\n};\n\n/**\n * scroll(xOffset, yOffset, cb) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/touch/scroll\n */\ncommands.scroll = function(xOffset, yOffset) {\n  var cb = findCallback(arguments);\n  this._jsonWireCall({\n    method: 'POST'\n    , relPath: '/touch/scroll'\n    , cb: simpleCallback(cb, this)\n    , data: { xoffset: xOffset, yoffset: yOffset }\n  });\n};\n\n\n/**\n * logTypes(cb) -> cb(err, arrayOfLogTypes)\n *\n * @jsonWire GET /session/:sessionId/log/types\n */\ncommands.logTypes = function() {\n  var cb = findCallback(arguments);\n  this._jsonWireCall({\n    method: 'GET'\n    , relPath: '/log/types'\n    , cb: callbackWithData(cb, this)\n  });\n};\n\n/**\n * log(logType, cb) -> cb(err, arrayOfLogs)\n *\n * @jsonWire POST /session/:sessionId/log\n */\ncommands.log = function(logType) {\n  var cb = findCallback(arguments);\n  this._jsonWireCall({\n    method: 'POST'\n    , relPath: '/log'\n    , cb: callbackWithData(cb, this)\n    , data: { type: logType }\n  });\n};\n\n/**\n * quit(cb) -> cb(err)\n * Destroy the browser.\n *\n * @jsonWire DELETE /session/:sessionId\n */\ncommands.quit = function() {\n  var cb = findCallback(arguments);\n  this._jsonWireCall({\n    method: 'DELETE'\n    // default url\n    , emit: {event: 'status', message: '\\nEnding your web drivage..\\n'}\n    , cb: simpleCallback(cb)\n  });\n};\n\n/**\n * get(url,cb) -> cb(err)\n * Get a new url.\n *\n * @jsonWire POST /session/:sessionId/url\n */\ncommands.get = function(_url) {\n  if(this._httpConfig.baseUrl) {_url = url.resolve(this._httpConfig.baseUrl, _url); }\n  var cb = findCallback(arguments);\n  this._jsonWireCall({\n    method: 'POST'\n    , relPath: '/url'\n    , data: {'url': _url}\n    , cb: simpleCallback(cb)\n  });\n};\n\n/**\n * refresh(cb) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/refresh\n */\ncommands.refresh = function() {\n  var cb = findCallback(arguments);\n  this._jsonWireCall({\n    method: 'POST'\n    , relPath: '/refresh'\n    , cb: simpleCallback(cb)\n  });\n};\n\n/**\n  * maximize(handle, cb) -> cb(err)\n  *\n  * @jsonWire POST /session/:sessionId/window/:windowHandle/maximize\n */\ncommands.maximize = function(win) {\nvar cb = findCallback(arguments);\nthis._jsonWireCall({\n\tmethod: 'POST'\n\t, relPath: '/window/'+ win + '/maximize'\n\t, cb: simpleCallback(cb)\n\t});\n};\n\n/**\n  * windowSize(handle, width, height, cb) -> cb(err)\n  *\n  * @jsonWire POST /session/:sessionId/window/:windowHandle/size\n */\ncommands.windowSize = function(win, width, height) {\nvar cb = findCallback(arguments);\nthis._jsonWireCall({\n  method: 'POST'\n  , relPath: '/window/'+ win + '/size'\n  , data: {'width':width, 'height':height}\n  , cb: simpleCallback(cb)\n  });\n};\n\n/**\n  * getWindowSize(handle, cb) -> cb(err, size)\n  * getWindowSize(cb) -> cb(err, size)\n  * handle: window handle to get size (optional, default: 'current')\n  *\n  * @jsonWire GET /session/:sessionId/window/:windowHandle/size\n */\ncommands.getWindowSize = function() {\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback,\n      win = fargs.all[0] || 'current';\nthis._jsonWireCall({\n\tmethod: 'GET'\n\t, relPath: '/window/'+ win + '/size'\n\t, cb: callbackWithData(cb, this)\n\t});\n};\n\n/**\n  * setWindowSize(width, height, handle, cb) -> cb(err)\n  * setWindowSize(width, height, cb) -> cb(err)\n  * width: width in pixels to set size to\n  * height: height in pixels to set size to\n  * handle: window handle to set size for (optional, default: 'current')\n  * @jsonWire POST /session/:sessionId/window/:windowHandle/size\n */\ncommands.setWindowSize = function() {\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback,\n      width = fargs.all[0],\n      height = fargs.all[1],\n      win = fargs.all[2] || 'current';\nthis._jsonWireCall({\n\tmethod: 'POST'\n\t, relPath: '/window/'+ win + '/size'\n    , cb: simpleCallback(cb)\n    , data: {width: width, height: height}\n\t});\n};\n\n/**\n  * getWindowPosition(handle, cb) -> cb(err, position)\n  * getWindowPosition(cb) -> cb(err, position)\n  * handle: window handle to get position (optional, default: 'current')\n  *\n  * @jsonWire GET /session/:sessionId/window/:windowHandle/position\n */\ncommands.getWindowPosition = function() {\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback,\n      win = fargs.all[0] || 'current';\n  this._jsonWireCall({\n    method: 'GET'\n    , relPath: '/window/'+ win + '/position'\n    , cb: callbackWithData(cb, this)\n    });\n};\n\n/**\n  * setWindowPosition(x, y, handle, cb) -> cb(err)\n  * setWindowPosition(x, y, cb) -> cb(err)\n  * x: the x-coordinate in pixels to set the window position\n  * y: the y-coordinate in pixels to set the window position\n  * handle: window handle to set position for (optional, default: 'current')\n  * @jsonWire POST /session/:sessionId/window/:windowHandle/position\n */\ncommands.setWindowPosition = function() {\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback,\n      x = fargs.all[0],\n      y = fargs.all[1],\n      win = fargs.all[2] || 'current';\n  this._jsonWireCall({\n    method: 'POST'\n    , relPath: '/window/'+ win + '/position'\n    , cb: simpleCallback(cb)\n    , data: {x: x, y: y}\n  });\n};\n\n/**\n * forward(cb) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/forward\n */\ncommands.forward = function() {\n  var cb = findCallback(arguments);\n  this._jsonWireCall({\n    method: 'POST'\n    , relPath: '/forward'\n    , cb: simpleCallback(cb)\n  });\n};\n\n/**\n * back(cb) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/back\n */\ncommands.back = function() {\n  var cb = findCallback(arguments);\n  this._jsonWireCall({\n    method: 'POST'\n    , relPath: '/back'\n    , cb: simpleCallback(cb)\n  });\n};\n\ncommands.setHttpTimeout = function() {\n  deprecator.warn('setHttpTimeout',\n    'setHttpTimeout/setHTTPInactivityTimeout has been deprecated, use configureHttp instead.');\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback,\n      ms = fargs.all[0];\n  commands.configureHttp( {timeout: ms}, cb );\n};\n\ncommands.setHTTPInactivityTimeout = commands.setHttpTimeout;\n\n/**\n * configureHttp(opts)\n *\n * opts example:\n * {timeout:60000, retries: 3, 'retryDelay': 15, baseUrl='http://example.com/'}\n * more info in README.\n *\n */\ncommands.configureHttp = function() {\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback,\n      opts = fargs.all[0];\n  config._configureHttp(this._httpConfig, opts);\n  if(cb) { cb(null); }\n};\n\n/**\n * setImplicitWaitTimeout(ms, cb) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/timeouts/implicit_wait\n */\ncommands.setImplicitWaitTimeout = function(ms) {\n  var cb = findCallback(arguments);\n  this._jsonWireCall({\n    method: 'POST'\n    , relPath: '/timeouts/implicit_wait'\n    , data: {ms: ms}\n    , cb: simpleCallback(cb)\n  });\n};\n\n// for backward compatibility\ncommands.setWaitTimeout = commands.setImplicitWaitTimeout;\n\n/**\n * setAsyncScriptTimeout(ms, cb) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/timeouts/async_script\n */\ncommands.setAsyncScriptTimeout = function(ms) {\n  var cb = findCallback(arguments);\n  this._jsonWireCall({\n    method: 'POST'\n    , relPath: '/timeouts/async_script'\n    , data: {ms: ms}\n    , cb: simpleCallback(cb)\n  });\n};\n\n/**\n * setPageLoadTimeout(ms, cb) -> cb(err)\n * (use setImplicitWaitTimeout and setAsyncScriptTimeout to set the other timeouts)\n *\n * @jsonWire POST /session/:sessionId/timeouts\n */\ncommands.setPageLoadTimeout = function(ms) {\n  var cb = findCallback(arguments);\n  this._jsonWireCall({\n    method: 'POST'\n    , relPath: '/timeouts'\n    , data: {type: 'page load', ms: ms}\n    , cb: simpleCallback(cb)\n  });\n};\n\n/**\n * setCommandTimeout(ms, cb) -> cb(err)\n * (this is for Appium only)\n * @jsonWire POST /session/:sessionId/timeouts\n */\ncommands.setCommandTimeout = function(ms) {\n  var cb = findCallback(arguments);\n  this._jsonWireCall({\n    method: 'POST'\n    , relPath: '/timeouts'\n    , data: {type: 'command', ms: ms}\n    , cb: simpleCallback(cb)\n  });\n};\n\n/**\n * element(using, value, cb) -> cb(err, element)\n *\n * @jsonWire POST /session/:sessionId/element\n */\ncommands.element = function(using, value) {\n  var cb = findCallback(arguments);\n  this._jsonWireCall({\n    method: 'POST'\n    , relPath: '/element'\n    , data: {using: using, value: value}\n    , cb: elementCallback(cb, this)\n  });\n};\n\n/**\n * Retrieve an element avoiding not found exception and returning null instead:\n * elementOrNull(using, value, cb) -> cb(err, element)\n *\n * @jsonWire POST /session/:sessionId/elements\n * @docOrder 3\n */\ncommands.elementOrNull = function(using, value) {\n  var cb = findCallback(arguments);\n  commands.elements.apply(this, [using, value,\n    function(err, elements) {\n      if(!err) {\n        if(elements.length>0) {cb(null,elements[0]);} else {cb(null,null);}\n      } else {\n        cb(err); }\n    }\n  ]);\n};\n\n/**\n * Retrieve an element avoiding not found exception and returning undefined instead:\n * elementIfExists(using, value, cb) -> cb(err, element)\n *\n * @jsonWire POST /session/:sessionId/elements\n * @docOrder 5\n */\ncommands.elementIfExists = function(using, value) {\n  var cb = findCallback(arguments);\n  commands.elements.apply(this, [using, value,\n    function(err, elements) {\n      if(!err) {\n        if(elements.length>0) {cb(null,elements[0]);} else {cb(null);}\n      } else {\n        cb(err); }\n    }\n  ]);\n};\n\n/**\n * elements(using, value, cb) -> cb(err, elements)\n *\n * @jsonWire POST /session/:sessionId/elements\n * @docOrder 1\n */\ncommands.elements = function(using, value) {\n  var cb = findCallback(arguments);\n  this._jsonWireCall({\n    method: 'POST'\n    , relPath: '/elements'\n    , data: {using: using, value: value}\n    , cb: elementsCallback(cb, this)\n  });\n};\n\n/**\n * Check if element exists:\n * hasElement(using, value, cb) -> cb(err, boolean)\n *\n * @jsonWire POST /session/:sessionId/elements\n * @docOrder 7\n */\ncommands.hasElement = function(using, value){\n  var cb = findCallback(arguments);\n  commands.elements.apply( this, [using, value, function(err, elements){\n    if(!err) {\n      cb(null, elements.length > 0 );\n    } else {\n      cb(err); }\n  }]);\n};\n\n/**\n * waitFor(asserter, timeout, pollFreq, cb) -> cb(err, return_value)\n * timeout and pollFreq are optional (default 1000ms/200ms)\n * waitFor(opts, cb) -> cb(err)\n * opts with the following fields: timeout, pollFreq, asserter.\n * asserter like: function(browser , cb) -> cb(err, satisfied, return_value)\n */\ncommands.waitFor = function(){\n  var cb = findCallback(arguments);\n  var fargs = utils.varargs(arguments);\n  var opts;\n  // retrieving options\n  if(typeof fargs.all[0] === 'object' && !(fargs.all[0] instanceof Asserter)){\n    opts = fargs.all[0];\n  } else\n  {\n    opts = {\n      asserter: fargs.all[0],\n      timeout: fargs.all[1],\n      pollFreq: fargs.all[2]\n    };\n  }\n\n  // default\n  opts.timeout = opts.timeout || 1000;\n  opts.pollFreq = opts.pollFreq || 200;\n\n  if(!opts.asserter) { throw new Error('Missing asserter!'); }\n\n  var _this = this;\n  var endTime = Date.now() + opts.timeout;\n\n  var unpromisedAsserter = new Asserter(\n    function(browser, cb) {\n      var promise = opts.asserter.assert(browser, cb);\n      if(promise && promise.then && typeof promise.then === 'function'){\n        promise.then(\n          function(res) { cb(null, true, res); },\n          function(err) {\n            if(err.retriable) { cb(null, false); }\n            else { throw err; }\n          }\n        );\n      }\n    }\n  );\n\n  function poll(isFinalCheck){\n    unpromisedAsserter.assert(_this, function(err, satisfied, value) {\n      if(err && err.message.indexOf(\"timeout\") === -1) { return cb(err); }\n      if(satisfied) {\n        cb(null, value);\n      } else {\n        if(isFinalCheck) {\n          cb(err || new Error(\"Condition wasn't satisfied!\"));\n        } else if(Date.now() > endTime){\n          // trying one more time for safety\n          setTimeout(poll.bind(null, true) , opts.pollFreq);\n        } else {\n          setTimeout(poll, opts.pollFreq);\n        }\n      }\n    });\n  }\n\n  poll();\n};\n\n/**\n * waitForElement(using, value, asserter, timeout, pollFreq, cb) -> cb(err, el)\n * waitForElement(using, value, timeout, pollFreq, cb) -> cb(err, el)\n * timeout and pollFreq are optional (default 1000ms/200ms)\n * waitForElement(using, value, opts, cb) -> cb(err, el)\n * opts with the following fields: timeout, pollFreq, asserter.\n * asserter like: function(element , cb) -> cb(err, satisfied, el)\n */\ncommands.waitForElement = function(){\n\n  var cb = findCallback(arguments);\n  var fargs = utils.varargs(arguments);\n  var using = fargs.all[0],\n      value = fargs.all[1];\n  var opts;\n\n  // retrieving options\n  if(typeof fargs.all[2] === 'object' && !(fargs.all[2] instanceof Asserter)){\n    opts = fargs.all[2];\n  } else if(fargs.all[2] instanceof Asserter) {\n    opts = {\n      asserter: fargs.all[2],\n      timeout: fargs.all[3],\n      pollFreq: fargs.all[4]\n    };\n  } else {\n    opts = {\n      timeout: fargs.all[2],\n      pollFreq: fargs.all[3]\n    };\n  }\n\n  // default\n  opts.asserter = opts.asserter || new Asserter(function(el, cb) { cb(null, true); });\n\n  var unpromisedAsserter = new Asserter(\n    function(el, cb) {\n      var promise = opts.asserter.assert(el, cb);\n      if(promise && promise.then && typeof promise.then === 'function'){\n        promise.then(\n          function() { cb(null, true); },\n          function(err) {\n            if(err.retriable) { cb(null, false); }\n            else { throw err; }\n          }\n        );\n      }\n    }\n  );\n\n  var wrappedAsserter = new Asserter(\n    function(browser, cb){\n      browser.elements(using, value, function(err, els){\n        if(err) { return cb(err); }\n        var seq = [];\n        var satisfiedEl;\n        _(els).each(function(el) {\n          seq.push(function(cb) {\n            if(satisfiedEl) { return cb(); }\n            unpromisedAsserter.assert(el, function(err, satisfied) {\n              if(err) { return cb(err); }\n              if(satisfied) { satisfiedEl = el; }\n              cb(err);\n            });\n          });\n        });\n        async.series(seq, function(err) {\n            if(err) { return cb(err); }\n            cb(err, !_.isUndefined(satisfiedEl)  , satisfiedEl);\n        });\n      });\n    }\n  );\n\n  commands.waitFor.apply(this,[\n    {\n      asserter: wrappedAsserter,\n      timeout: opts.timeout,\n      pollFreq: opts.pollFreq\n    }, function(err, value) {\n      if(err && err.message && err.message.match(/Condition/)) {\n        cb(new Error(\"Element condition wasn't satisfied!\"));\n      } else {\n        cb(err, value);\n      }\n    }]);\n};\n\n/**\n * waitForElements(using, value, asserter, timeout, pollFreq, cb) -> cb(err, els)\n * waitForElements(using, value, timeout, pollFreq, cb) -> cb(err, els)\n * timeout and pollFreq are optional (default 1000ms/200ms)\n * waitForElements(using, value, opts, cb) -> cb(err, els)\n * opts with the following fields: timeout, pollFreq, asserter.\n * asserter like: function(element , cb) -> cb(err, satisfied, el)\n */\ncommands.waitForElements = function (){\n  var cb = findCallback(arguments);\n  var fargs = utils.varargs(arguments);\n  var using = fargs.all[0],\n      value = fargs.all[1];\n  var opts;\n\n  // retrieving options\n  if (typeof fargs.all[2] === 'object' && !(fargs.all[2] instanceof Asserter)){\n    opts = fargs.all[2];\n  } else if (fargs.all[2] instanceof Asserter) {\n    opts = {\n      asserter: fargs.all[2],\n      timeout: fargs.all[3],\n      pollFreq: fargs.all[4]\n    };\n  } else {\n    opts = {\n      timeout: fargs.all[2],\n      pollFreq: fargs.all[3]\n    };\n  }\n\n  // default\n  opts.asserter = opts.asserter || new Asserter(function(el, cb) { cb(null, true); });\n\n  var unpromisedAsserter = new Asserter(\n    function (el, cb) {\n      var promise = opts.asserter.assert(el, cb);\n      if (promise && promise.then && typeof promise.then === 'function') {\n        promise.then(\n          function() { cb(null, true); },\n          function(err) {\n            if (err.retriable) {\n              cb(null, false);\n            } else {\n              cb(err);\n            }\n          }\n        );\n      }\n    }\n  );\n\n  var wrappedAsserter = new Asserter(\n    function(browser, cb) {\n      browser.elements(using, value, function(err, els){\n        if (err) { return cb(err); }\n        var seq = [];\n        var satisfiedEls = [];\n        _(els).each(function (el) {\n          seq.push(function (cb) {\n            unpromisedAsserter.assert(el, function(err, satisfied) {\n              if(err) { return cb(err); }\n              if(satisfied) { satisfiedEls.push(el); }\n              cb();\n            });\n          });\n        });\n        async.series(seq, function(err) {\n          if(err) { return cb(err); }\n          cb(null, satisfiedEls.length > 0  , satisfiedEls);\n        });\n      });\n    }\n  );\n\n  commands.waitFor.apply(this,[\n    {\n      asserter: wrappedAsserter,\n      timeout: opts.timeout,\n      pollFreq: opts.pollFreq\n    }, function(err, value) {\n      if(err && err.message && err.message.match(/Condition/)) {\n        cb(new Error(\"Element condition wasn't satisfied!\"));\n      } else {\n        cb(err, value);\n      }\n    }]);\n};\n\ncommands.waitForVisible = function(using, value, timeout, pollFreq) {\n  deprecator.warn('waitForVisible',\n    'waitForVisible has been deprecated, use waitForElement + isVisible asserter instead.');\n\n  var cb = findCallback(arguments);\n\n  commands.waitForElement.apply(this, [using, value, asserters.isVisible, timeout, pollFreq, function(err, isVisible) {\n    if(err && err.message && err.message.match(/Element condition wasn't satisfied!/)){\n      cb(new Error(\"Element didn't become visible\"));\n    } else {\n      cb(err, isVisible);\n    }\n  }]);\n};\n\n/**\n * takeScreenshot(cb) -> cb(err, screenshot)\n *\n * @jsonWire GET /session/:sessionId/screenshot\n */\ncommands.takeScreenshot = function() {\n  var cb = findCallback(arguments);\n  this._jsonWireCall({\n    method: 'GET'\n    , relPath: '/screenshot'\n    , cb: callbackWithData(cb, this)\n  });\n};\n\n/**\n * saveScreenshot(path, cb) -> cb(err, filePath)\n *\n * path maybe a full file path, a directory path (finishing with /),\n * the screenshot name, or left blank (will create a file in the system temp dir).\n */\ncommands.saveScreenshot = function() {\n  var _this = this;\n  var cb = findCallback(arguments);\n  var fargs = utils.varargs(arguments);\n  var _path = fargs.all[0];\n\n  function buildFilePath(_path, cb) {\n    if(!_path) { _path = tmp.tmpdir + '/'; }\n    if(_path.match(/.*\\/$/)) {\n      tmp.tmpName( {template: 'screenshot-XXXXXX.png'}, function(err, fileName) {\n        if(err) { return cb(err); }\n        cb(null, path.join( _path , fileName) );\n      });\n    } else {\n      if(path.extname(_path) === '') { _path = _path + '.png'; }\n      cb(null, _path);\n    }\n  }\n\n  buildFilePath(_path, function(err, filePath) {\n    commands.takeScreenshot.apply(_this, [function(err, base64Data) {\n      if(err) { return cb(err); }\n      require(\"fs\").writeFile(filePath, base64Data, 'base64', function(err) {\n        if(err) { return cb(err); }\n        cb(null, filePath);\n      });\n    }]);\n  });\n};\n\n// adding all elementBy... , elementsBy... function\n\nvar addMethodsForSuffix = function(type, singular, plural) {\n  if(singular){\n    /**\n     * elementByClassName(value, cb) -> cb(err, element)\n     * elementByCssSelector(value, cb) -> cb(err, element)\n     * elementById(value, cb) -> cb(err, element)\n     * elementByName(value, cb) -> cb(err, element)\n     * elementByLinkText(value, cb) -> cb(err, element)\n     * elementByPartialLinkText(value, cb) -> cb(err, element)\n     * elementByTagName(value, cb) -> cb(err, element)\n     * elementByXPath(value, cb) -> cb(err, element)\n     * elementByCss(value, cb) -> cb(err, element)\n     * elementByIosUIAutomation(value, cb) -> cb(err, element)\n     * elementByIosClassChain(value, cb) -> cb(err, element)\n     * elementByIosPredicateString(value, cb) -> cb(err, element)\n     * elementByAndroidUIAutomator(value, cb) -> cb(err, element)\n     * elementByAccessibilityId(value, cb) -> cb(err, element)\n     *\n     * @jsonWire POST /session/:sessionId/element\n     */\n    commands['element' + utils.elFuncSuffix(type)] = function() {\n      var args = __slice.call(arguments, 0);\n      args.unshift(utils.elFuncFullType(type));\n      commands.element.apply(this, args);\n    };\n\n    /**\n     * elementByClassNameOrNull(value, cb) -> cb(err, element)\n     * elementByCssSelectorOrNull(value, cb) -> cb(err, element)\n     * elementByIdOrNull(value, cb) -> cb(err, element)\n     * elementByNameOrNull(value, cb) -> cb(err, element)\n     * elementByLinkTextOrNull(value, cb) -> cb(err, element)\n     * elementByPartialLinkTextOrNull(value, cb) -> cb(err, element)\n     * elementByTagNameOrNull(value, cb) -> cb(err, element)\n     * elementByXPathOrNull(value, cb) -> cb(err, element)\n     * elementByCssOrNull(value, cb) -> cb(err, element)\n     * elementByIosUIAutomationOrNull(value, cb) -> cb(err, element)\n     * elementByIosClassChainOrNull(value, cb) -> cb(err, element)\n     * elementByIosPredicateStringOrNull(value, cb) -> cb(err, element)\n     * elementByAndroidUIAutomatorOrNull(value, cb) -> cb(err, element)\n     * elementByAccessibilityIdOrNull(value, cb) -> cb(err, element)\n     *\n     * @jsonWire POST /session/:sessionId/elements\n     * @docOrder 4\n     */\n    commands['element' + utils.elFuncSuffix(type)+ 'OrNull'] = function() {\n      var fargs = utils.varargs(arguments);\n      var cb = fargs.callback;\n      var args = fargs.all;\n      args.unshift(utils.elFuncFullType(type));\n      args.push(\n        function(err, elements) {\n          if(!err) {\n            if(elements.length>0) {cb(null,elements[0]);} else {cb(null,null);}\n          } else {\n            cb(err);\n          }\n        }\n      );\n      commands.elements.apply(this, args );\n    };\n\n    /**\n     * elementByClassNameIfExists(value, cb) -> cb(err, element)\n     * elementByCssSelectorIfExists(value, cb) -> cb(err, element)\n     * elementByIdIfExists(value, cb) -> cb(err, element)\n     * elementByNameIfExists(value, cb) -> cb(err, element)\n     * elementByLinkTextIfExists(value, cb) -> cb(err, element)\n     * elementByPartialLinkTextIfExists(value, cb) -> cb(err, element)\n     * elementByTagNameIfExists(value, cb) -> cb(err, element)\n     * elementByXPathIfExists(value, cb) -> cb(err, element)\n     * elementByCssIfExists(value, cb) -> cb(err, element)\n     * elementByIosUIAutomationIfExists(value, cb) -> cb(err, element)\n     * elementByIosClassChainIfExists(value, cb) -> cb(err, element)\n     * elementByIosPredicateStringIfExists(value, cb) -> cb(err, element)\n     * elementByAndroidUIAutomatorIfExists(value, cb) -> cb(err, element)\n     * elementByAccessibilityIdIfExists(value, cb) -> cb(err, element)\n     *\n     * @jsonWire POST /session/:sessionId/elements\n     * @docOrder 6\n     */\n    commands['element' + utils.elFuncSuffix(type)+ 'IfExists'] = function() {\n      var fargs = utils.varargs(arguments);\n      var cb = fargs.callback;\n      var args = fargs.all;\n      args.unshift(utils.elFuncFullType(type));\n      args.push(\n        function(err, elements) {\n          if(!err) {\n            if(elements.length>0) {cb(null,elements[0]);} else {cb(null);}\n          } else {\n            cb(err); }\n        }\n      );\n      commands.elements.apply(this, args);\n    };\n\n    /**\n     * hasElementByClassName(value, cb) -> cb(err, boolean)\n     * hasElementByCssSelector(value, cb) -> cb(err, boolean)\n     * hasElementById(value, cb) -> cb(err, boolean)\n     * hasElementByName(value, cb) -> cb(err, boolean)\n     * hasElementByLinkText(value, cb) -> cb(err, boolean)\n     * hasElementByPartialLinkText(value, cb) -> cb(err, boolean)\n     * hasElementByTagName(value, cb) -> cb(err, boolean)\n     * hasElementByXPath(value, cb) -> cb(err, boolean)\n     * hasElementByCss(value, cb) -> cb(err, boolean)\n     * hasElementByIosUIAutomation(value, cb) -> cb(err, boolean)\n     * hasElementByIosClassChain(value, cb) -> cb(err, boolean)\n     * hasElementByIosPredicateString(value, cb) -> cb(err, boolean)\n     * hasElementByAndroidUIAutomator(value, cb) -> cb(err, boolean)\n     * hasElementByAccessibilityId(value, cb) -> cb(err, boolean)\n     *\n     * @jsonWire POST /session/:sessionId/elements\n     * @docOrder 8\n     */\n    commands['hasElement' + utils.elFuncSuffix(type)] = function() {\n      var args = __slice.call(arguments, 0);\n      args.unshift(utils.elFuncFullType(type));\n      commands.hasElement.apply(this, args);\n    };\n\n    /**\n     * waitForElementByClassName(value, asserter, timeout, pollFreq, cb) -> cb(err, el)\n     * waitForElementByCssSelector(value, asserter, timeout, pollFreq, cb) -> cb(err, el)\n     * waitForElementById(value, asserter, timeout, pollFreq, cb) -> cb(err, el)\n     * waitForElementByName(value, asserter, timeout, pollFreq, cb) -> cb(err, el)\n     * waitForElementByLinkText(value, asserter, timeout, pollFreq, cb) -> cb(err, el)\n     * waitForElementByPartialLinkText(value, asserter, timeout, pollFreq, cb) -> cb(err, el)\n     * waitForElementByTagName(value, asserter, timeout, pollFreq, cb) -> cb(err, el)\n     * waitForElementByXPath(value, asserter, timeout, pollFreq, cb) -> cb(err, el)\n     * waitForElementByCss(value, asserter, timeout, pollFreq, cb) -> cb(err, el)\n     * waitForElementByIosUIAutomation(value, asserter, timeout, pollFreq, cb) -> cb(err, el)\n     * waitForElementByIosClassChain(value, asserter, timeout, pollFreq, cb) -> cb(err, el)\n     * waitForElementByIosPredicateString(value, asserter, timeout, pollFreq, cb) -> cb(err, el)\n     * waitForElementByAndroidUIAutomator(value, asserter, timeout, pollFreq, cb) -> cb(err, el)\n     * waitForElementByAccessibilityId(value, asserter, timeout, pollFreq, cb) -> cb(err, el)\n     * asserter, timeout, pollFreq are optional, opts may be passed instead,\n     * as in waitForElement.\n     */\n    commands['waitForElement' + utils.elFuncSuffix(type)] = function() {\n      var args = __slice.call(arguments, 0);\n      args.unshift(utils.elFuncFullType(type));\n      commands.waitForElement.apply(this, args);\n    };\n\n    /**\n     * waitForElementsByClassName(value, asserter, timeout, pollFreq, cb) -> cb(err, els)\n     * waitForElementsByCssSelector(value, asserter, timeout, pollFreq, cb) -> cb(err, els)\n     * waitForElementsById(value, asserter, timeout, pollFreq, cb) -> cb(err, els)\n     * waitForElementsByName(value, asserter, timeout, pollFreq, cb) -> cb(err, els)\n     * waitForElementsByLinkText(value, asserter, timeout, pollFreq, cb) -> cb(err, els)\n     * waitForElementsByPartialLinkText(value, asserter, timeout, pollFreq, cb) -> cb(err, els)\n     * waitForElementsByTagName(value, asserter, timeout, pollFreq, cb) -> cb(err, els)\n     * waitForElementsByXPath(value, asserter, timeout, pollFreq, cb) -> cb(err, els)\n     * waitForElementsByCss(value, asserter, timeout, pollFreq, cb) -> cb(err, els)\n     * waitForElementsByIosUIAutomation(value, asserter, timeout, pollFreq, cb) -> cb(err, el)\n     * waitForElementsByIosClassChain(value, asserter, timeout, pollFreq, cb) -> cb(err, el)\n     * waitForElementsByIosPredicateString(value, asserter, timeout, pollFreq, cb) -> cb(err, el)\n     * waitForElementsByAndroidUIAutomator(value, asserter, timeout, pollFreq, cb) -> cb(err, el)\n     * waitForElementsByAccessibilityId(value, asserter, timeout, pollFreq, cb) -> cb(err, el)\n     * asserter, timeout, pollFreq are optional, opts may be passed instead,\n     * as in waitForElements.\n     */\n    commands['waitForElements' + utils.elFuncSuffix(type)] = function() {\n      var args = __slice.call(arguments, 0);\n      args.unshift(utils.elFuncFullType(type));\n      commands.waitForElements.apply(this, args);\n    };\n\n    commands['waitForVisible' + utils.elFuncSuffix(type)] = function() {\n      var args = __slice.call(arguments, 0);\n      args.unshift(utils.elFuncFullType(type));\n      commands.waitForVisible.apply(this, args);\n    };\n\n    /**\n     * elementsByClassName(value, cb) -> cb(err, elements)\n     * elementsByCssSelector(value, cb) -> cb(err, elements)\n     * elementsById(value, cb) -> cb(err, elements)\n     * elementsByName(value, cb) -> cb(err, elements)\n     * elementsByLinkText(value, cb) -> cb(err, elements)\n     * elementsByPartialLinkText(value, cb) -> cb(err, elements)\n     * elementsByTagName(value, cb) -> cb(err, elements)\n     * elementsByXPath(value, cb) -> cb(err, elements)\n     * elementsByCss(value, cb) -> cb(err, elements)\n     * elementsByIosUIAutomation(value, cb) -> cb(err, elements)\n     * elementsByIosClassChain(value, cb) -> cb(err, elements)\n     * elementsByIosPredicateString(value, cb) -> cb(err, elements)\n     * elementsByAndroidUIAutomator(value, cb) -> cb(err, elements)\n     * elementsByAccessibilityId(value, cb) -> cb(err, elements)\n     *\n     * @jsonWire POST /session/:sessionId/elements\n     * @docOrder 2\n     */\n  }\n  if(plural){\n    commands['elements' + utils.elFuncSuffix(type)] = function() {\n      var args = __slice.call(arguments, 0);\n      args.unshift(utils.elFuncFullType(type));\n      commands.elements.apply(this, args);\n    };\n  }\n};\n\n_.each(utils.elementFuncTypes, function(suffix) {\n  addMethodsForSuffix(suffix, true, true);\n});\n\n/**\n * getTagName(element, cb) -> cb(err, name)\n *\n * @jsonWire GET /session/:sessionId/element/:id/name\n */\ncommands.getTagName = function(element) {\n  var cb = findCallback(arguments);\n  this._jsonWireCall({\n    method: 'GET'\n    , relPath: '/element/' + element + '/name'\n    , cb: callbackWithData(cb, this)\n  });\n};\n\n/**\n * getAttribute(element, attrName, cb) -> cb(err, value)\n *\n * @jsonWire GET /session/:sessionId/element/:id/attribute/:name\n * @docOrder 1\n */\ncommands.getAttribute = function() {\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback,\n      element = fargs.all[0],\n      attrName = fargs.all[1];\n  if(!element) { throw new Error('Missing element.'); }\n  if(!attrName) { throw new Error('Missing attribute name.'); }\n  this._jsonWireCall({\n    method: 'GET'\n    , relPath: '/element/' + element + '/attribute/' + attrName\n    , cb: callbackWithData(cb, this)\n  });\n};\n\n/**\n * isDisplayed(element, cb) -> cb(err, displayed)\n *\n * @jsonWire GET /session/:sessionId/element/:id/displayed\n */\ncommands.isDisplayed = function(element) {\n  var cb = findCallback(arguments);\n  this._jsonWireCall({\n    method: 'GET'\n    , relPath: '/element/' + element + '/displayed'\n    , cb: callbackWithData(cb, this)\n  });\n};\n\ncommands.displayed = commands.isDisplayed;\n\n/**\n  * isEnabled(element, cb) -> cb(err, enabled)\n  *\n  * @jsonWire GET /session/:sessionId/element/:id/enabled\n  */\ncommands.isEnabled = function(element) {\n  var cb = findCallback(arguments);\n  this._jsonWireCall({\n    method: 'GET'\n    , relPath: '/element/' + element + '/enabled'\n    , cb: callbackWithData(cb, this)\n  });\n};\n\ncommands.enabled = commands.isEnabled;\n\n/**\n * isSelected(element, cb) -> cb(err, selected)\n *\n * @jsonWire GET /session/:sessionId/element/:id/selected\n */\ncommands.isSelected = function(element) {\n  var cb = findCallback(arguments);\n  this._jsonWireCall({\n    method: 'GET'\n    , relPath: '/element/' + element + '/selected'\n    , cb: callbackWithData(cb, this)\n  });\n};\n\n// commands.selected = commands.isSelected;\n\n/**\n * Get element value (in value attribute):\n * getValue(element, cb) -> cb(err, value)\n *\n * @jsonWire GET /session/:sessionId/element/:id/attribute/:name\n * @docOrder 3\n */\ncommands.getValue = function() {\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback,\n      element = fargs.all[0];\n  if(!element) { throw new Error('Missing element.'); }\n  commands.getAttribute.apply(this, [element, 'value', cb]);\n};\n\n/**\n * clickElement(element, cb) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/element/:id/click\n */\ncommands.clickElement = function(element) {\n  var cb = findCallback(arguments);\n  this._jsonWireCall({\n    method: 'POST'\n    , relPath: '/element/' + element + '/click'\n    , cb: simpleCallback(cb)\n  });\n};\n\n/**\n * getComputedCss(element, cssProperty , cb) -> cb(err, value)\n *\n * @jsonWire GET /session/:sessionId/element/:id/css/:propertyName\n */\ncommands.getComputedCss = function(element, cssProperty) {\n  var cb = findCallback(arguments);\n  this._jsonWireCall({\n    method: 'GET'\n    , relPath: '/element/' + element + '/css/' + cssProperty\n    , cb: callbackWithData(cb, this)\n  });\n};\n\ncommands.getComputedCSS = commands.getComputedCss;\n\n/**\n * equalsElement(element, other , cb) -> cb(err, value)\n *\n * @jsonWire GET /session/:sessionId/element/:id/equals/:other\n */\ncommands.equalsElement = function(element, other) {\n  var cb = findCallback(arguments);\n  this._jsonWireCall({\n    method: 'GET'\n    , relPath: '/element/' + element + '/equals/' + other\n    , cb: callbackWithData(cb, this)\n  });\n};\n\nvar _flick1 = function(){\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback,\n      xspeed = fargs.all[0],\n      yspeed = fargs.all[1],\n      swipe = fargs.all[2];\n\n  var data = { xspeed: xspeed, yspeed: yspeed };\n  if (swipe) {\n    data.swipe = swipe;\n  }\n\n  this._jsonWireCall({\n    method: 'POST'\n    , relPath: '/touch/flick'\n    , data: data\n    , cb: simpleCallback(cb)\n  });\n};\n\nvar _flick2 = function() {\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback,\n      element = fargs.all[0],\n      xoffset = fargs.all[1],\n      yoffset = fargs.all[2],\n      speed = fargs.all[3];\n\n  this._jsonWireCall({\n    method: 'POST'\n    , relPath: '/touch/flick'\n    , data: { element: element, xoffset: xoffset, yoffset: yoffset, speed: speed }\n    , cb: simpleCallback(cb)\n  });\n};\n\n/**\n * flick(xspeed, yspeed, swipe, cb) -> cb(err)\n * Flicks, starting anywhere on the screen.\n *\n * flick(element, xoffset, yoffset, speed, cb) -> cb(err)\n * Flicks, starting at element center.\n *\n * @jsonWire POST /session/:sessionId/touch/flick\n */\ncommands.flick = function() {\n  var args = __slice.call(arguments, 0);\n  if (args.length <= 4) {\n    _flick1.apply(this, args);\n  } else {\n    _flick2.apply(this, args);\n  }\n};\n\n/**\n * tapElement(element) -> cb(err)\n * Taps element\n *\n * @jsonWire POST /session/:sessionId/touch/click\n */\ncommands.tapElement = function(element, cb) {\n  this._jsonWireCall({\n    method: 'POST'\n    , relPath: '/touch/click'\n    , data: { element: element.value.toString() }\n    , cb: simpleCallback(cb)\n  });\n};\n\n/**\n * performTouchAction(touchAction) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/touch/perform\n */\ncommands.performTouchAction = function () {\n  var _this = this;\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback,\n      touchAction = fargs.all[0];\n\n  try {\n    _this._jsonWireCall({\n      method: 'POST',\n      relPath: '/touch/perform',\n      data: {actions: touchAction.toJSON()},\n      cb: callbackWithData(cb, this)\n    });\n  } catch (err) {\n    return cb(err);\n  }\n};\n\n/**\n * performMultiAction(element, multiAction) -> cb(err, touchStateObjects)\n * performMultiAction(multiAction) -> cb(err, touchStateObjects)\n *\n * @jsonWire POST /session/:sessionId/touch/multi/perform\n */\ncommands.performMultiAction = function () {\n  var _this = this;\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback,\n      element = fargs.all[0],\n      multiTouchAction = fargs.all[1];\n  if(!multiTouchAction) {\n    multiTouchAction = element;\n    element = null;\n  }\n  element =  element || multiTouchAction.element;\n  try {\n    var data = multiTouchAction.toJSON(element);\n    if(element) { data.elementId = element.value.toString(); }\n    _this._jsonWireCall({\n      method: 'POST',\n      relPath: '/touch/multi/perform',\n      data: data,\n      cb: callbackWithData(cb, this)\n    });\n  } catch (err) {\n    return cb(err);\n  }\n};\n\n/**\n * performW3CActions(actions) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/actions\n */\ncommands.performW3CActions = function () {\n  var _this = this;\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback,\n      actions = fargs.all[0];\n  try {\n    var data = actions.toJSON();\n    _this._jsonWireCall({\n      method: 'POST',\n      relPath: '/actions',\n      data: data,\n      cb: callbackWithData(cb, this)\n    });\n  } catch (err) {\n    return cb(err);\n  }\n};\n\ncommands.releaseW3CActions = function () {\n  var _this = this;\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback;\n  try {\n    _this._jsonWireCall({\n      method: 'DELETE',\n      relPath: '/actions',\n      cb: callbackWithData(cb, this)\n    });\n  } catch (err) {\n    return cb(err);\n  }\n\n};\n\n/**\n * moveTo(element, xoffset, yoffset, cb) -> cb(err)\n * Move to element, element may be null, xoffset and y offset\n * are optional.\n *\n * @jsonWire POST /session/:sessionId/moveto\n */\ncommands.moveTo = function() {\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback,\n      element = fargs.all[0],\n      xoffset = fargs.all[1],\n      yoffset = fargs.all[2];\n\n  this._jsonWireCall({\n    method: 'POST'\n    , relPath: '/moveto'\n    , data: { element:\n      element? element.toString(): null,\n      xoffset: xoffset,\n      yoffset: yoffset }\n    , cb: simpleCallback(cb)\n  });\n};\n\n/**\n * buttonDown(button ,cb) -> cb(err)\n * button is optional.\n * {LEFT = 0, MIDDLE = 1 , RIGHT = 2}.\n * LEFT if not specified.\n *\n * @jsonWire POST /session/:sessionId/buttondown\n */\ncommands.buttonDown = function() {\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback,\n      button = fargs.all[0];\n  this._jsonWireCall({\n    method: 'POST'\n    , relPath: '/buttondown'\n    , data: {button: button}\n    , cb: simpleCallback(cb)\n  });\n};\n\n/**\n * buttonUp(button, cb) -> cb(err)\n * button is optional.\n * {LEFT = 0, MIDDLE = 1 , RIGHT = 2}.\n * LEFT if not specified.\n *\n * @jsonWire POST /session/:sessionId/buttonup\n */\ncommands.buttonUp = function() {\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback,\n      button = fargs.all[0];\n  this._jsonWireCall({\n    method: 'POST'\n    , relPath: '/buttonup'\n    , data: {button: button}\n    , cb: simpleCallback(cb)\n  });\n};\n\n/**\n * click(button, cb) -> cb(err)\n * Click on current element.\n * Buttons: {left: 0, middle: 1 , right: 2}\n *\n * @jsonWire POST /session/:sessionId/click\n */\ncommands.click = function() {\n  // parsing args, button optional\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback,\n      button = fargs.all[0];\n\n  this._jsonWireCall({\n    method: 'POST'\n    , relPath: '/click'\n    , data: {button: button}\n    , cb: simpleCallback(cb)\n  });\n};\n\n/**\n * doubleclick(cb) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/doubleclick\n */\ncommands.doubleclick = function() {\n  var cb = findCallback(arguments);\n  this._jsonWireCall({\n    method: 'POST'\n    , relPath: '/doubleclick'\n    , cb: simpleCallback(cb)\n  });\n};\n\n/**\n * type(element, keys, cb) -> cb(err)\n * Type keys (all keys are up at the end of command).\n * special key map: wd.SPECIAL_KEYS (see lib/special-keys.js)\n *\n * @jsonWire POST /session/:sessionId/element/:id/value\n */\ncommands.type = function(element, keys) {\n  var cb = findCallback(arguments);\n  if (!Array.isArray(keys)) {keys = [keys];}\n  // ensure all keystrokes are strings to conform to JSONWP\n  _.each(keys, function(key, idx) {\n    if (typeof key !== \"string\") {\n      keys[idx] = key.toString();\n    }\n  });\n  this._jsonWireCall({\n    method: 'POST'\n    , relPath: '/element/' + element + '/value'\n    , data: {value: keys, text: keys.join('')}\n    , cb: simpleCallback(cb)\n  });\n};\n\ncommands.replace = function(element, keys) {\n  var cb = findCallback(arguments);\n  if (!Array.isArray(keys)) {keys = [keys];}\n  // ensure all keystrokes are strings to conform to JSONWP\n  _.each(keys, function(key, idx) {\n    if (typeof key !== \"string\") {\n      keys[idx] = key.toString();\n    }\n  });\n  this._jsonWireCall({\n    method: 'POST'\n    , relPath: '/appium/element/' + element + '/replace_value'\n    , data: {value: keys}\n    , cb: simpleCallback(cb)\n  });\n};\n\n/**\n * submit(element, cb) -> cb(err)\n * Submit a `FORM` element.\n *\n * @jsonWire POST /session/:sessionId/element/:id/submit\n */\ncommands.submit = function(element) {\n  var cb = findCallback(arguments);\n  this._jsonWireCall({\n    method: 'POST'\n    , relPath: '/element/' + element + '/submit'\n    , cb: simpleCallback(cb)\n  });\n};\n\n/**\n * keys(keys, cb) -> cb(err)\n * Press keys (keys may still be down at the end of command).\n * special key map: wd.SPECIAL_KEYS (see lib/special-keys.js)\n *\n * @jsonWire POST /session/:sessionId/keys\n */\ncommands.keys = function(keys) {\n  var cb = findCallback(arguments);\n  if (!Array.isArray(keys)) {keys = [keys];}\n  // ensure all keystrokes are strings to conform to JSONWP\n  _.each(keys, function(key, idx) {\n    if (typeof key !== \"string\") {\n      keys[idx] = key.toString();\n    }\n  });\n  this._jsonWireCall({\n    method: 'POST'\n    , relPath: '/keys'\n    , data: {value: keys}\n    , cb: simpleCallback(cb)\n  });\n};\n\n/**\n * clear(element, cb) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/element/:id/clear\n */\ncommands.clear = function(element) {\n  var cb = findCallback(arguments);\n  this._jsonWireCall({\n    method: 'POST'\n    , relPath: '/element/' + element + '/clear'\n    , cb: simpleCallback(cb)\n  });\n};\n\n/**\n * title(cb) -> cb(err, title)\n *\n * @jsonWire GET /session/:sessionId/title\n */\ncommands.title = function() {\n  var cb = findCallback(arguments);\n  this._jsonWireCall({\n    method: 'GET'\n    , relPath: '/title'\n    , cb: callbackWithData(cb, this)\n  });\n};\n\n/**\n * source(cb) -> cb(err, source)\n *\n * @jsonWire GET /session/:sessionId/source\n */\ncommands.source = function() {\n  var cb = findCallback(arguments);\n  this._jsonWireCall({\n\t\tmethod: 'GET'\n\t\t, relPath: '/source'\n\t\t, cb: callbackWithData(cb, this)\n\t});\n};\n\n// element must be specified\nvar _rawText = function(element) {\n  var cb = findCallback(arguments);\n  this._jsonWireCall({\n    method: 'GET'\n    , relPath: '/element/' + element + '/text'\n    , cb: callbackWithData(cb, this)\n  });\n};\n\n/**\n * text(element, cb) -> cb(err, text)\n * element: specific element, 'body', or undefined\n *\n * @jsonWire GET /session/:sessionId/element/:id/text\n * @docOrder 1\n */\ncommands.text = function() {\n  var cb = findCallback(arguments);\n  var fargs = utils.varargs(arguments);\n  var element = fargs.all[0];\n  var _this = this;\n  if (!element || element === 'body') {\n    commands.element.apply(this, ['tag name', 'body', function(err, bodyEl) {\n      if (!err) {_rawText.apply(_this, [bodyEl, cb]);} else {cb(err);}\n    }]);\n  }else {\n    _rawText.apply(_this, [element, cb]);\n  }\n};\n\n/**\n * Check if text is present:\n * textPresent(searchText, element, cb) -> cb(err, boolean)\n * element: specific element, 'body', or undefined\n *\n * @jsonWire GET /session/:sessionId/element/:id/text\n * @docOrder 3\n */\ncommands.textPresent = function(searchText, element) {\n  var cb = findCallback(arguments);\n  commands.text.apply(this, [element, function(err, text) {\n    if (err) {\n      cb(err, null);\n    } else {\n      cb(err, text.indexOf(searchText) >= 0);\n    }\n  }]);\n};\n\n/**\n * alertText(cb) -> cb(err, text)\n *\n * @jsonWire GET /session/:sessionId/alert_text\n */\ncommands.alertText = function() {\n  var cb = findCallback(arguments);\n  this._jsonWireCall({\n    method: 'GET'\n    , relPath: '/alert_text'\n    , cb: callbackWithData(cb, this)\n  });\n};\n\n/**\n * alertKeys(keys, cb) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/alert_text\n */\ncommands.alertKeys = function(keys) {\n  var cb = findCallback(arguments);\n  this._jsonWireCall({\n    method: 'POST'\n    , relPath: '/alert_text'\n    , data: {text: keys}\n    , cb: simpleCallback(cb)\n  });\n};\n\n/**\n * acceptAlert(cb) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/accept_alert\n */\ncommands.acceptAlert = function() {\n  var cb = findCallback(arguments);\n  this._jsonWireCall({\n    method: 'POST'\n    , relPath: '/accept_alert'\n    , cb: simpleCallback(cb)\n  });\n};\n\n/**\n * dismissAlert(cb) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/dismiss_alert\n */\ncommands.dismissAlert = function() {\n  var cb = findCallback(arguments);\n  this._jsonWireCall({\n    method: 'POST'\n    , relPath: '/dismiss_alert'\n    , cb: simpleCallback(cb)\n  });\n};\n\n/**\n * active(cb) -> cb(err, element)\n *\n * @jsonWire POST /session/:sessionId/element/active\n */\ncommands.active = function() {\n  var cb = findCallback(arguments);\n  var method = this.w3c ? 'GET' : 'POST';\n  this._jsonWireCall({\n    method: method\n    , relPath: '/element/active'\n    , cb: callbackWithData(cb, this)\n  });\n};\n\n/**\n * url(cb) -> cb(err, url)\n *\n * @jsonWire GET /session/:sessionId/url\n */\ncommands.url = function() {\n  var cb = findCallback(arguments);\n  this._jsonWireCall({\n    method: 'GET'\n    , relPath: '/url'\n    , cb: callbackWithData(cb, this)\n  });\n};\n\n/**\n * allCookies() -> cb(err, cookies)\n *\n * @jsonWire GET /session/:sessionId/cookie\n */\ncommands.allCookies = function() {\n  var cb = findCallback(arguments);\n  this._jsonWireCall({\n    method: 'GET'\n    , relPath: '/cookie'\n    , cb: callbackWithData(cb, this)\n  });\n};\n\n/**\n * setCookie(cookie, cb) -> cb(err)\n * cookie example:\n *  {name:'fruit', value:'apple'}\n * Optional cookie fields:\n *  path, domain, secure, expiry\n *\n * @jsonWire POST /session/:sessionId/cookie\n */\ncommands.setCookie = function(cookie) {\n  var cb = findCallback(arguments);\n  // setting secure otherwise selenium server throws\n  if(cookie){ cookie.secure = cookie.secure || false; }\n\n  this._jsonWireCall({\n    method: 'POST'\n    , relPath: '/cookie'\n    , data: { cookie: cookie }\n    , cb: simpleCallback(cb)\n  });\n};\n\n/**\n * deleteAllCookies(cb) -> cb(err)\n *\n * @jsonWire DELETE /session/:sessionId/cookie\n */\ncommands.deleteAllCookies = function() {\n  var cb = findCallback(arguments);\n  this._jsonWireCall({\n    method: 'DELETE'\n    , relPath: '/cookie'\n    , cb: simpleCallback(cb)\n  });\n};\n\n/**\n * deleteCookie(name, cb) -> cb(err)\n *\n * @jsonWire DELETE /session/:sessionId/cookie/:name\n */\ncommands.deleteCookie = function(name) {\n  var cb = findCallback(arguments);\n  this._jsonWireCall({\n    method: 'DELETE'\n    , relPath: '/cookie/' + encodeURIComponent(name)\n    , cb: simpleCallback(cb)\n  });\n};\n\n/**\n * getOrientation(cb) -> cb(err, orientation)\n *\n * @jsonWire GET /session/:sessionId/orientation\n */\ncommands.getOrientation = function() {\n  var cb = findCallback(arguments);\n  this._jsonWireCall({\n    method: 'GET'\n    , relPath: '/orientation'\n    , cb: callbackWithData(cb, this)\n  });\n};\n\n/**\n * setOrientation(cb) -> cb(err, orientation)\n *\n * @jsonWire POST /session/:sessionId/orientation\n */\ncommands.setOrientation = function(orientation) {\n  orientation = orientation.toUpperCase();\n  var cb = findCallback(arguments);\n  this._jsonWireCall({\n    method: 'POST'\n    , relPath: '/orientation'\n    , data: { orientation: orientation }\n    , cb: simpleCallback(cb)\n  });\n};\n\n/**\n * setLocalStorageKey(key, value, cb) -> cb(err)\n *\n * # uses safeExecute() due to localStorage bug in Selenium\n *\n * @jsonWire POST /session/:sessionId/local_storage\n */\ncommands.setLocalStorageKey = function() {\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback,\n      key = fargs.all[0],\n      value = fargs.all[1];\n\n  commands.safeExecute.apply(\n    this,\n    [\"localStorage.setItem(arguments[0], arguments[1])\", [key, value], cb]\n  );\n};\n\n/**\n * getLocalStorageKey(key, cb) -> cb(err)\n *\n * # uses safeEval() due to localStorage bug in Selenium\n *\n * @jsonWire GET /session/:sessionId/local_storage/key/:key\n */\ncommands.getLocalStorageKey = function() {\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback,\n      key = fargs.all[0];\n\n  commands.safeEval.apply(\n    this,\n    [\"localStorage.getItem('\" + key + \"')\", cb]\n  );\n};\n\n/**\n * removeLocalStorageKey(key, cb) -> cb(err)\n *\n * # uses safeExecute() due to localStorage bug in Selenium\n *\n * @jsonWire DELETE /session/:sessionId/local_storage/key/:key\n */\ncommands.removeLocalStorageKey = function() {\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback,\n      key = fargs.all[0];\n\n  commands.safeExecute.apply(\n    this,\n    [\"localStorage.removeItem(arguments[0])\", [key], cb]\n  );\n};\n\n/**\n * clearLocalStorage(cb) -> cb(err)\n *\n * # uses safeExecute() due to localStorage bug in Selenium\n *\n * @jsonWire DELETE /session/:sessionId/local_storage\n */\ncommands.clearLocalStorage = function() {\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback;\n\n  commands.safeExecute.apply(\n    this,\n    [\"localStorage.clear()\", cb]\n  );\n};\n\n// deprecated\nvar _isVisible1 = function(element){\n  var cb = findCallback(arguments);\n  commands.getComputedCSS.apply(this, [element, \"display\", function(err, display){\n    if(err){\n      return cb(err);\n    }\n\n    cb(null, display !== \"none\");\n  }]);\n};\n\n// deprecated\nvar _isVisible2 = function(queryType, querySelector){\n  var cb = findCallback(arguments);\n  commands.elementIfExists.apply(this, [queryType, querySelector, function(err, element){\n    if(err){\n      return cb(err);\n    }\n\n    if(element){\n      element.isVisible(cb);\n    } else {\n      cb(null, false); }\n  }]);\n};\n\n// deprecated\ncommands.isVisible = function() {\n  deprecator.warn('isVisible', 'isVisible has been deprecated, use isDisplayed instead.');\n\n  var args = __slice.call(arguments, 0);\n  if (args.length <= 2) {\n    _isVisible1.apply(this, args);\n  } else {\n    _isVisible2.apply(this, args);\n  }\n};\n\n/**\n * Retrieves the pageIndex element (added for Appium):\n * getPageIndex(element, cb) -> cb(err, pageIndex)\n */\ncommands.getPageIndex = function(element) {\n  var cb = findCallback(arguments);\n  this._jsonWireCall({\n    method: 'GET'\n    , relPath: '/element/' + element + '/pageIndex'\n    , cb: callbackWithData(cb, this)\n  });\n};\n\n/**\n * getLocation(element, cb) -> cb(err, location)\n *\n * @jsonWire GET /session/:sessionId/element/:id/location\n */\ncommands.getLocation = function(element) {\n  var cb = findCallback(arguments);\n  this._jsonWireCall({\n    method: 'GET'\n    , relPath: '/element/' + element + '/location'\n    , cb: callbackWithData(cb, this)\n  });\n};\n\n/**\n * getLocationInView(element, cb) -> cb(err, location)\n *\n * @jsonWire GET /session/:sessionId/element/:id/location_in_view\n */\ncommands.getLocationInView = function(element) {\n  var cb = findCallback(arguments);\n  this._jsonWireCall({\n    method: 'GET'\n    , relPath: '/element/' + element + '/location_in_view'\n    , cb: callbackWithData(cb, this)\n  });\n};\n\n/**\n * getSize(element, cb) -> cb(err, size)\n *\n * @jsonWire GET /session/:sessionId/element/:id/size\n */\ncommands.getSize = function(element) {\n  var cb = findCallback(arguments);\n  this._jsonWireCall({\n    method: 'GET'\n    , relPath: '/element/' + element + '/size'\n    , cb: callbackWithData(cb, this)\n  });\n};\n\n/**\n * Uploads a local file using undocumented\n * POST /session/:sessionId/file\n * uploadFile(filepath, cb) -> cb(err, filepath)\n */\ncommands.uploadFile = function(filepath) {\n  var cb = findCallback(arguments);\n  var _this = this;\n  var archiver = require('archiver');\n\n  var archive = archiver('zip');\n  var dataList = [];\n\n  archive\n  .on('error', function(err) {\n    cb(err);\n  })\n  .on('data', function(data) {\n    dataList.push(data);\n  })\n  .on('end', function() {\n    _this._jsonWireCall({\n    method: 'POST'\n      , relPath: '/file'\n      , data: { file: Buffer.concat(dataList).toString('base64') },\n      cb: callbackWithData(cb, _this)\n    });\n  });\n\n  archive\n  .append(\n    fs.createReadStream(filepath),\n    { name: path.basename(filepath) }\n  );\n\n  archive.finalize(function(err) {\n    if (err) {\n      cb(err);\n    }\n  });\n};\n\ncommands.waitForJsCondition = function(){\n  deprecator.warn('waitForJsCondition',\n    'waitForJsCondition has been deprecated, use waitFor + jsCondition asserter instead.');\n\n  var cb = findCallback(arguments);\n  var fargs = utils.varargs(arguments);\n  var jsConditionExpr = fargs.all[0],\n      timeout = fargs.all[1],\n      pollFreq = fargs.all[2];\n  commands.waitFor.apply(this, [\n    {\n      asserter: asserters.jsCondition(jsConditionExpr, true),\n      timeout: timeout,\n      pollFreq: pollFreq\n    }, function(err, value) {\n      if(err && err.message && err.message.match(/Condition/)) {\n        cb(new Error(\"Element condition wasn't satisfied!\"));\n      } else {\n        cb(err, value);\n      }\n    }]);\n};\ncommands.waitForCondition = commands.waitForJsCondition;\n\n/**\n * Waits for JavaScript condition to be true (async script polling within browser):\n * waitForConditionInBrowser(conditionExpr, timeout, pollFreq, cb) -> cb(err, boolean)\n * conditionExpr: condition expression, should return a boolean\n * timeout and  pollFreq are optional, default: 1000/100.\n * return true if condition satisfied, error otherwise.\n */\ncommands.waitForConditionInBrowser = function() {\n  var _this = this;\n  // parsing args\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback,\n      conditionExpr = fargs.all[0],\n      timeout = fargs.all[1] || 1000,\n      poll = fargs.all[2] || 100;\n\n  // calling script\n  commands.safeExecuteAsync.apply( _this, [_waitForConditionInBrowserJsScript,\n    [conditionExpr,timeout,poll], function(err,res) {\n      if(err) {return cb(err);}\n      if(res !== true) {return cb(\"waitForConditionInBrowser failure for: \" + conditionExpr);}\n      cb(null, res);\n    }\n  ]);\n};\n\n/**\n * sauceJobUpdate(jsonData, cb) -> cb(err)\n */\ncommands.sauceJobUpdate = function() {\n  var fargs = utils.varargs(arguments);\n  this._sauceJobUpdate.apply(this, fargs.array);\n};\n\n/**\n * sauceJobStatus(hasPassed, cb) -> cb(err)\n */\ncommands.sauceJobStatus = function() {\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback,\n      hasPassed = fargs.all[0];\n  this._sauceJobUpdate.apply(this, [{passed: hasPassed}, cb]);\n};\n\n/**\n * sleep(ms, cb) -> cb(err)\n */\ncommands.sleep = function(ms, cb) {\n  cb = cb || function() {};\n  setTimeout(cb , ms);\n};\n\n/**\n * noop(cb) -> cb(err)\n */\ncommands.noop = function(cb) {\n  if(cb) { cb(); }\n};\n\n/**\n * shakeDevice(cb) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/appium/device/shake\n */\ncommands.shakeDevice = function() {\n  var cb = findCallback(arguments);\n  this._jsonWireCall({\n    method: 'POST'\n    , relPath: '/appium/device/shake'\n    , cb: simpleCallback(cb)\n  });\n};\n\n/**\n * shake(cb) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/appium/device/shake\n */\ncommands.shake = commands.shakeDevice;\n\n/**\n * lockDevice(seconds, cb) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/appium/device/lock\n */\ncommands.lockDevice = function() {\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback,\n           seconds = fargs.all[0];\n  this._jsonWireCall({\n    method: 'POST'\n    , relPath: '/appium/device/lock'\n    , data: {seconds: seconds}\n    , cb: simpleCallback(cb)\n  });\n};\n/**\n * lock(seconds, cb) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/appium/device/lock\n */\ncommands.lock = commands.lockDevice;\n\n/**\n * unlockDevice(cb) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/appium/device/lock\n */\ncommands.unlockDevice = function() {\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback;\n  this._jsonWireCall({\n    method: 'POST'\n    , relPath: '/appium/device/unlock'\n    , cb: simpleCallback(cb)\n  });\n};\n/**\n * unlock(cb) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/appium/device/lock\n */\ncommands.unlock = commands.unlockDevice;\n\n/**\n * isLocked(cb) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/appium/device/is_locked\n */\ncommands.isLocked = function() {\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback;\n  this._jsonWireCall({\n    method: 'POST'\n    , relPath: '/appium/device/is_locked'\n    , cb: callbackWithData(cb)\n  });\n};\n\n/**\n * deviceKeyEvent(keycode, metastate, cb) -> cb(err)\n * metastate is optional. DEPRECATED: use pressKeycode instead\n *\n * @jsonWire POST /session/:sessionId/appium/device/keyevent\n */\ncommands.deviceKeyEvent = function() {\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback,\n      keycode = fargs.all[0],\n      metastate = fargs.all[1];\n  var data = {keycode: keycode};\n  if(metastate) { data.metastate = metastate; }\n  this._jsonWireCall({\n    method: 'POST'\n    , relPath: '/appium/device/keyevent'\n    , data: data\n    , cb: simpleCallback(cb)\n  });\n};\n/**\n * pressDeviceKey(keycode, metastate, cb) -> cb(err)\n * metastate is optional. DEPRECATED: use pressKeycode instead\n *\n * @jsonWire POST /session/:sessionId/appium/device/keyevent\n */\ncommands.pressDeviceKey = commands.deviceKeyEvent;\n\n/**\n * pressKeycode(keycode, metastate, cb) -> cb(err)\n * metastate is optional.\n * flags is optional for native android flag. Can set multiple falsg as Array. Flags have `FLAG_` prefix in http://developer.android.com/reference/android/view/KeyEvent.html\n * e.g.: FLAG_CANCELED is `32` or `0x00000020`\n *\n * @jsonWire POST /session/:sessionId/appium/device/press_keycode\n */\ncommands.pressKeycode = function() {\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback,\n      keycode = fargs.all[0],\n      metastate = fargs.all[1],\n      flags = fargs.all[2];\n  var data = {keycode: keycode};\n  if(metastate) { data.metastate = metastate; }\n  if(flags) {\n    var f = 0;\n    flags.forEach( function (value) { f = f | value; } );\n    data.flags = f;\n   }\n  this._jsonWireCall({\n    method: 'POST'\n    , relPath: '/appium/device/press_keycode'\n    , data: data\n    , cb: simpleCallback(cb)\n  });\n};\n\n/**\n * longPressKeycode(keycode, metastate, cb) -> cb(err)\n * metastate is optional.\n * flags is optional for native android flag. Can set multiple falsg as Array. Flags have `FLAG_` prefix in http://developer.android.com/reference/android/view/KeyEvent.html\n * e.g.: FLAG_CANCELED is `32` or `0x00000020`\n *\n * @jsonWire POST /session/:sessionId/appium/device/long_press_keycode\n */\ncommands.longPressKeycode = function() {\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback,\n      keycode = fargs.all[0],\n      metastate = fargs.all[1],\n      flags = fargs.all[2];\n  var data = {keycode: keycode};\n  if(metastate) { data.metastate = metastate; }\n  if(flags) {\n    var f = 0;\n    flags.forEach( function (value) { f = f | value; } );\n    data.flags = f;\n   }\n  this._jsonWireCall({\n    method: 'POST'\n    , relPath: '/appium/device/long_press_keycode'\n    , data: data\n    , cb: simpleCallback(cb)\n  });\n};\n\n/**\n * rotateDevice(element, opts, cb) -> cb(err)\n * rotateDevice(opts, cb) -> cb(err)\n * opts is like the following:\n * {x: 114, y: 198, duration: 5, radius: 3, rotation: 220, touchCount: 2}\n *\n * @jsonWire POST /session/:sessionId/appium/device/rotate\n */\ncommands.rotateDevice = function() {\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback,\n      element = fargs.all[0],\n      opts = fargs.all[1];\n  if(!(element && element.value)) {\n    opts = element;\n    element = null;\n  }\n  var data = _.clone(opts);\n  if(element) { data.element = element.value.toString(); }\n  this._jsonWireCall({\n    method: 'POST'\n    , relPath: '/appium/device/rotate'\n    , data: data\n    , cb: simpleCallback(cb)\n  });\n};\n/**\n * rotate(element, opts, cb) -> cb(err)\n * rotate(opts, cb) -> cb(err)\n * opts is like the following:\n * {x: 114, y: 198, duration: 5, radius: 3, rotation: 220, touchCount: 2}\n *\n * @jsonWire POST /session/:sessionId/appium/device/rotate\n */\ncommands.rotate = commands.rotateDevice;\n\n/**\n * getCurrentDeviceActivity(cb) -> cb(err)\n *\n * @jsonWire GET /session/:sessionId/appium/device/current_activity\n */\ncommands.getCurrentDeviceActivity = function() {\n  var cb = findCallback(arguments);\n  this._jsonWireCall({\n    method: 'GET'\n    , relPath: '/appium/device/current_activity'\n    , cb: callbackWithData(cb, this)\n  });\n};\n/**\n * getCurrentActivity(cb) -> cb(err)\n *\n * @jsonWire GET /session/:sessionId/appium/device/current_activity\n */\ncommands.getCurrentActivity = commands.getCurrentDeviceActivity;\n\n/**\n * getCurrentPackage(cb) -> cb(err)\n *\n * @jsonWire GET /session/:sessionId/appium/device/current_package\n */\ncommands.getCurrentPackage = function() {\n  var cb = findCallback(arguments);\n  this._jsonWireCall({\n    method: 'GET'\n    , relPath: '/appium/device/current_package'\n    , cb: callbackWithData(cb, this)\n  });\n};\n\n/**\n * installAppOnDevice(appPath, cb) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/appium/device/install_app\n */\ncommands.installAppOnDevice = function() {\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback,\n      appPath = fargs.all[0];\n  this._jsonWireCall({\n    method: 'POST'\n    , relPath: '/appium/device/install_app'\n    , data: { appPath: appPath}\n    , cb: simpleCallback(cb)\n  });\n};\n/**\n * installApp(appPath, cb) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/appium/device/install_app\n */\ncommands.installApp = commands.installAppOnDevice;\n\n/**\n * removeAppFromDevice(appId, cb) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/appium/device/remove_app\n */\ncommands.removeAppFromDevice = function() {\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback,\n      appId = fargs.all[0];\n  this._jsonWireCall({\n    method: 'POST'\n    , relPath: '/appium/device/remove_app'\n    , data: { appId: appId}\n    , cb: simpleCallback(cb)\n  });\n};\n/**\n * removeApp(appId, cb) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/appium/device/remove_app\n */\ncommands.removeApp = commands.removeAppFromDevice;\n\n/**\n * isAppInstalledOnDevice(bundleId, cb) -> cb(isInstalled, err)\n *\n * @jsonWire POST /session/:sessionId/appium/device/app_installed\n */\ncommands.isAppInstalledOnDevice = function() {\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback,\n      bundleId = fargs.all[0];\n  this._jsonWireCall({\n    method: 'POST'\n    , relPath: '/appium/device/app_installed'\n    , data: {bundleId: bundleId}\n    , cb: callbackWithData(cb, this)\n  });\n};\n/**\n * isAppInstalled(bundleId, cb) -> cb(isInstalled, err)\n *\n * @jsonWire POST /session/:sessionId/appium/device/app_installed\n */\ncommands.isAppInstalled = commands.isAppInstalledOnDevice;\n\n/**\n * isKeyboardShown() -> cb(err)\n *\n * @jsonWire GET /session/:sessionId/appium/device/is_keyboard_shown\n */\ncommands.isKeyboardShown = function() {\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback;\n  this._jsonWireCall({\n    method: 'GET'\n    , relPath: '/appium/device/is_keyboard_shown'\n    , cb: callbackWithData(cb)\n  });\n};\n\n/**\n * hideKeyboard() -> cb(err)\n * hideKeyboard(keyName, cb) -> cb(err)\n * hideKeyboard({strategy: 'pressKey', key:'<key>'}) -> cb(err)\n * hideKeyboard({strategy: 'tapOutside'}) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/appium/device/hide_keyboard\n */\ncommands.hideDeviceKeyboard = function() {\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback;\n  var data = {};\n  switch(typeof fargs.all[0]) {\n    case 'string':\n      data = {keyName: fargs.all[0]};\n      break;\n    case 'object':\n      data = fargs.all[0];\n      break;\n    default:\n      data= null;\n  }\n  this._jsonWireCall({\n    method: 'POST'\n    , relPath: '/appium/device/hide_keyboard'\n    , data: data\n    , cb: simpleCallback(cb)\n  });\n};\ncommands.hideKeyboard = commands.hideDeviceKeyboard;\n\n/**\n * pushFileToDevice(pathOnDevice, base64Data, cb) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/appium/device/push_file\n */\ncommands.pushFileToDevice = function() {\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback,\n      pathOnDevice = fargs.all[0],\n      base64Data = fargs.all[1];\n  this._jsonWireCall({\n    method: 'POST'\n    , relPath: '/appium/device/push_file'\n    , data: {path: pathOnDevice, data: base64Data}\n    , cb: simpleCallback(cb)\n  });\n};\n/**\n * pushFile(pathOnDevice, base64Data, cb) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/appium/device/push_file\n */\ncommands.pushFile = commands.pushFileToDevice;\n\n\n/**\n * pullFileFromDevice(pathOnDevice, cb) -> cb(base64EncodedData, err)\n *\n * @jsonWire POST /session/:sessionId/appium/device/pull_file\n */\ncommands.pullFileFromDevice = function() {\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback,\n      pathOnDevice = fargs.all[0];\n  this._jsonWireCall({\n    method: 'POST'\n    , relPath: '/appium/device/pull_file'\n    , data: {path: pathOnDevice}\n    , cb: callbackWithData(cb, this)\n  });\n};\n/**\n * pullFile(pathOnDevice, cb) -> cb(base64EncodedData, err)\n *\n * @jsonWire POST /session/:sessionId/appium/device/pull_file\n */\ncommands.pullFile = commands.pullFileFromDevice;\n\n/**\n * pullFolderFromDevice(pathOnDevice, cb) -> cb(base64EncodedData, err)\n *\n * @jsonWire POST /session/:sessionId/appium/device/pull_folder\n */\n commands.pullFolderFromDevice = function() {\n   var fargs = utils.varargs(arguments);\n   var cb = fargs.callback,\n       pathOnDevice = fargs.all[0];\n   this._jsonWireCall({\n     method: 'POST'\n     , relPath: '/appium/device/pull_folder'\n     , data: {path: pathOnDevice}\n     , cb: callbackWithData(cb, this)\n   });\n };\n\n /**\n  * pullFolder(pathOnDevice, cb) -> cb(base64EncodedData, err)\n  *\n  * @jsonWire POST /session/:sessionId/appium/device/pull_folder\n  */\ncommands.pullFolder = commands.pullFolderFromDevice;\n\n/**\n * toggleAirplaneModeOnDevice(cb) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/appium/device/toggle_airplane_mode\n */\ncommands.toggleAirplaneModeOnDevice = function() {\n  var cb = findCallback(arguments);\n  this._jsonWireCall({\n    method: 'POST'\n    , relPath: '/appium/device/toggle_airplane_mode'\n    , cb: simpleCallback(cb)\n  });\n};\n/**\n * toggleAirplaneMode(cb) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/appium/device/toggle_airplane_mode\n */\ncommands.toggleAirplaneMode = commands.toggleAirplaneModeOnDevice;\n/**\n * toggleFlightMode(cb) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/appium/device/toggle_airplane_mode\n */\ncommands.toggleFlightMode = commands.toggleAirplaneModeOnDevice;\n\n/**\n * toggleWiFiOnDevice(cb) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/appium/device/toggle_wifi\n */\ncommands.toggleWiFiOnDevice = function() {\n  var cb = findCallback(arguments);\n  this._jsonWireCall({\n    method: 'POST'\n    , relPath: '/appium/device/toggle_wifi'\n    , cb: simpleCallback(cb)\n  });\n};\n/**\n * toggleWiFi(cb) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/appium/device/toggle_wifi\n */\ncommands.toggleWiFi = commands.toggleWiFiOnDevice;\n\n/**\n * toggleLocationServicesOnDevice(cb) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/appium/device/toggle_location_services\n */\ncommands.toggleLocationServicesOnDevice = function() {\n  var cb = findCallback(arguments);\n  this._jsonWireCall({\n    method: 'POST'\n    , relPath: '/appium/device/toggle_location_services'\n    , cb: simpleCallback(cb)\n  });\n};\n/**\n * toggleLocationServices(cb) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/appium/device/toggle_location_services\n */\ncommands.toggleLocationServices = commands.toggleLocationServicesOnDevice;\n\n/**\n * toggleDataOnDevice(cb) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/appium/device/toggle_data\n */\ncommands.toggleDataOnDevice = function() {\n  var cb = findCallback(arguments);\n  this._jsonWireCall({\n    method: 'POST'\n    , relPath: '/appium/device/toggle_data'\n    , cb: simpleCallback(cb)\n  });\n};\n/**\n * toggleData(cb) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/appium/device/toggle_data\n */\ncommands.toggleData = commands.toggleDataOnDevice;\n\n/**\n * launchApp(cb) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/appium/app/launch\n */\ncommands.launchApp = function() {\n  var cb = findCallback(arguments);\n  this._jsonWireCall({\n    method: 'POST'\n    , relPath: '/appium/app/launch'\n    , cb: simpleCallback(cb)\n  });\n};\n\n/**\n * closeApp(cb) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/appium/app/close\n */\ncommands.closeApp = function() {\n  var cb = findCallback(arguments);\n  this._jsonWireCall({\n    method: 'POST'\n    , relPath: '/appium/app/close'\n    , cb: simpleCallback(cb)\n  });\n};\n\n\n/**\n * resetApp(cb) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/appium/app/reset\n */\ncommands.resetApp = function() {\n  var cb = findCallback(arguments);\n  this._jsonWireCall({\n    method: 'POST'\n    , relPath: '/appium/app/reset'\n    , cb: simpleCallback(cb)\n  });\n};\n\n/**\n * backgroundApp(seconds, cb) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/appium/app/background\n */\ncommands.backgroundApp = function() {\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback,\n      seconds = fargs.all[0];\n  this._jsonWireCall({\n    method: 'POST'\n    , relPath: '/appium/app/background'\n    , data: {seconds: seconds}\n    , cb: simpleCallback(cb)\n  });\n};\n\n/**\n * endTestCoverageForApp(intentToBroadcast, pathOnDevice) -> cb(base64Data,err)\n *\n * @jsonWire POST /session/:sessionId/appium/app/end_test_coverage\n */\ncommands.endTestCoverageForApp = function() {\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback,\n      intent = fargs.all[0],\n      path = fargs.all[1];\n  this._jsonWireCall({\n    method: 'POST'\n    , relPath: '/appium/app/end_test_coverage'\n    , data: {intent: intent, path: path}\n    , cb: callbackWithData(cb, this)\n  });\n};\n/**\n * endTestCoverage(intentToBroadcast, pathOnDevice) -> cb(base64Data,err)\n *\n * @jsonWire POST /session/:sessionId/appium/app/end_test_coverage\n */\ncommands.endTestCoverage = commands.endTestCoverageForApp;\n/**\n * endCoverage(intentToBroadcast, pathOnDevice) -> cb(base64Data,err)\n *\n * @jsonWire POST /session/:sessionId/appium/app/end_test_coverage\n */\ncommands.endCoverage = commands.endTestCoverageForApp;\n\n/**\n * complexFindInApp(selector) -> cb(element(s))\n * Return a single element or an elements array depending on\n * selector\n *\n * @jsonWire POST /session/:sessionId/appium/app/complex_find\n */\ncommands.complexFindInApp = function() {\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback,\n      selector = fargs.all[0];\n  this._jsonWireCall({\n    method: 'POST'\n    , relPath: '/appium/app/complex_find'\n    , data: {selector: selector}\n    , cb: elementOrElementsCallback(cb, this)\n  });\n};\n\n/**\n * complexFind(selector) -> cb(element(s))\n * Return a single element or an elements array depending on\n * selector\n *\n * @jsonWire POST /session/:sessionId/appium/app/complex_find\n */\ncommands.complexFind = commands.complexFindInApp;\n\n/**\n * getAppStrings(cb) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/appium/app/strings\n */\ncommands.getAppStrings = function() {\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback,\n      language = fargs.all[0];\n  this._jsonWireCall({\n    method: 'POST'\n    , relPath: '/appium/app/strings'\n    , data: {language: language}\n    , cb: callbackWithData(cb, this)\n  });\n};\n\n/**\n * setImmediateValueInApp(element, value, cb) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/appium/element/:elementId?/value\n */\ncommands.setImmediateValueInApp = function(element, value) {\n  var cb = findCallback(arguments);\n  this._jsonWireCall({\n    method: 'POST'\n    , relPath: '/appium/element/' + element.value.toString() + '/value'\n    , data: {value: value}\n    , cb: simpleCallback(cb)\n  });\n};\n\n/**\n * startActivity(options, cb) -> cb(err)\n * Start an arbitrary Android activity during a session. The 'options' parameter should\n * implement the interface {appPackage, appActivity, [appWaitPackage], [appWaitActivity]}.\n *\n * @jsonWire POST /session/:sessionId/appium/device/start_activity\n */\ncommands.startActivity = function() {\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback,\n    options = fargs.all[0];\n  this._jsonWireCall({\n    method: 'POST'\n    , relPath: '/appium/device/start_activity'\n    , data: options\n    , cb: simpleCallback(cb)\n  });\n};\n\n/**\n * setImmediateValue(element, value, cb) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/appium/element/:elementId?/value\n */\ncommands.setImmediateValue = commands.setImmediateValueInApp;\n\n/**\n * setNetworkConnection(type, cb) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/network_connection\n */\ncommands.setNetworkConnection = function() {\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback;\n  this._jsonWireCall({\n    method: 'POST'\n    , relPath: '/network_connection'\n    , data: {parameters: {type: fargs.all[0]}}\n    , cb: callbackWithData(cb, this)\n  });\n};\n\n/**\n * getNetworkConnection(cb) -> cb(err, networkConnectionInfo)\n *\n * @jsonWire GET /session/:sessionId/network_connection\n */\ncommands.getNetworkConnection = function() {\n  var cb = findCallback(arguments);\n  this._jsonWireCall({\n    method: 'GET'\n    , relPath: '/network_connection'\n    , cb: callbackWithData(cb, this)\n  });\n};\n\n/**\n * openNotifications(cb) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/appium/device/open_notifications\n */\ncommands.openNotifications = function() {\n  var cb = findCallback(arguments);\n  this._jsonWireCall({\n    method: 'POST'\n    , relPath: '/appium/device/open_notifications'\n    , cb: simpleCallback(cb, this)\n  });\n};\n\n/**\n * settings(cb) -> cb(err, settingsObject)\n *\n * @jsonWire GET /session/:sessionId/appium/settings\n */\ncommands.settings = function() {\n  var cb = findCallback(arguments);\n  this._jsonWireCall({\n    method: 'GET'\n    , relPath: '/appium/settings'\n    , cb: callbackWithData(cb, this)\n  });\n};\n\n/**\n * updateSettings(settingsObject, cb) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/appium/settings\n */\ncommands.updateSettings = function() {\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback;\n  this._jsonWireCall({\n    method: 'POST'\n    , relPath: '/appium/settings'\n    , data: {settings: fargs.all[0]}\n    , cb: simpleCallback(cb, this)\n  });\n};\n\n/**\n * availableIMEEngines(cb) -> cb(err, engines)\n *\n * @jsonWire GET /session/:sessionId/ime/available_engines\n */\ncommands.availableIMEEngines = function() {\n  var cb = findCallback(arguments);\n  this._jsonWireCall({\n    method: 'GET'\n    , relPath: '/ime/available_engines'\n    , cb: callbackWithData(cb, this)\n  });\n};\n\n/**\n * activateIMEEngine(cb, engine) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/ime/activate\n */\ncommands.activateIMEEngine = function(engine) {\n  var cb = findCallback(arguments);\n  this._jsonWireCall({\n    method: 'POST'\n    , relPath: '/ime/activate'\n    , data: { engine: engine }\n    , cb: simpleCallback(cb, this)\n  });\n};\n\n/**\n * deactivateIMEEngine(cb) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/ime/deactivate\n */\ncommands.deactivateIMEEngine = function() {\n  var cb = findCallback(arguments);\n  this._jsonWireCall({\n    method: 'POST'\n    , relPath: '/ime/deactivate'\n    , cb: simpleCallback(cb, this)\n  });\n};\n\n/**\n * activatedIMEEngine(cb) -> cb(err, active)\n *\n * @jsonWire GET /session/:sessionId/ime/activated\n */\ncommands.isIMEActive = function() {\n  var cb = findCallback(arguments);\n  this._jsonWireCall({\n    method: 'GET'\n    , relPath: '/ime/activated'\n    , cb: callbackWithData(cb, this)\n  });\n};\n\n/**\n * activeIMEEngine(cb) -> cb(err, activeEngine)\n *\n * @jsonWire GET /session/:sessionId/ime/active_engine\n */\ncommands.activeIMEEngine = function () {\n  var cb = findCallback(arguments);\n  this._jsonWireCall({\n    method: 'GET'\n    , relPath: '/ime/active_engine'\n    , cb: callbackWithData(cb, this)\n  });\n};\n\n/**\n * getDeviceTime(cb) -> cb(err, deviceTime)\n *\n * @jsonWire GET /session/:sessionId/appium/device/system_time\n */\ncommands.getDeviceTime = function () {\n  var cb = findCallback(arguments);\n  this._jsonWireCall({\n    method: 'GET'\n    , relPath: '/appium/device/system_time'\n    , cb: callbackWithData(cb, this)\n  });\n};\n\n/**\n * touchId(cb) -> cb(err, touchId)\n *\n * @jsonWire POST /session/:sessionId/appium/simulator/touch_id\n */\ncommands.touchId = function(){\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback,\n      match = fargs.all[0];\n  this._jsonWireCall({\n    method: 'POST'\n    , relPath: '/appium/simulator/touch_id'\n    , cb: callbackWithData(cb, this)\n    , data: {match: match}\n  });\n};\n\n/**\n * touchId(cb) -> cb(err, touchId)\n *\n * @jsonWire POST /session/:sessionId/appium/simulator/touch_id\n */\ncommands.toggleTouchIdEnrollment = function(){\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback;\n  this._jsonWireCall({\n    method: 'POST'\n    , relPath: '/appium/simulator/toggle_touch_id_enrollment'\n    , cb: callbackWithData(cb, this)\n  });\n};\n\n/**\n * fingerprint(fingerprintId, cb) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/appium/device/finger_print\n */\ncommands.fingerprint = function() {\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback,\n      fingerprintId = fargs.all[0];\n  var data = {fingerprintId: fingerprintId};\n  this._jsonWireCall({\n    method: 'POST'\n    , relPath: '/appium/device/finger_print'\n    , data: data\n    , cb: simpleCallback(cb)\n  });\n};\n\n/**\n * sendSms(phoneNumber, message, cb) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/appium/device/send_sms\n */\ncommands.sendSms = function() {\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback,\n      phoneNumber = fargs.all[0],\n      message = fargs.all[1];\n  var data = {phoneNumber: phoneNumber, message: message};\n  this._jsonWireCall({\n    method: 'POST'\n    , relPath: '/appium/device/send_sms'\n    , data: data\n    , cb: simpleCallback(cb)\n  });\n};\n\n/**\n * gsmCall(phoneNumber, action, cb) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/appium/device/gsm_call\n */\ncommands.gsmCall = function() {\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback,\n      phoneNumber = fargs.all[0],\n      action = fargs.all[1];\n  var data = {phoneNumber: phoneNumber, action: action};\n  this._jsonWireCall({\n    method: 'POST'\n    , relPath: '/appium/device/gsm_call'\n    , data: data\n    , cb: simpleCallback(cb)\n  });\n};\n\n/**\n * gsmSignal(signalStrength, cb) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/appium/device/gsm_signal\n */\ncommands.gsmSignal = function() {\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback,\n      signalStrength = fargs.all[0];\n  var data = {signalStrength: signalStrength};\n  this._jsonWireCall({\n    method: 'POST'\n    , relPath: '/appium/device/gsm_signal'\n    , data: data\n    , cb: simpleCallback(cb)\n  });\n};\n\ncommands.gsmSignalStrength = commands.gsmSignal;\n\n/**\n * gsmVoice(state, cb) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/appium/device/gsm_voice\n */\ncommands.gsmVoice = function() {\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback,\n      state = fargs.all[0];\n  var data = {state: state};\n  this._jsonWireCall({\n    method: 'POST'\n    , relPath: '/appium/device/gsm_voice'\n    , data: data\n    , cb: simpleCallback(cb)\n  });\n};\n\ncommands.gsmVoiceState = commands.gsmVoice;\n\n/**\n * powerCapacity(percent, cb) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/appium/device/power_capacity\n */\ncommands.powerCapacity = function() {\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback,\n      percent = fargs.all[0];\n  var data = {percent: percent};\n  this._jsonWireCall({\n    method: 'POST'\n    , relPath: '/appium/device/power_capacity'\n    , data: data\n    , cb: simpleCallback(cb)\n  });\n};\n\n/**\n * powerAC(state, cb) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/appium/device/power_ac\n */\ncommands.powerAC = function() {\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback,\n      state = fargs.all[0];\n  var data = {state: state};\n  this._jsonWireCall({\n    method: 'POST'\n    , relPath: '/appium/device/power_ac'\n    , data: data\n    , cb: simpleCallback(cb)\n  });\n};\n\ncommands.powerChargerState = commands.powerAC;\n\n/**\n * networkSpeed(netspeed, cb) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/appium/device/network_speed\n */\ncommands.networkSpeed = function() {\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback,\n      netspeed = fargs.all[0];\n  var data = {netspeed: netspeed};\n  this._jsonWireCall({\n    method: 'POST'\n    , relPath: '/appium/device/network_speed'\n    , data: data\n    , cb: simpleCallback(cb)\n  });\n};\n\n/**\n * getClipboard(contentType, cb) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/appium/device/get_clipboard\n */\ncommands.getClipboard = function() {\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback,\n    contentType = fargs.all[0];\n  var data = {contentType: contentType};\n  this._jsonWireCall({\n    method: 'POST'\n    , relPath: '/appium/device/get_clipboard'\n    , data: data\n    , cb: callbackWithData(cb)\n  });\n};\n\n/**\n * setClipboard(content, contentType, cb) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/appium/device/set_clipboard\n */\ncommands.setClipboard = function() {\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback,\n    content = fargs.all[0],\n    contentType = fargs.all[1];\n  var data = {content: content, contentType: contentType};\n  this._jsonWireCall({\n    method: 'POST'\n    , relPath: '/appium/device/set_clipboard'\n    , data: data\n    , cb: simpleCallback(cb)\n  });\n};\n\n/**\n * getSupportedPerformanceDataTypes(cb) -> cb(err)\n *\n * @jsonWire POST /session/:sessionId/appium/performanceData/types\n */\ncommands.getSupportedPerformanceDataTypes = function() {\n  var cb = findCallback(arguments);\n  this._jsonWireCall({\n    method: 'POST'\n    , relPath: '/appium/performanceData/types'\n    , cb: callbackWithData(cb, this)\n  });\n};\n\n/**\n * getPerformanceData(packageName, dataType, dataReadTimeout, cb) -> cb(err)\n * dataReadTimeout is optional.\n *\n * @jsonWire POST /session/:sessionId/appium/getPerformanceData\n */\ncommands.getPerformanceData = function() {\n  var fargs = utils.varargs(arguments);\n  var cb = fargs.callback,\n    packageName = fargs.all[0],\n    dataType = fargs.all[1],\n    dataReadTimeout = fargs.all[2];\n  var data = {packageName: packageName, dataType: dataType};\n  if (dataReadTimeout) { data.dataReadTimeout = dataReadTimeout; }\n  this._jsonWireCall({\n    method: 'POST'\n    , relPath: '/appium/getPerformanceData'\n    , data: data\n    , cb: callbackWithData(cb, this)\n  });\n};\n\ncommands.elementsByImageFile = function() {\n  var fargs = utils.varargs(arguments);\n  var _this = this;\n  var cb = fargs.callback,\n    imgPath = fargs.all[0];\n  _this.elementByImageFile(imgPath, true, cb);\n};\n\ncommands.elementByImageFile = function() {\n  var fargs = utils.varargs(arguments);\n  var _this = this;\n  var cb = fargs.callback,\n    imgPath = fargs.all[0],\n    multiple = fargs.all[1] || false;\n  fs.readFile(imgPath, function(err, fileData) {\n    if (err) { return cb(err); }\n    var elFn = multiple ? 'elementsByImage' : 'elementByImage';\n    _this[elFn](fileData.toString('base64'), cb);\n  });\n};\n\nmodule.exports = commands;\n"]},"metadata":{},"sourceType":"script"}