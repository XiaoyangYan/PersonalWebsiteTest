{"ast":null,"code":"//Element object\n//Wrapper around browser methods\nvar __slice = Array.prototype.slice;\n\nvar _ = require(\"lodash\"),\n    utils = require(\"./utils.js\"),\n    niceArgs = utils.niceArgs,\n    niceResp = utils.niceResp,\n    elementCommands = require('./element-commands');\n\nvar Element = function (value, browser) {\n  this.value = value;\n  this.browser = browser;\n\n  if (!value) {\n    throw new Error(\"no value passed to Element constructor\");\n  }\n\n  if (!browser) {\n    throw new Error(\"no browser passed to Element constructor\");\n  }\n};\n\nElement.prototype.emit = function () {\n  this.browser.emit.apply(this.browser, __slice.call(arguments, 0));\n};\n\nElement.prototype.toString = function () {\n  return String(this.value);\n};\n\nElement.prototype.toJSON = function () {\n  return {\n    ELEMENT: this.value\n  };\n};\n\n_(elementCommands).each(function (fn, name) {\n  Element.prototype[name] = function () {\n    var _this = this;\n\n    var fargs = utils.varargs(arguments);\n    this.emit('command', \"CALL\", \"element.\" + name + niceArgs(fargs.all));\n\n    var cb = function (err) {\n      if (err) {\n        err.message = '[element.' + name + niceArgs(fargs.all) + \"] \" + err.message;\n        fargs.callback(err);\n      } else {\n        var cbArgs = __slice.call(arguments, 0);\n\n        _this.emit('command', \"RESPONSE\", \"element.\" + name + niceArgs(fargs.all), niceResp(_.drop(cbArgs)));\n\n        fargs.callback.apply(null, cbArgs);\n      }\n    };\n\n    var args = fargs.all.concat([cb]);\n    return fn.apply(this, args);\n  };\n});\n\nmodule.exports = Element;","map":{"version":3,"sources":["/home/yanxiaoyang/react-project/PersonalWebsiteTest/node_modules/wd/lib/element.js"],"names":["__slice","Array","prototype","slice","_","require","utils","niceArgs","niceResp","elementCommands","Element","value","browser","Error","emit","apply","call","arguments","toString","String","toJSON","ELEMENT","each","fn","name","_this","fargs","varargs","all","cb","err","message","callback","cbArgs","drop","args","concat","module","exports"],"mappings":"AAAA;AACA;AACA,IAAIA,OAAO,GAAGC,KAAK,CAACC,SAAN,CAAgBC,KAA9B;;AACA,IAAIC,CAAC,GAAGC,OAAO,CAAC,QAAD,CAAf;AAAA,IACIC,KAAK,GAAGD,OAAO,CAAC,YAAD,CADnB;AAAA,IAEIE,QAAQ,GAAGD,KAAK,CAACC,QAFrB;AAAA,IAGIC,QAAQ,GAAGF,KAAK,CAACE,QAHrB;AAAA,IAIIC,eAAe,GAAGJ,OAAO,CAAC,oBAAD,CAJ7B;;AAMA,IAAIK,OAAO,GAAG,UAASC,KAAT,EAAgBC,OAAhB,EAAyB;AACrC,OAAKD,KAAL,GAAaA,KAAb;AACA,OAAKC,OAAL,GAAeA,OAAf;;AAEA,MAAG,CAACD,KAAJ,EAAU;AACR,UAAM,IAAIE,KAAJ,CAAU,wCAAV,CAAN;AACD;;AAED,MAAG,CAACD,OAAJ,EAAY;AACV,UAAM,IAAIC,KAAJ,CAAU,0CAAV,CAAN;AACD;AACF,CAXD;;AAaAH,OAAO,CAACR,SAAR,CAAkBY,IAAlB,GAAyB,YAAW;AAClC,OAAKF,OAAL,CAAaE,IAAb,CAAkBC,KAAlB,CAAwB,KAAKH,OAA7B,EAAsCZ,OAAO,CAACgB,IAAR,CAAaC,SAAb,EAAwB,CAAxB,CAAtC;AACD,CAFD;;AAIAP,OAAO,CAACR,SAAR,CAAkBgB,QAAlB,GAA6B,YAAY;AACvC,SAAOC,MAAM,CAAC,KAAKR,KAAN,CAAb;AACD,CAFD;;AAIAD,OAAO,CAACR,SAAR,CAAkBkB,MAAlB,GAA2B,YAAY;AACrC,SAAO;AAAEC,IAAAA,OAAO,EAAE,KAAKV;AAAhB,GAAP;AACD,CAFD;;AAIAP,CAAC,CAACK,eAAD,CAAD,CAAmBa,IAAnB,CAAwB,UAASC,EAAT,EAAaC,IAAb,EAAmB;AACzCd,EAAAA,OAAO,CAACR,SAAR,CAAkBsB,IAAlB,IAA0B,YAAW;AACnC,QAAIC,KAAK,GAAG,IAAZ;;AACA,QAAIC,KAAK,GAAGpB,KAAK,CAACqB,OAAN,CAAcV,SAAd,CAAZ;AACA,SAAKH,IAAL,CAAU,SAAV,EAAqB,MAArB,EAA8B,aAAaU,IAAb,GAAoBjB,QAAQ,CAACmB,KAAK,CAACE,GAAP,CAA1D;;AACA,QAAIC,EAAE,GAAG,UAASC,GAAT,EAAc;AACrB,UAAGA,GAAH,EAAQ;AACNA,QAAAA,GAAG,CAACC,OAAJ,GAAc,cAAcP,IAAd,GAAqBjB,QAAQ,CAACmB,KAAK,CAACE,GAAP,CAA7B,GAA2C,IAA3C,GAAkDE,GAAG,CAACC,OAApE;AACAL,QAAAA,KAAK,CAACM,QAAN,CAAeF,GAAf;AACD,OAHD,MAGO;AACL,YAAIG,MAAM,GAAGjC,OAAO,CAACgB,IAAR,CAAaC,SAAb,EAAwB,CAAxB,CAAb;;AACAQ,QAAAA,KAAK,CAACX,IAAN,CAAW,SAAX,EAAsB,UAAtB,EAAmC,aAAaU,IAAb,GAAoBjB,QAAQ,CAACmB,KAAK,CAACE,GAAP,CAA/D,EACEpB,QAAQ,CAACJ,CAAC,CAAC8B,IAAF,CAAOD,MAAP,CAAD,CADV;;AAEAP,QAAAA,KAAK,CAACM,QAAN,CAAejB,KAAf,CAAqB,IAArB,EAA2BkB,MAA3B;AACD;AACF,KAVD;;AAWA,QAAIE,IAAI,GAAGT,KAAK,CAACE,GAAN,CAAUQ,MAAV,CAAiB,CAACP,EAAD,CAAjB,CAAX;AACA,WAAON,EAAE,CAACR,KAAH,CAAS,IAAT,EAAeoB,IAAf,CAAP;AACD,GAjBD;AAkBD,CAnBD;;AAqBAE,MAAM,CAACC,OAAP,GAAiB5B,OAAjB","sourcesContent":["//Element object\n//Wrapper around browser methods\nvar __slice = Array.prototype.slice;\nvar _ = require(\"lodash\")\n  , utils = require(\"./utils.js\")\n  , niceArgs = utils.niceArgs\n  , niceResp = utils.niceResp\n  , elementCommands = require('./element-commands');\n\nvar Element = function(value, browser) {\n  this.value = value;\n  this.browser = browser;\n\n  if(!value){\n    throw new Error(\"no value passed to Element constructor\");\n  }\n\n  if(!browser){\n    throw new Error(\"no browser passed to Element constructor\");\n  }\n};\n\nElement.prototype.emit = function() {\n  this.browser.emit.apply(this.browser, __slice.call(arguments, 0));\n};\n\nElement.prototype.toString = function () {\n  return String(this.value);\n};\n\nElement.prototype.toJSON = function () {\n  return { ELEMENT: this.value };\n};\n\n_(elementCommands).each(function(fn, name) {\n  Element.prototype[name] = function() {\n    var _this = this;\n    var fargs = utils.varargs(arguments);\n    this.emit('command', \"CALL\" , \"element.\" + name + niceArgs(fargs.all));\n    var cb = function(err) {\n      if(err) {\n        err.message = '[element.' + name + niceArgs(fargs.all) + \"] \" + err.message;\n        fargs.callback(err);\n      } else {\n        var cbArgs = __slice.call(arguments, 0);\n        _this.emit('command', \"RESPONSE\" , \"element.\" + name + niceArgs(fargs.all),\n          niceResp(_.drop(cbArgs)));\n        fargs.callback.apply(null, cbArgs);\n      }\n    };\n    var args = fargs.all.concat([cb]);\n    return fn.apply(this, args);\n  };\n});\n\nmodule.exports = Element;\n"]},"metadata":{},"sourceType":"script"}