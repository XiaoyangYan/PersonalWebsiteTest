{"ast":null,"code":"var __slice = Array.prototype.slice,\n    _ = require('lodash'),\n    Webdriver = require('./webdriver'),\n    Element = require('./element');\n/**\n * new wd.TouchAction()\n * TouchAction constructor\n *\n * @actions\n */\n\n\nvar TouchAction = function (driver) {\n  this.driver = driver;\n  this.gestures = [];\n};\n\nTouchAction.prototype.addGesture = function (action, opts) {\n  opts = opts || {};\n  var el = opts.element || opts.el;\n\n  if (el && !(el instanceof Element)) {\n    throw new Error('Invalid element or el field passed');\n  } // preparing opts\n\n\n  var finalOpts = {};\n\n  _(opts).each(function (value, name) {\n    if (_.isNumber(value)) {\n      finalOpts[name] = value;\n    } else if (value instanceof Element) {\n      finalOpts[name] = value.value;\n    } else if (value) {\n      finalOpts[name] = value;\n    }\n  });\n\n  if (finalOpts.el) {\n    finalOpts.element = finalOpts.el;\n    delete finalOpts.el;\n  } // adding action\n\n\n  this.gestures.push({\n    action: action,\n    options: finalOpts\n  });\n};\n\nTouchAction.prototype.toJSON = function () {\n  return this.gestures;\n};\n/**\n * touchAction.longPress({el, x, y})\n * pass el or (x,y) or both\n *\n * @actions\n */\n\n\nTouchAction.prototype.longPress = function (opts) {\n  this.addGesture('longPress', opts);\n  return this;\n};\n/**\n * touchAction.moveTo({el, x, y})\n * pass el or (x,y) or both\n *\n * @actions\n */\n\n\nTouchAction.prototype.moveTo = function (opts) {\n  this.addGesture('moveTo', opts);\n  return this;\n};\n/**\n * touchAction.press({el, x, y})\n * pass el or (x,y) or both\n *\n * @actions\n */\n\n\nTouchAction.prototype.press = function (opts) {\n  this.addGesture('press', opts);\n  return this;\n};\n/**\n * touchAction.release()\n *\n * @actions\n */\n\n\nTouchAction.prototype.release = function () {\n  this.addGesture('release', {});\n  return this;\n};\n/**\n * touchAction.tap({el, x, y, count})\n * pass el or (x,y) or both\n * count is optional\n *\n * @actions\n */\n\n\nTouchAction.prototype.tap = function (opts) {\n  this.addGesture('tap', opts);\n  return this;\n};\n/**\n * touchAction.wait({ms})\n * touchAction.wait(ms)\n * ms is optional\n *\n * @actions\n */\n\n\nTouchAction.prototype.wait = function (opts) {\n  if (_.isNumber(opts)) {\n    opts = {\n      ms: opts\n    };\n  }\n\n  this.addGesture('wait', opts);\n  return this;\n};\n/**\n * cancel the action\n *\n * @actions\n */\n\n\nTouchAction.prototype.cancel = function () {\n  this.gestures = [];\n};\n/**\n * perform the action\n *\n * @actions\n */\n\n\nTouchAction.prototype.perform = function (cb) {\n  if (typeof cb === 'function') {\n    this.driver.performTouchAction(this, cb);\n  } else {\n    return this.driver.performTouchAction(this);\n  }\n};\n/**\n * new wd.MultiAction()\n * MultiAction constructor\n *\n * @actions\n */\n\n\nvar MultiAction = function (browserOrElement) {\n  if (browserOrElement instanceof Element) {\n    this.element = browserOrElement;\n    this.browser = this.element.browser;\n  } else if (browserOrElement instanceof Webdriver) {\n    this.browser = browserOrElement;\n  }\n\n  this.actions = [];\n};\n\nMultiAction.prototype.toJSON = function () {\n  var output = {};\n\n  if (this.element) {\n    output.elementId = this.element.value;\n  }\n\n  output.actions = _(this.actions).map(function (action) {\n    return action.toJSON();\n  }).value();\n  return output;\n};\n/**\n * multiAction.add(touchAction)\n *\n * @actions\n */\n\n\nMultiAction.prototype.add = function () {\n  var actions = __slice.call(arguments, 0);\n\n  this.actions = this.actions.concat(actions);\n  return this;\n};\n/**\n * multiAction.cancel()\n *\n * @actions\n */\n\n\nMultiAction.prototype.cancel = function () {\n  this.actions = [];\n};\n/**\n * multiAction.perform()\n *\n * @actions\n */\n\n\nMultiAction.prototype.perform = function (cb) {\n  if (typeof cb === 'function') {\n    if (this.element) {\n      this.element.performMultiAction(this, cb);\n    } else {\n      this.browser.performMultiAction(this, cb);\n    }\n  } else {\n    if (this.element) {\n      return this.element.performMultiAction(this);\n    } else {\n      return this.browser.performMultiAction(this);\n    }\n  }\n};\n/**\n * new InputDevice({type?, id?})\n * \n * type is either pointer, key, or none (default is 'none')\n */\n\n\nvar InputDevice = function (opts) {\n  opts = opts || {};\n  this.type = opts.type || \"none\";\n  this.id = opts.id;\n\n  if (this.type === \"pointer\") {\n    if (opts.pointerType) {\n      this.parameters = {};\n      this.parameters.pointerType = opts.pointerType;\n    } else if (_.isObject(opts.parameters)) {\n      this.parameters = opts.parameters;\n    } else {\n      // Defaults to 'touch' because\n      this.parameters = {\n        pointerType: 'touch'\n      };\n    }\n  }\n\n  this.actions = [];\n};\n\nInputDevice.ACTION_TYPES = {\n  KEY: \"key\",\n  POINTER: \"pointer\",\n  NONE: \"none\"\n}; // Map special keys to unicode characters\n\nInputDevice.KEYS = {\n  \"UNIDENTIFIED\": \"\\uE000\",\n  \"CANCEL\": \"\\uE001\",\n  \"HELP\": \"\\uE002\",\n  \"BACKSPACCE\": \"\\uE003\",\n  \"TAB\": \"\\uE004\",\n  \"CLEAR\": \"\\uE005\",\n  \"RETURN\": \"\\uE006\",\n  \"ENTER\": \"\\uE007\",\n  \"SHIFT\": \"\\uE008\",\n  \"CONTROL\": \"\\uE009\",\n  \"ALT\": \"\\uE00A\",\n  \"PAUSE\": \"\\uE00B\",\n  \"ESCAPE\": \"\\uE00C\",\n  \"WHITESPACE\": \"\\uE00D\",\n  \"PAGE_UP\": \"\\uE00E\",\n  \"PAGE_DOWN\": \"\\uE00F\",\n  \"END\": \"\\uE010\",\n  \"HOME\": \"\\uE011\",\n  \"ARROW_LEFT\": \"\\uE012\",\n  \"ARROW_UP\": \"\\uE013\",\n  \"ARROW_RIGHT\": \"\\uE014\",\n  \"ARROW_DOWN\": \"\\uE015\",\n  \"INSERT\": \"\\uE016\",\n  \"DELETE\": \"\\uE017\",\n  \";\": \"\\uE018\",\n  \"=\": \"\\uE019\",\n  \"0\": \"\\uE01A\",\n  \"1\": \"\\uE01B\",\n  \"2\": \"\\uE01C\",\n  \"3\": \"\\uE01D\",\n  \"4\": \"\\uE01E\",\n  \"5\": \"\\uE01F\",\n  \"6\": \"\\uE020\",\n  \"7\": \"\\uE021\",\n  \"8\": \"\\uE022\",\n  \"9\": \"\\uE023\",\n  \"*\": \"\\uE024\",\n  \"+\": \"\\uE025\",\n  \",\": \"\\uE026\",\n  \"-\": \"\\uE027\",\n  \".\": \"\\uE028\",\n  \"/\": \"\\uE029\",\n  \"F1\": \"\\uE031\",\n  \"F2\": \"\\uE032\",\n  \"F3\": \"\\uE033\",\n  \"F4\": \"\\uE034\",\n  \"F5\": \"\\uE035\",\n  \"F6\": \"\\uE036\",\n  \"F7\": \"\\uE037\",\n  \"F8\": \"\\uE038\",\n  \"F9\": \"\\uE039\",\n  \"F10\": \"\\uE03A\",\n  \"F11\": \"\\uE03B\",\n  \"F12\": \"\\uE03C\",\n  \"META\": \"\\uE03D\",\n  \"ZENKAKU_HANKAKU\": \"\\uE040\"\n};\n\nInputDevice.prototype.addAction = function (actionType, opts) {\n  // preparing opts\n  var finalOpts = {};\n\n  _(opts).each(function (value, name) {\n    if (_.isNumber(value)) {\n      finalOpts[name] = value;\n    } else if (value instanceof Element) {\n      finalOpts[name] = value.value;\n    } else if (value) {\n      finalOpts[name] = value;\n    }\n  });\n\n  this.actions.push(Object.assign({\n    type: actionType\n  }, finalOpts));\n};\n/**\n * pause(duration)\n * \n * Pause this input source for a duration (in ms)\n * \n * value is a string containing a single Unicode code point (any value in the Unicode code space)\n * \n * @actions\n */\n\n\nInputDevice.prototype.pause = function (opts) {\n  var duration = _.isNumber(opts) ? opts : opts.duration;\n  this.addAction(\"pause\", {\n    duration: duration\n  });\n};\n/**\n * keyDown({value})\n * \n * Press a key.\n * \n * value is a string containing a single Unicode code point (any value in the Unicode code space)\n * \n * @actions\n */\n\n\nInputDevice.prototype.keyDown = function (opts) {\n  return this.keyPressEvent(\"keyDown\", opts);\n};\n/**\n * keyUp({value})\n * \n * Release a key press.\n * \n * value is a string containing a single Unicode code point (any value in the Unicode code space)\n * \n * @actions\n */\n\n\nInputDevice.prototype.keyUp = function (opts) {\n  return this.keyPressEvent(\"keyUp\", opts);\n};\n\nInputDevice.prototype.keyPressEvent = function (type, opts) {\n  opts = opts || {};\n\n  if (_.isString(opts)) {\n    opts = {\n      value: opts\n    };\n  }\n\n  this.addAction(type, opts);\n  return this;\n};\n/**\n * pointerDown({button})\n * \n * Depress a pointer button. Defaults to 0.\n * \n * @actions \n */\n\n\nInputDevice.prototype.pointerDown = function (opts) {\n  return this.pointerButtonAction(\"pointerDown\", opts);\n};\n/**\n * pointerUp({button})\n * \n * Release a pointer button. Defaults to 0.\n * \n * @actions\n */\n\n\nInputDevice.prototype.pointerUp = function (opts) {\n  return this.pointerButtonAction(\"pointerUp\", opts);\n};\n\nInputDevice.prototype.pointerButtonAction = function (type, opts) {\n  opts = opts || {};\n\n  if (_.isNumber(opts)) {\n    opts = {\n      button: opts\n    };\n  } else if (_.isNil(opts.button)) {\n    opts.button = 0;\n  }\n\n  this.addAction(type, opts);\n  return this;\n};\n\nInputDevice.prototype.pointerCancel = function (opts) {\n  this.addAction(\"pointerCancel\", _.defaults(opts, {\n    button: 0\n  }));\n  return this;\n};\n/**\n * pointerMove({el, duration, origin, x, y})\n * \n * * 'origin' must be either viewport or pointer (default is 'viewport'). \n * * If el is set, origin will be that element\n * * 'x, y' Are coordinates relative to the origin\n * * 'duration' is an optional time in ms that determines how long the movement takes (default 0)\n * \n * @param {*} opts \n */\n\n\nInputDevice.prototype.pointerMove = function (opts) {\n  opts = opts || {};\n  var el = opts.el || opts.element;\n\n  if (el && !(el instanceof Element)) {\n    throw new Error('Invalid element or el field passed');\n  }\n\n  if (el instanceof Element) {\n    opts.origin = {\n      \"element-6066-11e4-a52e-4f735466cecf\": el.value\n    };\n  }\n\n  this.addAction(\"pointerMove\", opts);\n};\n\nInputDevice.prototype.toJSON = function () {\n  return _.omitBy(this, _.isFunction);\n};\n\nvar W3CActions = function (driver) {\n  this.driver = driver;\n  this.touchCount = 1;\n  this.inputs = {};\n};\n/**\n * w3cActions.addInputDevice(inputSource)\n *\n * @actions\n */\n\n\nW3CActions.prototype.addInputDevice = function (inputSource) {\n  if (_.isNil(inputSource.id)) {\n    if (inputSource.type === \"pointer\") {\n      var pointerType = inputSource.parameters.pointerType;\n\n      if (pointerType === \"touch\") {\n        inputSource.id = \"finger\" + this.touchCount; // finger1, finger2, etc... for multi touch\n\n        this.touchCount++;\n      } else if (pointerType === \"mouse\") {\n        inputSource.id = \"default mouse\"; // Same name as what Java client uses\n      } else {\n        inputSource.id = pointerType;\n      }\n    } else {\n      inputSource.id = inputSource.type === \"key\" ? \"keyboard\" : inputSource.type;\n    }\n\n    this.inputs[inputSource.id] = new InputDevice(inputSource);\n  }\n\n  return this.inputs[inputSource.id];\n};\n\nW3CActions.prototype.addTouchInput = function () {\n  return this.addInputDevice({\n    type: \"pointer\",\n    parameters: {\n      pointerType: \"touch\"\n    }\n  });\n};\n\nW3CActions.prototype.addMouseInput = function () {\n  return this.addInputDevice({\n    type: \"pointer\",\n    parameters: {\n      pointerType: \"mouse\"\n    }\n  });\n};\n\nW3CActions.prototype.addPenInput = function () {\n  return this.addInputDevice({\n    type: \"pointer\",\n    parameters: {\n      pointerType: \"pen\"\n    }\n  });\n};\n\nW3CActions.prototype.addKeyInput = function () {\n  return this.addInputDevice({\n    type: \"key\"\n  });\n};\n/**\n * multiAction.perform()\n *\n * @actions\n */\n\n\nW3CActions.prototype.perform = function (cb) {\n  if (typeof cb === 'function') {\n    return this.driver.performW3CActions(this, cb);\n  } else {\n    return this.driver.performW3CActions(this);\n  }\n};\n\nW3CActions.prototype.toJSON = function () {\n  var actions = _.values(this.inputs, function (input) {\n    input.toJSON();\n  });\n\n  return {\n    actions: actions\n  };\n};\n\nmodule.exports = {\n  TouchAction: TouchAction,\n  MultiAction: MultiAction,\n  InputDevice: InputDevice,\n  W3CActions: W3CActions\n};","map":{"version":3,"sources":["/home/yanxiaoyang/react-project/PersonalWebsiteTest/node_modules/wd/lib/actions.js"],"names":["__slice","Array","prototype","slice","_","require","Webdriver","Element","TouchAction","driver","gestures","addGesture","action","opts","el","element","Error","finalOpts","each","value","name","isNumber","push","options","toJSON","longPress","moveTo","press","release","tap","wait","ms","cancel","perform","cb","performTouchAction","MultiAction","browserOrElement","browser","actions","output","elementId","map","add","call","arguments","concat","performMultiAction","InputDevice","type","id","pointerType","parameters","isObject","ACTION_TYPES","KEY","POINTER","NONE","KEYS","addAction","actionType","Object","assign","pause","duration","keyDown","keyPressEvent","keyUp","isString","pointerDown","pointerButtonAction","pointerUp","button","isNil","pointerCancel","defaults","pointerMove","origin","omitBy","isFunction","W3CActions","touchCount","inputs","addInputDevice","inputSource","addTouchInput","addMouseInput","addPenInput","addKeyInput","performW3CActions","values","input","module","exports"],"mappings":"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","sourcesContent":["var __slice = Array.prototype.slice,\n    _ = require('lodash'),\n    Webdriver = require('./webdriver'),\n    Element = require('./element');\n\n/**\n * new wd.TouchAction()\n * TouchAction constructor\n *\n * @actions\n */\nvar TouchAction = function (driver) {\n  this.driver = driver;\n  this.gestures = [];\n};\n\nTouchAction.prototype.addGesture = function(action, opts) {\n  opts = opts || {};\n  var el = opts.element || opts.el;\n  if(el && !(el instanceof Element)) {\n    throw new Error('Invalid element or el field passed');\n  }\n\n  // preparing opts\n  var finalOpts = {};\n  _(opts).each(function(value, name) {\n    if(_.isNumber(value)) {\n      finalOpts[name] = value;\n    } else if(value instanceof Element) {\n      finalOpts[name] = value.value;\n    } else if(value) {\n      finalOpts[name] = value;\n    }\n  });\n  if(finalOpts.el) {\n    finalOpts.element = finalOpts.el;\n    delete finalOpts.el;\n  }\n\n  // adding action\n  this.gestures.push({\n    action: action,\n    options: finalOpts\n  });\n};\n\nTouchAction.prototype.toJSON = function() {\n  return this.gestures;\n};\n\n/**\n * touchAction.longPress({el, x, y})\n * pass el or (x,y) or both\n *\n * @actions\n */\nTouchAction.prototype.longPress = function (opts) {\n  this.addGesture('longPress', opts);\n  return this;\n};\n\n/**\n * touchAction.moveTo({el, x, y})\n * pass el or (x,y) or both\n *\n * @actions\n */\nTouchAction.prototype.moveTo = function (opts) {\n  this.addGesture('moveTo', opts);\n  return this;\n};\n\n/**\n * touchAction.press({el, x, y})\n * pass el or (x,y) or both\n *\n * @actions\n */\nTouchAction.prototype.press = function (opts) {\n  this.addGesture('press', opts);\n  return this;\n};\n\n/**\n * touchAction.release()\n *\n * @actions\n */\nTouchAction.prototype.release = function () {\n  this.addGesture('release', {});\n  return this;\n};\n\n/**\n * touchAction.tap({el, x, y, count})\n * pass el or (x,y) or both\n * count is optional\n *\n * @actions\n */\nTouchAction.prototype.tap = function (opts) {\n  this.addGesture('tap', opts);\n  return this;\n};\n\n/**\n * touchAction.wait({ms})\n * touchAction.wait(ms)\n * ms is optional\n *\n * @actions\n */\nTouchAction.prototype.wait = function (opts) {\n  if(_.isNumber(opts)) { opts = {ms: opts}; }\n  this.addGesture('wait', opts);\n  return this;\n};\n\n/**\n * cancel the action\n *\n * @actions\n */\nTouchAction.prototype.cancel = function () {\n  this.gestures = [];\n};\n\n/**\n * perform the action\n *\n * @actions\n */\nTouchAction.prototype.perform = function(cb) {\n  if(typeof cb === 'function') {\n    this.driver.performTouchAction(this, cb);\n  } else {\n    return this.driver.performTouchAction(this);\n  }\n};\n\n/**\n * new wd.MultiAction()\n * MultiAction constructor\n *\n * @actions\n */\nvar MultiAction = function (browserOrElement) {\n  if(browserOrElement instanceof Element) {\n    this.element = browserOrElement;\n    this.browser = this.element.browser;\n  } else if (browserOrElement instanceof Webdriver) {\n    this.browser = browserOrElement;\n  }\n  this.actions = [];\n};\n\nMultiAction.prototype.toJSON = function() {\n  var output = {};\n  if(this.element) { output.elementId = this.element.value; }\n  output.actions = _(this.actions).map(function(action) {\n    return action.toJSON();\n  }).value();\n  return output;\n};\n\n/**\n * multiAction.add(touchAction)\n *\n * @actions\n */\nMultiAction.prototype.add = function () {\n  var actions = __slice.call(arguments, 0);\n  this.actions = this.actions.concat(actions);\n  return this;\n};\n\n/**\n * multiAction.cancel()\n *\n * @actions\n */\nMultiAction.prototype.cancel = function() {\n  this.actions = [];\n};\n\n/**\n * multiAction.perform()\n *\n * @actions\n */\nMultiAction.prototype.perform = function(cb) {\n  if(typeof cb === 'function') {\n    if(this.element){\n      this.element.performMultiAction(this, cb);\n    } else {\n      this.browser.performMultiAction(this, cb);\n    }\n  } else {\n    if(this.element){\n      return this.element.performMultiAction(this);\n    } else {\n      return this.browser.performMultiAction(this);\n    }\n  }\n};\n\n/**\n * new InputDevice({type?, id?})\n * \n * type is either pointer, key, or none (default is 'none')\n */\nvar InputDevice = function (opts) {\n  opts = opts || {};\n  this.type = opts.type || \"none\";\n  this.id = opts.id;\n  if (this.type === \"pointer\") {\n    if (opts.pointerType) {\n      this.parameters = {};\n      this.parameters.pointerType = opts.pointerType;\n    } else if (_.isObject(opts.parameters)) {\n      this.parameters = opts.parameters;\n    } else {\n      // Defaults to 'touch' because\n      this.parameters = {\n        pointerType: 'touch'\n      }; \n    }\n  }\n  this.actions = [];\n};\n\nInputDevice.ACTION_TYPES = {\n  KEY: \"key\",\n  POINTER: \"pointer\",\n  NONE: \"none\"\n};\n\n// Map special keys to unicode characters\nInputDevice.KEYS = {\n  \"UNIDENTIFIED\": \"\\uE000\",\n  \"CANCEL\": \"\\uE001\",\n  \"HELP\": \"\\uE002\",\n  \"BACKSPACCE\": \"\\uE003\",\n  \"TAB\": \"\\uE004\",\n  \"CLEAR\": \"\\uE005\",\n  \"RETURN\": \"\\uE006\",\n  \"ENTER\": \"\\uE007\",\n  \"SHIFT\": \"\\uE008\",\n  \"CONTROL\": \"\\uE009\",\n  \"ALT\": \"\\uE00A\",\n  \"PAUSE\": \"\\uE00B\",\n  \"ESCAPE\": \"\\uE00C\",\n  \"WHITESPACE\": \"\\uE00D\",\n  \"PAGE_UP\": \"\\uE00E\",\n  \"PAGE_DOWN\": \"\\uE00F\",\n  \"END\": \"\\uE010\",\n  \"HOME\": \"\\uE011\",\n  \"ARROW_LEFT\": \"\\uE012\",\n  \"ARROW_UP\": \"\\uE013\",\n  \"ARROW_RIGHT\": \"\\uE014\",\n  \"ARROW_DOWN\": \"\\uE015\",\n  \"INSERT\": \"\\uE016\",\n  \"DELETE\": \"\\uE017\",\n  \";\": \"\\uE018\",\n  \"=\": \"\\uE019\",\n  \"0\": \"\\uE01A\",\n  \"1\": \"\\uE01B\",\n  \"2\": \"\\uE01C\",\n  \"3\": \"\\uE01D\",\n  \"4\": \"\\uE01E\",\n  \"5\": \"\\uE01F\",\n  \"6\": \"\\uE020\",\n  \"7\": \"\\uE021\",\n  \"8\": \"\\uE022\",\n  \"9\": \"\\uE023\",\n  \"*\": \"\\uE024\",\n  \"+\": \"\\uE025\",\n  \",\": \"\\uE026\",\n  \"-\": \"\\uE027\",\n  \".\": \"\\uE028\",\n  \"/\": \"\\uE029\",\n  \"F1\": \"\\uE031\",\n  \"F2\": \"\\uE032\",\n  \"F3\": \"\\uE033\",\n  \"F4\": \"\\uE034\",\n  \"F5\": \"\\uE035\",\n  \"F6\": \"\\uE036\",\n  \"F7\": \"\\uE037\",\n  \"F8\": \"\\uE038\",\n  \"F9\": \"\\uE039\",\n  \"F10\": \"\\uE03A\",\n  \"F11\": \"\\uE03B\",\n  \"F12\": \"\\uE03C\",\n  \"META\": \"\\uE03D\",\n  \"ZENKAKU_HANKAKU\": \"\\uE040\"\n};\n\nInputDevice.prototype.addAction = function (actionType, opts) {\n  // preparing opts\n  var finalOpts = {};\n  _(opts).each(function(value, name) {\n    if(_.isNumber(value)) {\n      finalOpts[name] = value;\n    } else if(value instanceof Element) {\n      finalOpts[name] = value.value;\n    } else if(value) {\n      finalOpts[name] = value;\n    }\n  });\n\n  this.actions.push(Object.assign({\n    type: actionType\n  }, finalOpts));\n};\n\n/**\n * pause(duration)\n * \n * Pause this input source for a duration (in ms)\n * \n * value is a string containing a single Unicode code point (any value in the Unicode code space)\n * \n * @actions\n */\nInputDevice.prototype.pause = function(opts) {\n  var duration = _.isNumber(opts) ? opts : opts.duration;\n  this.addAction(\"pause\", {duration: duration});\n};\n\n/**\n * keyDown({value})\n * \n * Press a key.\n * \n * value is a string containing a single Unicode code point (any value in the Unicode code space)\n * \n * @actions\n */\nInputDevice.prototype.keyDown = function(opts) {\n  return this.keyPressEvent(\"keyDown\", opts);\n};\n\n/**\n * keyUp({value})\n * \n * Release a key press.\n * \n * value is a string containing a single Unicode code point (any value in the Unicode code space)\n * \n * @actions\n */\nInputDevice.prototype.keyUp = function (opts) {\n  return this.keyPressEvent(\"keyUp\", opts);\n};\n\nInputDevice.prototype.keyPressEvent = function (type, opts) {\n  opts = opts || {};\n  if (_.isString(opts)) {\n    opts = {value: opts};\n  }\n  this.addAction(type, opts);\n  return this;\n\n};\n\n/**\n * pointerDown({button})\n * \n * Depress a pointer button. Defaults to 0.\n * \n * @actions \n */\nInputDevice.prototype.pointerDown = function (opts) {\n  return this.pointerButtonAction(\"pointerDown\", opts);\n};\n\n/**\n * pointerUp({button})\n * \n * Release a pointer button. Defaults to 0.\n * \n * @actions\n */\nInputDevice.prototype.pointerUp = function (opts) {\n  return this.pointerButtonAction(\"pointerUp\", opts);\n};\n\nInputDevice.prototype.pointerButtonAction = function (type, opts) {\n  opts = opts || {};\n  if (_.isNumber(opts)) {\n    opts = {button: opts};\n  } else if (_.isNil(opts.button)) {\n    opts.button = 0;\n  }\n  this.addAction(type, opts);\n  return this;\n\n};\n\nInputDevice.prototype.pointerCancel = function (opts) {\n  this.addAction(\"pointerCancel\", _.defaults(opts, {\n    button: 0\n  }));\n  return this;\n};\n\n/**\n * pointerMove({el, duration, origin, x, y})\n * \n * * 'origin' must be either viewport or pointer (default is 'viewport'). \n * * If el is set, origin will be that element\n * * 'x, y' Are coordinates relative to the origin\n * * 'duration' is an optional time in ms that determines how long the movement takes (default 0)\n * \n * @param {*} opts \n */\nInputDevice.prototype.pointerMove = function (opts) {\n  opts = opts || {};\n  var el = opts.el || opts.element;\n\n  if(el && !(el instanceof Element)) {\n    throw new Error('Invalid element or el field passed');\n  }\n\n  if(el instanceof Element) {\n    opts.origin = {\"element-6066-11e4-a52e-4f735466cecf\": el.value};\n  }\n  this.addAction(\"pointerMove\", opts);\n};\n\nInputDevice.prototype.toJSON = function () {\n  return _.omitBy(this, _.isFunction);\n};\n\nvar W3CActions = function (driver) {\n  this.driver = driver;\n  this.touchCount = 1;\n  this.inputs = {};\n};\n\n/**\n * w3cActions.addInputDevice(inputSource)\n *\n * @actions\n */\nW3CActions.prototype.addInputDevice = function (inputSource) {\n  if (_.isNil(inputSource.id)) {\n    if (inputSource.type === \"pointer\") {\n      var pointerType = inputSource.parameters.pointerType;\n      if (pointerType === \"touch\") {\n        inputSource.id = \"finger\" + this.touchCount; // finger1, finger2, etc... for multi touch\n        this.touchCount++;\n      } else if(pointerType === \"mouse\") {\n        inputSource.id = \"default mouse\"; // Same name as what Java client uses\n      } else {\n        inputSource.id = pointerType;\n      }\n    } else {\n      inputSource.id = inputSource.type === \"key\" ? \"keyboard\" : inputSource.type;\n    }\n    this.inputs[inputSource.id] = new InputDevice(inputSource);\n  }\n  return this.inputs[inputSource.id];\n};\n\nW3CActions.prototype.addTouchInput = function () {\n  return this.addInputDevice({type: \"pointer\", parameters: {pointerType: \"touch\"}});\n};\n\nW3CActions.prototype.addMouseInput = function () {\n  return this.addInputDevice({type: \"pointer\", parameters: {pointerType: \"mouse\"}});\n};\n\nW3CActions.prototype.addPenInput = function () {\n  return this.addInputDevice({type: \"pointer\", parameters: {pointerType: \"pen\"}});\n};\n\nW3CActions.prototype.addKeyInput = function () {\n  return this.addInputDevice({type: \"key\"});\n};\n\n/**\n * multiAction.perform()\n *\n * @actions\n */\nW3CActions.prototype.perform = function(cb) {\n  if(typeof cb === 'function') {\n    return this.driver.performW3CActions(this, cb);\n  } else {\n    return this.driver.performW3CActions(this);\n  }\n};\n\nW3CActions.prototype.toJSON = function () {\n  var actions = _.values(this.inputs, function (input) { input.toJSON(); });\n  return {\n    actions: actions\n  };\n};\n\nmodule.exports = {\n  TouchAction: TouchAction,\n  MultiAction: MultiAction,\n  InputDevice: InputDevice,\n  W3CActions: W3CActions\n};\n"]},"metadata":{},"sourceType":"script"}