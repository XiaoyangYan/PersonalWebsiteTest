{"ast":null,"code":"var __slice = Array.prototype.slice,\n    url = require('url'),\n    SPECIAL_KEYS = require('./special-keys'),\n    Webdriver = require('./webdriver'),\n    Element = require('./element'),\n    utils = require('./utils'),\n    deprecator = utils.deprecator,\n    config = require('./config'),\n    _ = require(\"lodash\"),\n    Q = require('q'),\n    actions = require('./actions');\n\nfunction buildConfigUrl(remoteWdConfig) {\n  var configUrl = _(remoteWdConfig).clone(); // for backward compatibility\n\n\n  if (configUrl.host && configUrl.host.indexOf(':') < 0 && configUrl.port) {\n    configUrl.hostname = configUrl.host;\n    delete configUrl.host;\n  } // for backward compatibility\n\n\n  if (configUrl.username) {\n    configUrl.user = configUrl.username;\n    delete configUrl.username;\n  } // for backward compatibility\n\n\n  if (configUrl.accessKey) {\n    configUrl.pwd = configUrl.accessKey;\n    delete configUrl.accessKey;\n  } // for backward compatibility\n\n\n  if (configUrl.https) {\n    configUrl.protocol = 'https:';\n    delete configUrl.https;\n  } // for backward compatibility\n\n\n  if (configUrl.path) {\n    configUrl.pathname = configUrl.path;\n    delete configUrl.path;\n  } // setting auth from user/password\n\n\n  if (configUrl.user && configUrl.pwd) {\n    configUrl.auth = configUrl.user + ':' + configUrl.pwd;\n    delete configUrl.user;\n    delete configUrl.pwd;\n  }\n\n  _.defaults(configUrl, {\n    protocol: 'http:',\n    hostname: '127.0.0.1',\n    port: '4444',\n    pathname: '/wd/hub'\n  }); // strip any trailing slashes from pathname\n\n\n  var parsed = url.parse(url.format(configUrl), true);\n\n  if (parsed.pathname[parsed.pathname.length - 1] === '/') {\n    parsed.pathname = parsed.pathname.slice(0, parsed.pathname.length - 1);\n  }\n\n  return parsed;\n} // parses server parameters\n\n\nvar parseRemoteWdConfig = function (args) {\n  var config;\n\n  if (typeof args[0] === 'object') {\n    if (args[0].href && args[0].format) {\n      // was constructed with url.parse, so we don't modify it\n      config = args[0];\n    } else {\n      config = buildConfigUrl(args[0]);\n    }\n  } else if (typeof args[0] === 'string' && args[0].match(/^https?:\\/\\//)) {\n    config = url.parse(args[0]);\n  } else {\n    config = buildConfigUrl({\n      hostname: args[0],\n      port: args[1],\n      user: args[2],\n      pwd: args[3]\n    });\n  } // saucelabs automatic config\n\n\n  if (/saucelabs\\.com/.exec(config.hostname)) {\n    if (!config.auth && process.env.SAUCE_USERNAME && process.env.SAUCE_ACCESS_KEY) {\n      config.auth = process.env.SAUCE_USERNAME + ':' + process.env.SAUCE_ACCESS_KEY;\n    }\n  }\n\n  return config;\n};\n\nvar PromiseWebdriver, PromiseElement, PromiseChainWebdriver, PromiseChainElement; // Creates the Webdriver object\n// server parameters can be passed in 4 ways\n//   - as a url string\n//   - as a url object, constructed via url.parse\n//   - as a list of arguments host,port, user, pwd\n//   - as an option object containing the fields above\n// A `driverType` string may be passed at the end of the argument list.\n// If it is a valid type it will be detected even if the other arguments\n// are ommited. Valide types are: `remote`, `promise` and `promiseChain`.\n\nfunction remote() {\n  var args = 1 <= arguments.length ? __slice.call(arguments, 0) : [];\n  var driverProtos = {\n    'async': Webdriver,\n    'promise': PromiseWebdriver,\n    'promiseChain': PromiseChainWebdriver\n  };\n\n  var driverTypes = _(driverProtos).keys();\n\n  var driverType = driverTypes.indexOf(_(args).last()) > 0 ? args.pop() : 'async';\n  var rwc = parseRemoteWdConfig(args);\n  return new driverProtos[driverType](rwc);\n}\n\nfunction wrap() {\n  var promiseProtos = require('./promise-webdriver')(Webdriver, Element, false);\n\n  PromiseWebdriver = promiseProtos.PromiseWebdriver;\n  PromiseElement = promiseProtos.PromiseElement;\n\n  var promiseChainProtos = require('./promise-webdriver')(Webdriver, Element, true);\n\n  PromiseChainWebdriver = promiseChainProtos.PromiseWebdriver;\n  PromiseChainElement = promiseChainProtos.PromiseElement;\n} // todo: allow adding element methods\n\n\nfunction addPromiseChainMethod(name, method) {\n  var wrappedMethod = function () {\n    var args = 1 <= arguments.length ? __slice.call(arguments, 0) : [];\n    var promise = new Q(method.apply(this, args));\n\n    this._enrich(promise);\n\n    return promise;\n  };\n\n  PromiseChainWebdriver.prototype[name] = wrappedMethod;\n}\n\nfunction addElementPromiseChainMethod(name, method) {\n  var wrappedMethod = function () {\n    var args = 1 <= arguments.length ? __slice.call(arguments, 0) : [];\n    var promise = new Q(method.apply(this, args));\n\n    this._enrich(promise);\n\n    return promise;\n  };\n\n  PromiseChainElement.prototype[name] = wrappedMethod;\n}\n\nfunction addPromiseMethod(name, method) {\n  var wrappedMethod = function () {\n    var args = 1 <= arguments.length ? __slice.call(arguments, 0) : [];\n    return new Q(method.apply(this, args));\n  };\n\n  PromiseWebdriver.prototype[name] = wrappedMethod;\n  addPromiseChainMethod(name, method);\n}\n\nfunction addElementPromiseMethod(name, method) {\n  var wrappedMethod = function () {\n    var args = 1 <= arguments.length ? __slice.call(arguments, 0) : [];\n    return new Q(method.apply(this, args));\n  };\n\n  PromiseElement.prototype[name] = wrappedMethod;\n  addElementPromiseChainMethod(name, method);\n}\n\nfunction addAsyncMethod(name, method) {\n  Webdriver.prototype[name] = method;\n  PromiseWebdriver.prototype[name] = PromiseWebdriver._wrapAsync(method);\n  PromiseChainWebdriver.prototype[name] = PromiseChainWebdriver._wrapAsync(method);\n}\n\nfunction addElementAsyncMethod(name, method) {\n  Element.prototype[name] = method;\n  PromiseElement.prototype[name] = PromiseWebdriver._wrapAsync(method);\n  PromiseChainElement.prototype[name] = PromiseChainWebdriver._wrapAsync(method);\n}\n\nfunction removeMethod(name) {\n  delete Webdriver.prototype[name];\n  delete PromiseWebdriver.prototype[name];\n  delete PromiseChainWebdriver.prototype[name];\n} // creates a webdriver object using the Q promise wrap not chained\n\n\nfunction asyncRemote() {\n  var args = 1 <= arguments.length ? __slice.call(arguments, 0) : [];\n  var rwc = parseRemoteWdConfig(args);\n  return new Webdriver(rwc);\n} // creates a webdriver object using the Q promise wrap not chained\n\n\nfunction promiseRemote() {\n  var args = 1 <= arguments.length ? __slice.call(arguments, 0) : [];\n  var rwc = parseRemoteWdConfig(args);\n  return new PromiseWebdriver(rwc);\n} // creates a webdriver object using the Q promise wrap chained\n\n\nfunction promiseChainRemote() {\n  var args = 1 <= arguments.length ? __slice.call(arguments, 0) : [];\n  var rwc = parseRemoteWdConfig(args);\n  return new PromiseChainWebdriver(rwc);\n} // initial wrapping\n\n\nwrap();\nmodule.exports = {\n  // Retrieves browser\n  remote: remote,\n  asyncRemote: asyncRemote,\n  // Retrieves wrap browser\n  promiseRemote: promiseRemote,\n  promiseChainRemote: promiseChainRemote,\n  // Webdriver and Wrapper base classes\n  Webdriver: Webdriver,\n  webdriver: Webdriver,\n  // for backward compatibility\n  Element: Element,\n  PromiseChainWebdriver: PromiseChainWebdriver,\n  PromiseWebdriver: PromiseWebdriver,\n  TouchAction: actions.TouchAction,\n  MultiAction: actions.MultiAction,\n  InputDevice: actions.InputDevice,\n  W3CActions: actions.W3CActions,\n  // Actualizes promise wrappers\n  rewrap: function () {\n    deprecator.warn('rewrap', 'rewrap has been deprecated, use addAsyncMethod instead.');\n    wrap();\n  },\n  // config\n\n  /**\n   * wd.configureHttp(opts)\n   *\n   * opts example:\n   * {timeout:60000, retries: 3, 'retryDelay': 15, baseUrl='http://example.com/'}\n   * more info in README.\n   *\n   * @wd\n   */\n  configureHttp: config.configureHttp,\n  getHttpConfig: function () {\n    return _(config.httpConfig).clone();\n  },\n  // deprecation\n\n  /**\n   * wd.showHideDeprecation(boolean)\n   *\n   * @wd\n   */\n  showHideDeprecation: deprecator.showHideDeprecation.bind(deprecator),\n  // add/remove methods\n\n  /**\n   * wd.addAsyncMethod(name, func)\n   *\n   * @wd\n   */\n  addAsyncMethod: addAsyncMethod,\n\n  /**\n   * wd.addElementAsyncMethod(name, func)\n   *\n   * @wd\n   */\n  addElementAsyncMethod: addElementAsyncMethod,\n\n  /**\n   * wd.addPromiseMethod(name, func)\n   *\n   * @wd\n   */\n  addPromiseMethod: addPromiseMethod,\n\n  /**\n   * wd.addElementPromiseMethod(name, func)\n   *\n   * @wd\n   */\n  addElementPromiseMethod: addElementPromiseMethod,\n\n  /**\n   * wd.addPromiseChainMethod(name, func)\n   *\n   * @wd\n   */\n  addPromiseChainMethod: addPromiseChainMethod,\n\n  /**\n   * wd.addElementPromiseChainMethod(name, func)\n   *\n   * @wd\n   */\n  addElementPromiseChainMethod: addElementPromiseChainMethod,\n\n  /**\n   * wd.removeMethod(name, func)\n   *\n   * @wd\n   */\n  removeMethod: removeMethod,\n  // Useful stuff\n  Asserter: require('./asserters').Asserter,\n  asserters: require('./asserters'),\n  SPECIAL_KEYS: SPECIAL_KEYS,\n  Q: Q,\n  findCallback: utils.findCallback,\n  varargs: utils.varargs,\n  transferPromiseness: utils.transferPromiseness,\n  // This is for people who write wrapper\n  // todo: That should not be needed.\n  utils: utils,\n  setBaseClasses: function (_Webdriver, _Element) {\n    Webdriver = _Webdriver;\n    Element = _Element;\n    wrap();\n  }\n};","map":{"version":3,"sources":["/home/yanxiaoyang/react-project/PersonalWebsiteTest/node_modules/wd/lib/main.js"],"names":["__slice","Array","prototype","slice","url","require","SPECIAL_KEYS","Webdriver","Element","utils","deprecator","config","_","Q","actions","buildConfigUrl","remoteWdConfig","configUrl","clone","host","indexOf","port","hostname","username","user","accessKey","pwd","https","protocol","path","pathname","auth","defaults","parsed","parse","format","length","parseRemoteWdConfig","args","href","match","exec","process","env","SAUCE_USERNAME","SAUCE_ACCESS_KEY","PromiseWebdriver","PromiseElement","PromiseChainWebdriver","PromiseChainElement","remote","arguments","call","driverProtos","driverTypes","keys","driverType","last","pop","rwc","wrap","promiseProtos","promiseChainProtos","addPromiseChainMethod","name","method","wrappedMethod","promise","apply","_enrich","addElementPromiseChainMethod","addPromiseMethod","addElementPromiseMethod","addAsyncMethod","_wrapAsync","addElementAsyncMethod","removeMethod","asyncRemote","promiseRemote","promiseChainRemote","module","exports","webdriver","TouchAction","MultiAction","InputDevice","W3CActions","rewrap","warn","configureHttp","getHttpConfig","httpConfig","showHideDeprecation","bind","Asserter","asserters","findCallback","varargs","transferPromiseness","setBaseClasses","_Webdriver","_Element"],"mappings":"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","sourcesContent":["var __slice = Array.prototype.slice,\n    url = require('url'),\n    SPECIAL_KEYS = require('./special-keys'),\n    Webdriver = require('./webdriver'),\n    Element = require('./element'),\n    utils = require('./utils'),\n    deprecator = utils.deprecator,\n    config = require('./config'),\n    _ = require(\"lodash\"),\n    Q = require('q'),\n    actions = require('./actions');\n\nfunction buildConfigUrl(remoteWdConfig)\n{\n  var configUrl = _(remoteWdConfig).clone();\n\n  // for backward compatibility\n  if( configUrl.host && (configUrl.host.indexOf(':') < 0) && configUrl.port )\n  {\n    configUrl.hostname = configUrl.host;\n    delete configUrl.host;\n  }\n\n  // for backward compatibility\n  if(configUrl.username){\n    configUrl.user = configUrl.username;\n    delete configUrl.username;\n  }\n\n  // for backward compatibility\n  if(configUrl.accessKey){\n    configUrl.pwd = configUrl.accessKey;\n    delete configUrl.accessKey;\n  }\n\n  // for backward compatibility\n  if(configUrl.https){\n    configUrl.protocol = 'https:';\n    delete configUrl.https;\n  }\n\n  // for backward compatibility\n  if(configUrl.path){\n    configUrl.pathname = configUrl.path;\n    delete configUrl.path;\n  }\n\n  // setting auth from user/password\n  if(configUrl.user && configUrl.pwd){\n    configUrl.auth = configUrl.user + ':' + configUrl.pwd;\n    delete configUrl.user;\n    delete configUrl.pwd;\n  }\n\n  _.defaults(configUrl, {\n    protocol: 'http:',\n    hostname: '127.0.0.1',\n    port: '4444',\n    pathname: '/wd/hub'\n  });\n\n  // strip any trailing slashes from pathname\n  var parsed = url.parse(url.format(configUrl), true);\n  if (parsed.pathname[parsed.pathname.length - 1] === '/') {\n    parsed.pathname = parsed.pathname.slice(0, parsed.pathname.length - 1);\n  }\n  return parsed;\n}\n\n// parses server parameters\nvar parseRemoteWdConfig = function(args) {\n  var config;\n  if ((typeof args[0]) === 'object') {\n    if(args[0].href && args[0].format){\n      // was constructed with url.parse, so we don't modify it\n      config = args[0];\n    } else {\n      config = buildConfigUrl( args[0] );\n    }\n  } else if ((typeof args[0]) === 'string' && (args[0].match(/^https?:\\/\\//)))  {\n    config = url.parse(args[0]);\n  } else {\n    config = buildConfigUrl( {\n      hostname: args[0],\n      port: args[1],\n      user: args[2],\n      pwd: args[3]\n    } );\n  }\n\n  // saucelabs automatic config\n  if( /saucelabs\\.com/.exec(config.hostname) )\n  {\n    if(!config.auth && process.env.SAUCE_USERNAME && process.env.SAUCE_ACCESS_KEY){\n      config.auth = process.env.SAUCE_USERNAME + ':' + process.env.SAUCE_ACCESS_KEY;\n    }\n  }\n\n  return config;\n};\n\nvar PromiseWebdriver, PromiseElement, PromiseChainWebdriver, PromiseChainElement;\n\n// Creates the Webdriver object\n// server parameters can be passed in 4 ways\n//   - as a url string\n//   - as a url object, constructed via url.parse\n//   - as a list of arguments host,port, user, pwd\n//   - as an option object containing the fields above\n// A `driverType` string may be passed at the end of the argument list.\n// If it is a valid type it will be detected even if the other arguments\n// are ommited. Valide types are: `remote`, `promise` and `promiseChain`.\nfunction remote() {\n  var args = 1 <= arguments.length ? __slice.call(arguments, 0) : [];\n  var driverProtos = {\n    'async': Webdriver,\n    'promise': PromiseWebdriver,\n    'promiseChain': PromiseChainWebdriver\n  };\n  var driverTypes = _(driverProtos).keys();\n  var driverType = driverTypes.indexOf(_(args).last())>0 ? args.pop() : 'async';\n\n  var rwc = parseRemoteWdConfig(args);\n  return new (driverProtos[driverType])(rwc);\n}\n\nfunction wrap() {\n  var promiseProtos = require('./promise-webdriver')(Webdriver, Element, false);\n  PromiseWebdriver = promiseProtos.PromiseWebdriver;\n  PromiseElement = promiseProtos.PromiseElement;\n  var promiseChainProtos = require('./promise-webdriver')(Webdriver, Element, true);\n  PromiseChainWebdriver = promiseChainProtos.PromiseWebdriver;\n  PromiseChainElement = promiseChainProtos.PromiseElement;\n}\n\n// todo: allow adding element methods\n\nfunction addPromiseChainMethod(name, method) {\n  var wrappedMethod = function() {\n    var args = 1 <= arguments.length ? __slice.call(arguments, 0) : [];\n    var promise = new Q(method.apply(this, args));\n    this._enrich(promise);\n    return promise;\n  };\n  PromiseChainWebdriver.prototype[name] = wrappedMethod;\n}\n\nfunction addElementPromiseChainMethod(name, method) {\n  var wrappedMethod = function() {\n    var args = 1 <= arguments.length ? __slice.call(arguments, 0) : [];\n    var promise = new Q(method.apply(this, args));\n    this._enrich(promise);\n    return promise;\n  };\n  PromiseChainElement.prototype[name] = wrappedMethod;\n}\n\nfunction addPromiseMethod(name, method) {\n  var wrappedMethod = function() {\n    var args = 1 <= arguments.length ? __slice.call(arguments, 0) : [];\n    return new Q(method.apply(this, args));\n  };\n  PromiseWebdriver.prototype[name] = wrappedMethod;\n  addPromiseChainMethod(name, method);\n}\n\nfunction addElementPromiseMethod(name, method) {\n  var wrappedMethod = function() {\n    var args = 1 <= arguments.length ? __slice.call(arguments, 0) : [];\n    return new Q(method.apply(this, args));\n  };\n  PromiseElement.prototype[name] = wrappedMethod;\n  addElementPromiseChainMethod(name, method);\n}\n\nfunction addAsyncMethod(name, method) {\n  Webdriver.prototype[name] = method;\n  PromiseWebdriver.prototype[name] = PromiseWebdriver._wrapAsync(method);\n  PromiseChainWebdriver.prototype[name] = PromiseChainWebdriver._wrapAsync(method);\n}\n\nfunction addElementAsyncMethod(name, method) {\n  Element.prototype[name] = method;\n  PromiseElement.prototype[name] = PromiseWebdriver._wrapAsync(method);\n  PromiseChainElement.prototype[name] = PromiseChainWebdriver._wrapAsync(method);\n}\n\nfunction removeMethod(name) {\n  delete Webdriver.prototype[name];\n  delete PromiseWebdriver.prototype[name];\n  delete PromiseChainWebdriver.prototype[name];\n}\n\n// creates a webdriver object using the Q promise wrap not chained\nfunction asyncRemote() {\n  var args = 1 <= arguments.length ? __slice.call(arguments, 0) : [];\n  var rwc = parseRemoteWdConfig(args);\n  return new Webdriver(rwc);\n}\n\n// creates a webdriver object using the Q promise wrap not chained\nfunction promiseRemote() {\n  var args = 1 <= arguments.length ? __slice.call(arguments, 0) : [];\n  var rwc = parseRemoteWdConfig(args);\n  return new PromiseWebdriver(rwc);\n}\n\n// creates a webdriver object using the Q promise wrap chained\nfunction promiseChainRemote() {\n  var args = 1 <= arguments.length ? __slice.call(arguments, 0) : [];\n  var rwc = parseRemoteWdConfig(args);\n  return new PromiseChainWebdriver(rwc);\n}\n\n// initial wrapping\nwrap();\n\nmodule.exports = {\n  // Retrieves browser\n  remote: remote,\n  asyncRemote: asyncRemote,\n\n  // Retrieves wrap browser\n  promiseRemote: promiseRemote,\n  promiseChainRemote: promiseChainRemote,\n\n  // Webdriver and Wrapper base classes\n  Webdriver: Webdriver,\n  webdriver: Webdriver, // for backward compatibility\n  Element: Element,\n  PromiseChainWebdriver: PromiseChainWebdriver,\n  PromiseWebdriver: PromiseWebdriver,\n  TouchAction: actions.TouchAction,\n  MultiAction: actions.MultiAction,\n  InputDevice: actions.InputDevice,\n  W3CActions: actions.W3CActions,\n\n  // Actualizes promise wrappers\n  rewrap: function() {\n    deprecator.warn('rewrap',\n    'rewrap has been deprecated, use addAsyncMethod instead.');\n    wrap();\n  },\n\n  // config\n  /**\n   * wd.configureHttp(opts)\n   *\n   * opts example:\n   * {timeout:60000, retries: 3, 'retryDelay': 15, baseUrl='http://example.com/'}\n   * more info in README.\n   *\n   * @wd\n   */\n  configureHttp: config.configureHttp,\n  getHttpConfig: function() { return _(config.httpConfig).clone(); },\n\n  // deprecation\n  /**\n   * wd.showHideDeprecation(boolean)\n   *\n   * @wd\n   */\n  showHideDeprecation: deprecator.showHideDeprecation.bind(deprecator),\n\n  // add/remove methods\n  /**\n   * wd.addAsyncMethod(name, func)\n   *\n   * @wd\n   */\n  addAsyncMethod: addAsyncMethod,\n  /**\n   * wd.addElementAsyncMethod(name, func)\n   *\n   * @wd\n   */\n  addElementAsyncMethod: addElementAsyncMethod,\n  /**\n   * wd.addPromiseMethod(name, func)\n   *\n   * @wd\n   */\n  addPromiseMethod: addPromiseMethod,\n  /**\n   * wd.addElementPromiseMethod(name, func)\n   *\n   * @wd\n   */\n  addElementPromiseMethod: addElementPromiseMethod,\n  /**\n   * wd.addPromiseChainMethod(name, func)\n   *\n   * @wd\n   */\n  addPromiseChainMethod: addPromiseChainMethod,\n  /**\n   * wd.addElementPromiseChainMethod(name, func)\n   *\n   * @wd\n   */\n  addElementPromiseChainMethod: addElementPromiseChainMethod,\n  /**\n   * wd.removeMethod(name, func)\n   *\n   * @wd\n   */\n  removeMethod: removeMethod,\n\n  // Useful stuff\n  Asserter: require('./asserters').Asserter,\n  asserters: require('./asserters'),\n  SPECIAL_KEYS: SPECIAL_KEYS,\n  Q: Q,\n  findCallback: utils.findCallback,\n  varargs: utils.varargs,\n  transferPromiseness: utils.transferPromiseness,\n\n  // This is for people who write wrapper\n  // todo: That should not be needed.\n  utils: utils,\n\n  setBaseClasses: function(_Webdriver, _Element) {\n    Webdriver = _Webdriver;\n    Element = _Element;\n    wrap();\n  }\n};\n"]},"metadata":{},"sourceType":"script"}