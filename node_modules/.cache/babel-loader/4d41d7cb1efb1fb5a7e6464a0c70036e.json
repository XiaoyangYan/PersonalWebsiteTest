{"ast":null,"code":"/**\r\n * node-compress-commons\r\n *\r\n * Copyright (c) 2014 Chris Talkington, contributors.\r\n * Licensed under the MIT license.\r\n * https://github.com/archiverjs/node-compress-commons/blob/master/LICENSE-MIT\r\n */\nvar zipUtil = require('./util');\n\nvar DATA_DESCRIPTOR_FLAG = 1 << 3;\nvar ENCRYPTION_FLAG = 1 << 0;\nvar NUMBER_OF_SHANNON_FANO_TREES_FLAG = 1 << 2;\nvar SLIDING_DICTIONARY_SIZE_FLAG = 1 << 1;\nvar STRONG_ENCRYPTION_FLAG = 1 << 6;\nvar UFT8_NAMES_FLAG = 1 << 11;\n\nvar GeneralPurposeBit = module.exports = function () {\n  if (!(this instanceof GeneralPurposeBit)) {\n    return new GeneralPurposeBit();\n  }\n\n  this.descriptor = false;\n  this.encryption = false;\n  this.utf8 = false;\n  this.numberOfShannonFanoTrees = 0;\n  this.strongEncryption = false;\n  this.slidingDictionarySize = 0;\n  return this;\n};\n\nGeneralPurposeBit.prototype.encode = function () {\n  return zipUtil.getShortBytes((this.descriptor ? DATA_DESCRIPTOR_FLAG : 0) | (this.utf8 ? UFT8_NAMES_FLAG : 0) | (this.encryption ? ENCRYPTION_FLAG : 0) | (this.strongEncryption ? STRONG_ENCRYPTION_FLAG : 0));\n};\n\nGeneralPurposeBit.prototype.parse = function (buf, offset) {\n  var flag = zipUtil.getShortBytesValue(buf, offset);\n  var gbp = new GeneralPurposeBit();\n  gbp.useDataDescriptor((flag & DATA_DESCRIPTOR_FLAG) !== 0);\n  gbp.useUTF8ForNames((flag & UFT8_NAMES_FLAG) !== 0);\n  gbp.useStrongEncryption((flag & STRONG_ENCRYPTION_FLAG) !== 0);\n  gbp.useEncryption((flag & ENCRYPTION_FLAG) !== 0);\n  gbp.setSlidingDictionarySize((flag & SLIDING_DICTIONARY_SIZE_FLAG) !== 0 ? 8192 : 4096);\n  gbp.setNumberOfShannonFanoTrees((flag & NUMBER_OF_SHANNON_FANO_TREES_FLAG) !== 0 ? 3 : 2);\n  return gbp;\n};\n\nGeneralPurposeBit.prototype.setNumberOfShannonFanoTrees = function (n) {\n  this.numberOfShannonFanoTrees = n;\n};\n\nGeneralPurposeBit.prototype.getNumberOfShannonFanoTrees = function () {\n  return this.numberOfShannonFanoTrees;\n};\n\nGeneralPurposeBit.prototype.setSlidingDictionarySize = function (n) {\n  this.slidingDictionarySize = n;\n};\n\nGeneralPurposeBit.prototype.getSlidingDictionarySize = function () {\n  return this.slidingDictionarySize;\n};\n\nGeneralPurposeBit.prototype.useDataDescriptor = function (b) {\n  this.descriptor = b;\n};\n\nGeneralPurposeBit.prototype.usesDataDescriptor = function () {\n  return this.descriptor;\n};\n\nGeneralPurposeBit.prototype.useEncryption = function (b) {\n  this.encryption = b;\n};\n\nGeneralPurposeBit.prototype.usesEncryption = function () {\n  return this.encryption;\n};\n\nGeneralPurposeBit.prototype.useStrongEncryption = function (b) {\n  this.strongEncryption = b;\n};\n\nGeneralPurposeBit.prototype.usesStrongEncryption = function () {\n  return this.strongEncryption;\n};\n\nGeneralPurposeBit.prototype.useUTF8ForNames = function (b) {\n  this.utf8 = b;\n};\n\nGeneralPurposeBit.prototype.usesUTF8ForNames = function () {\n  return this.utf8;\n};","map":{"version":3,"sources":["/home/yanxiaoyang/react-project/PersonalWebsiteTest/node_modules/compress-commons/lib/archivers/zip/general-purpose-bit.js"],"names":["zipUtil","require","DATA_DESCRIPTOR_FLAG","ENCRYPTION_FLAG","NUMBER_OF_SHANNON_FANO_TREES_FLAG","SLIDING_DICTIONARY_SIZE_FLAG","STRONG_ENCRYPTION_FLAG","UFT8_NAMES_FLAG","GeneralPurposeBit","module","exports","descriptor","encryption","utf8","numberOfShannonFanoTrees","strongEncryption","slidingDictionarySize","prototype","encode","getShortBytes","parse","buf","offset","flag","getShortBytesValue","gbp","useDataDescriptor","useUTF8ForNames","useStrongEncryption","useEncryption","setSlidingDictionarySize","setNumberOfShannonFanoTrees","n","getNumberOfShannonFanoTrees","getSlidingDictionarySize","b","usesDataDescriptor","usesEncryption","usesStrongEncryption","usesUTF8ForNames"],"mappings":"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","sourcesContent":["/**\r\n * node-compress-commons\r\n *\r\n * Copyright (c) 2014 Chris Talkington, contributors.\r\n * Licensed under the MIT license.\r\n * https://github.com/archiverjs/node-compress-commons/blob/master/LICENSE-MIT\r\n */\r\nvar zipUtil = require('./util');\r\n\r\nvar DATA_DESCRIPTOR_FLAG = 1 << 3;\r\nvar ENCRYPTION_FLAG = 1 << 0;\r\nvar NUMBER_OF_SHANNON_FANO_TREES_FLAG = 1 << 2;\r\nvar SLIDING_DICTIONARY_SIZE_FLAG = 1 << 1;\r\nvar STRONG_ENCRYPTION_FLAG = 1 << 6;\r\nvar UFT8_NAMES_FLAG = 1 << 11;\r\n\r\nvar GeneralPurposeBit = module.exports = function() {\r\n  if (!(this instanceof GeneralPurposeBit)) {\r\n    return new GeneralPurposeBit();\r\n  }\r\n\r\n  this.descriptor = false;\r\n  this.encryption = false;\r\n  this.utf8 = false;\r\n  this.numberOfShannonFanoTrees = 0;\r\n  this.strongEncryption = false;\r\n  this.slidingDictionarySize = 0;\r\n\r\n  return this;\r\n};\r\n\r\nGeneralPurposeBit.prototype.encode = function() {\r\n  return zipUtil.getShortBytes(\r\n    (this.descriptor ? DATA_DESCRIPTOR_FLAG : 0) |\r\n    (this.utf8 ? UFT8_NAMES_FLAG : 0) |\r\n    (this.encryption ? ENCRYPTION_FLAG : 0) |\r\n    (this.strongEncryption ? STRONG_ENCRYPTION_FLAG : 0)\r\n  );\r\n};\r\n\r\nGeneralPurposeBit.prototype.parse = function(buf, offset) {\r\n  var flag = zipUtil.getShortBytesValue(buf, offset);\r\n  var gbp = new GeneralPurposeBit();\r\n\r\n  gbp.useDataDescriptor((flag & DATA_DESCRIPTOR_FLAG) !== 0);\r\n  gbp.useUTF8ForNames((flag & UFT8_NAMES_FLAG) !== 0);\r\n  gbp.useStrongEncryption((flag & STRONG_ENCRYPTION_FLAG) !== 0);\r\n  gbp.useEncryption((flag & ENCRYPTION_FLAG) !== 0);\r\n  gbp.setSlidingDictionarySize((flag & SLIDING_DICTIONARY_SIZE_FLAG) !== 0 ? 8192 : 4096);\r\n  gbp.setNumberOfShannonFanoTrees((flag & NUMBER_OF_SHANNON_FANO_TREES_FLAG) !== 0 ? 3 : 2);\r\n\r\n  return gbp;\r\n};\r\n\r\nGeneralPurposeBit.prototype.setNumberOfShannonFanoTrees = function(n) {\r\n  this.numberOfShannonFanoTrees = n;\r\n};\r\n\r\nGeneralPurposeBit.prototype.getNumberOfShannonFanoTrees = function() {\r\n  return this.numberOfShannonFanoTrees;\r\n};\r\n\r\nGeneralPurposeBit.prototype.setSlidingDictionarySize = function(n) {\r\n  this.slidingDictionarySize = n;\r\n};\r\n\r\nGeneralPurposeBit.prototype.getSlidingDictionarySize = function() {\r\n  return this.slidingDictionarySize;\r\n};\r\n\r\nGeneralPurposeBit.prototype.useDataDescriptor = function(b) {\r\n  this.descriptor = b;\r\n};\r\n\r\nGeneralPurposeBit.prototype.usesDataDescriptor = function() {\r\n  return this.descriptor;\r\n};\r\n\r\nGeneralPurposeBit.prototype.useEncryption = function(b) {\r\n  this.encryption = b;\r\n};\r\n\r\nGeneralPurposeBit.prototype.usesEncryption = function() {\r\n  return this.encryption;\r\n};\r\n\r\nGeneralPurposeBit.prototype.useStrongEncryption = function(b) {\r\n  this.strongEncryption = b;\r\n};\r\n\r\nGeneralPurposeBit.prototype.usesStrongEncryption = function() {\r\n  return this.strongEncryption;\r\n};\r\n\r\nGeneralPurposeBit.prototype.useUTF8ForNames = function(b) {\r\n  this.utf8 = b;\r\n};\r\n\r\nGeneralPurposeBit.prototype.usesUTF8ForNames = function() {\r\n  return this.utf8;\r\n};"]},"metadata":{},"sourceType":"script"}